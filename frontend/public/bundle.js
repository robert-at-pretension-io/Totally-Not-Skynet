var app=function(){"use strict";function noop$2(){}const identity$1=e=>e;function assign$3(e,t){for(const r in t)e[r]=t[r];return e}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function is_empty(e){return 0===Object.keys(e).length}function subscribe(e,...t){if(null==e)return noop$2;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function component_subscribe(e,t,r){e.$$.on_destroy.push(subscribe(t,r))}function create_slot(e,t,r,n){if(e){const o=get_slot_context(e,t,r,n);return e[0](o)}}function get_slot_context(e,t,r,n){return e[1]&&n?assign$3(r.ctx.slice(),e[1](n(t))):r.ctx}function get_slot_changes(e,t,r,n){if(e[2]&&n){const o=e[2](n(r));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],r=Math.max(t.dirty.length,o.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|o[n];return e}return t.dirty|o}return t.dirty}function update_slot_base(e,t,r,n,o,i){if(o){const a=get_slot_context(t,r,n,i);e.p(a,o)}}function get_all_dirty_from_scope(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function set_store_value(e,t,r){return e.set(r),t}function split_css_unit(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const is_client="undefined"!=typeof window;let now$2=is_client?()=>window.performance.now():()=>Date.now(),raf$1=is_client?e=>requestAnimationFrame(e):noop$2;const tasks=new Set;function run_tasks(e){tasks.forEach((t=>{t.c(e)||(tasks.delete(t),t.f())})),0!==tasks.size&&raf$1(run_tasks)}function loop(e){let t;return 0===tasks.size&&raf$1(run_tasks),{promise:new Promise((r=>{tasks.add(t={c:e,f:r})})),abort(){tasks.delete(t)}}}function append(e,t){e.appendChild(t)}function get_root_for_style(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function append_empty_stylesheet(e){const t=element$1("style");return append_stylesheet(get_root_for_style(e),t),t.sheet}function append_stylesheet(e,t){return append(e.head||e,t),t.sheet}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function element$1(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function attr(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.data!==t&&(e.data=t)}function set_input_value(e,t){e.value=null==t?"":t}function select_option(e,t,r){for(let r=0;r<e.options.length;r+=1){const n=e.options[r];if(n.__value===t)return void(n.selected=!0)}r&&void 0===t||(e.selectedIndex=-1)}function select_value(e){const t=e.querySelector(":checked");return t&&t.__value}function toggle_class(e,t,r){e.classList[r?"add":"remove"](t)}function custom_event(e,t,{bubbles:r=!1,cancelable:n=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,r,n,t),o}function construct_svelte_component(e,t){return new e(t)}const managed_styles=new Map;let active=0,current_component;function hash(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function create_style_information(e,t){const r={stylesheet:append_empty_stylesheet(t),rules:{}};return managed_styles.set(e,r),r}function create_rule(e,t,r,n,o,i,a,s=0){const l=16.666/n;let u="{\n";for(let e=0;e<=1;e+=l){const n=t+(r-t)*i(e);u+=100*e+`%{${a(n,1-n)}}\n`}const c=u+`100% {${a(r,1-r)}}\n}`,g=`__svelte_${hash(c)}_${s}`,d=get_root_for_style(e),{stylesheet:p,rules:h}=managed_styles.get(d)||create_style_information(d,e);h[g]||(h[g]=!0,p.insertRule(`@keyframes ${g} ${c}`,p.cssRules.length));const f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${g} ${n}ms linear ${o}ms 1 both`,active+=1,g}function delete_rule(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=r.length-n.length;o&&(e.style.animation=n.join(", "),active-=o,active||clear_rules())}function clear_rules(){raf$1((()=>{active||(managed_styles.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&detach(t)})),managed_styles.clear())}))}function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function setContext(e,t){return get_current_component().$$.context.set(e,t),t}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0,promise$1;function flush(){if(0!==flushidx)return;const e=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){const t=[],r=[];render_callbacks.forEach((n=>-1===e.indexOf(n)?t.push(n):r.push(n))),r.forEach((e=>e())),render_callbacks=t}function wait(){return promise$1||(promise$1=Promise.resolve(),promise$1.then((()=>{promise$1=null}))),promise$1}function dispatch(e,t,r){e.dispatchEvent(custom_event(`${t?"intro":"outro"}${r}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,r,n){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push((()=>{outroing.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}else n&&n()}const null_transition={duration:0};function create_in_transition(e,t,r){const n={direction:"in"};let o,i,a=t(e,r,n),s=!1,l=0;function u(){o&&delete_rule(e,o)}function c(){const{delay:t=0,duration:r=300,easing:n=identity$1,tick:c=noop$2,css:g}=a||null_transition;g&&(o=create_rule(e,0,1,r,t,n,g,l++)),c(0,1);const d=now$2()+t,p=d+r;i&&i.abort(),s=!0,add_render_callback((()=>dispatch(e,!0,"start"))),i=loop((t=>{if(s){if(t>=p)return c(1,0),dispatch(e,!0,"end"),u(),s=!1;if(t>=d){const e=n((t-d)/r);c(e,1-e)}}return s}))}let g=!1;return{start(){g||(g=!0,delete_rule(e),is_function(a)?(a=a(n),wait().then(c)):c())},invalidate(){g=!1},end(){s&&(u(),s=!1)}}}function create_out_transition(e,t,r){const n={direction:"out"};let o,i=t(e,r,n),a=!0;const s=outros;function l(){const{delay:t=0,duration:r=300,easing:n=identity$1,tick:l=noop$2,css:u}=i||null_transition;u&&(o=create_rule(e,1,0,r,t,n,u));const c=now$2()+t,g=c+r;add_render_callback((()=>dispatch(e,!1,"start"))),loop((t=>{if(a){if(t>=g)return l(0,1),dispatch(e,!1,"end"),--s.r||run_all(s.c),!1;if(t>=c){const e=n((t-c)/r);l(1-e,e)}}return a}))}return s.r+=1,is_function(i)?wait().then((()=>{i=i(n),l()})):l(),{end(t){t&&i.tick&&i.tick(1,0),a&&(o&&delete_rule(e,o),a=!1)}}}function outro_and_destroy_block(e,t){transition_out(e,1,1,(()=>{t.delete(e.key)}))}function update_keyed_each(e,t,r,n,o,i,a,s,l,u,c,g){let d=e.length,p=i.length,h=d;const f={};for(;h--;)f[e[h].key]=h;const y=[],m=new Map,b=new Map,_=[];for(h=p;h--;){const e=g(o,i,h),s=r(e);let l=a.get(s);l?n&&_.push((()=>l.p(e,t))):(l=u(s,e),l.c()),m.set(s,y[h]=l),s in f&&b.set(s,Math.abs(h-f[s]))}const v=new Set,S=new Set;function E(e){transition_in(e,1),e.m(s,c),a.set(e.key,e),c=e.first,p--}for(;d&&p;){const t=y[p-1],r=e[d-1],n=t.key,o=r.key;t===r?(c=t.first,d--,p--):m.has(o)?!a.has(n)||v.has(n)?E(t):S.has(o)?d--:b.get(n)>b.get(o)?(S.add(n),E(t)):(v.add(o),d--):(l(r,a),d--)}for(;d--;){const t=e[d];m.has(t.key)||l(t,a)}for(;p;)E(y[p-1]);return run_all(_),y}function create_component(e){e&&e.c()}function mount_component(e,t,r,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,r),n||add_render_callback((()=>{const t=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...t):run_all(t),e.$$.on_mount=[]})),i.forEach(add_render_callback)}function destroy_component(e,t){const r=e.$$;null!==r.fragment&&(flush_render_callbacks(r.after_update),run_all(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,r,n,o,i,a,s=[-1]){const l=current_component;set_current_component(e);const u=e.$$={fragment:null,ctx:[],props:i,update:noop$2,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=r?r(e,t.props||{},((t,r,...n)=>{const i=n.length?n[0]:r;return u.ctx&&o(u.ctx[t],u.ctx[t]=i)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](i),c&&make_dirty(e,t)),r})):[],u.update(),c=!0,run_all(u.before_update),u.fragment=!!n&&n(u.ctx),t.target){if(t.hydrate){const e=children(t.target);u.fragment&&u.fragment.l(e),e.forEach(detach)}else u.fragment&&u.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$2}$on(e,t){if(!is_function(t))return noop$2;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const subscriber_queue=[];function writable(e,t=noop$2){let r;const n=new Set;function o(t){if(safe_not_equal(e,t)&&(e=t,r)){const t=!subscriber_queue.length;for(const t of n)t[1](),subscriber_queue.push(t,e);if(t){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,a=noop$2){const s=[i,a];return n.add(s),1===n.size&&(r=t(o)||noop$2),i(e),()=>{n.delete(s),0===n.size&&r&&(r(),r=null)}}}}function __awaiter(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var googleProtobuf={},_GraphNodeInfo_one_of_decls,_Edge_one_of_decls,_Prompt_one_of_decls,_Command_one_of_decls,_Conditional_one_of_decls,_Graph_one_of_decls,_Process_one_of_decls,_NodeContent_one_of_decls,_Node_one_of_decls,_Identity_one_of_decls,_Execution_one_of_decls,_SystemState_one_of_decls,_AuthenticationMessage_one_of_decls,_UserSettings_one_of_decls,_SystemError_one_of_decls,_Letter_one_of_decls,_Body_one_of_decls,_NodesToProcess_one_of_decls,_Envelope_one_of_decls,NodeTypes,VerbTypes,LogMessageTypes;(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,o=0;o<n;o++){var i=e[o];if(t.call(r,i,o,e))return{i:o,v:i}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==commonjsGlobal&&null!=commonjsGlobal?commonjsGlobal:e},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(e,t,r,n){if(t){for(r=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var o=e[n];o in r||(r[o]={}),r=r[o]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var n=e.length;0<n&&0<t;)if(r[--t]!=e[--n])return!1;return 0>=n}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var n=r.length,o=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var i=0;i<o&&t<n;)if(r[t++]!=e[i++])return!1;return i>=o}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t},goog.define=function(e,t){return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var r=0;r<e.length;r++)if(null==(t=t[e[r]]))return null;return t},goog.globalize=function(e,t){for(var r in t=t||goog.global,e)t[r]=e[r]},goog.addDependency=function(e,t,r,n){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var r=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var n=goog.moduleLoaderState_.moduleName;if("string"!=typeof n||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[n]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,r){var n=goog.global.$jscomp;n||(goog.global.$jscomp=n={});var o=n.transpile;if(!o){var i=goog.basePath+goog.TRANSPILER,a=goog.loadFileSync_(i);if(a){if(function(){(0,eval)(a+"\n//# sourceURL="+i)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,o=(n=goog.global.$jscomp).transpile}}return o||(o=n.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),o(e,t,r)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.cloneObject(e[r]);return t}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.head.appendChild(r),t.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var r=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(e){return e},e=t?e+"-"+n(t):n(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.getMsg=function(e,t,r){return r&&r.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,r){return null!=t&&r in t?t[r]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,n){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[r].apply(e,o)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},goog.defineClass=function(e,t){var r=t.constructor,n=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var r=!goog.defineClass.isUnsealable_(t),n=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===n&&r&&Object.seal instanceof Function&&Object.seal(t),t};return n},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,r=goog.global.trustedTypes||goog.global.TrustedTypes;if(!r||!r.createPolicy)return t;try{t=r.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,r){for(var n in e)t.call(r,e[n],n,e)},goog.object.filter=function(e,t,r){var n,o={};for(n in e)t.call(r,e[n],n,e)&&(o[n]=e[n]);return o},goog.object.map=function(e,t,r){var n,o={};for(n in e)o[n]=t.call(r,e[n],n,e);return o},goog.object.some=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return!0;return!1},goog.object.every=function(e,t,r){for(var n in e)if(!t.call(r,e[n],n,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],n=0;for(t in e)r[n++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],n=0;for(t in e)r[n++]=t;return r},goog.object.getValueByKeys=function(e,t){var r=goog.isArrayLike(t),n=r?t:arguments;for(r=r?0:1;r<n.length;r++){if(null==e)return;e=e[n[r]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return n},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(var n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.object.unsafeClone(e[r]);return t}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,n,o=1;o<arguments.length;o++){for(r in n=arguments[o])e[r]=n[r];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)r=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<t;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<t;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,r){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var n={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||r);){for(var o=Object.getOwnPropertyNames(e),i=0;i<o.length;i++)n[o[i]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(n)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(e,t,r,n){var o="Assertion failed";if(r){o+=": "+r;var i=n}else e&&(o+=": "+e,i=t);throw Error(""+o,i||[])},jspb.asserts.assert=function(e,t,r){for(var n=[],o=2;o<arguments.length;++o)n[o-2]=arguments[o];return e||jspb.asserts.doAssertFailure("",null,t,n),e},jspb.asserts.assertString=function(e,t,r){for(var n=[],o=2;o<arguments.length;++o)n[o-2]=arguments[o];return"string"!=typeof e&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(e),e],t,n),e},jspb.asserts.assertArray=function(e,t,r){for(var n=[],o=2;o<arguments.length;++o)n[o-2]=arguments[o];return Array.isArray(e)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(e),e],t,n),e},jspb.asserts.fail=function(e,t){for(var r=[],n=1;n<arguments.length;++n)r[n-1]=arguments[n];throw Error("Failure"+(e?": "+e:""),r)},jspb.asserts.assertInstanceof=function(e,t,r,n){for(var o=[],i=3;i<arguments.length;++i)o[i-3]=arguments[i];return e instanceof t||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(t),jspb.asserts.getType(e)],r,o),e},jspb.asserts.getType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var r="",n=(e=e.split("%s")).length-1,o=0;o<n;o++)r+=e[o]+(o<t.length?t[o]:"%s");return r+e[n]},goog.asserts.doAssertFailure_=function(e,t,r,n){var o="Assertion failed";if(r){o+=": "+r;var i=n}else e&&(o+=": "+e,i=t);e=new goog.asserts.AssertionError(""+o,i||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,n){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,r);for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){if(0>(r=null==r?e.length-1:r)&&(r=Math.max(0,e.length+r)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,r);for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,i=0;i<n;i++)i in o&&t.call(r,o[i],i,e)},goog.array.forEachRight=function(e,t,r){var n=e.length,o="string"==typeof e?e.split(""):e;for(--n;0<=n;--n)n in o&&t.call(r,o[n],n,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var n=e.length,o=[],i=0,a="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in a){var l=a[s];t.call(r,l,s,e)&&(o[i++]=l)}return o},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var n=e.length,o=Array(n),i="string"==typeof e?e.split(""):e,a=0;a<n;a++)a in i&&(o[a]=t.call(r,i[a],a,e));return o},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),n&&(t=goog.bind(t,n)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,n){var o=r;return goog.array.forEach(e,(function(r,i){o=t.call(n,o,r,i,e)})),o},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),n&&(t=goog.bind(t,n)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,n){var o=r;return goog.array.forEachRight(e,(function(r,i){o=t.call(n,o,r,i,e)})),o},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in o&&t.call(r,o[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in o&&!t.call(r,o[i],i,e))return!1;return!0},goog.array.count=function(e,t,r){var n=0;return goog.array.forEach(e,(function(e,o,i){t.call(r,e,o,i)&&++n}),r),n},goog.array.find=function(e,t,r){return 0>(t=goog.array.findIndex(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in o&&t.call(r,o[i],i,e))return i;return-1},goog.array.findRight=function(e,t,r){return 0>(t=goog.array.findIndexRight(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,r){var n=e.length,o="string"==typeof e?e.split(""):e;for(--n;0<=n;n--)if(n in o&&t.call(r,o[n],n,e))return n;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!Array.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var n;2==arguments.length||0>(n=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,n)},goog.array.remove=function(e,t){var r;return(r=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),r},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){return 0<=(t=goog.array.findIndex(e,t,r))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,r){var n=0;return goog.array.forEachRight(e,(function(o,i){t.call(r,o,i,e)&&goog.array.removeAt(e,i)&&n++})),n},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(goog.isArrayLike(n)){var o=e.length||0,i=n.length||0;e.length=o+i;for(var a=0;a<i;a++)e[o+a]=n[a]}else e.push(n)}},goog.array.splice=function(e,t,r,n){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){t=t||e;var n=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||n,n={};for(var o=0,i=0;i<e.length;){var a=e[i++],s=r(a);Object.prototype.hasOwnProperty.call(n,s)||(n[s]=!0,t[o++]=a)}t.length=o},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,n,o){for(var i,a=0,s=e.length;a<s;){var l=a+(s-a>>>1),u=r?t.call(o,e[l],l,e):t(n,e[l]);0<u?a=l+1:(s=l,i=!u)}return i?a:-a-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]={index:n,value:e[n]};var o=t||goog.array.defaultCompare;for(goog.array.sort(r,(function(e,t){return o(e.value,t.value)||e.index-t.index})),n=0;n<e.length;n++)e[n]=r[n].value},goog.array.sortByKey=function(e,t,r){var n=r||goog.array.defaultCompare;goog.array.sort(e,(function(e,r){return n(t(e),t(r))}))},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,(function(e){return e[t]}),r)},goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var n=1;n<e.length;n++){var o=t(e[n-1],e[n]);if(0<o||0==o&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var n=e.length;r=r||goog.array.defaultCompareEquality;for(var o=0;o<n;o++)if(!r(e[o],t[o]))return!1;return!0},goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var n=Math.min(e.length,t.length),o=0;o<n;o++){var i=r(e[o],t[o]);if(0!=i)return i}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){return 0>(r=goog.array.binarySearch(e,t,r))&&(goog.array.insertAt(e,t,-(r+1)),!0)},goog.array.binaryRemove=function(e,t,r){return 0<=(t=goog.array.binarySearch(e,t,r))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,r){for(var n={},o=0;o<e.length;o++){var i=e[o],a=t.call(r,i,o,e);void 0!==a&&(n[a]||(n[a]=[])).push(i)}return n},goog.array.toObject=function(e,t,r){var n={};return goog.array.forEach(e,(function(o,i){n[t.call(r,o,i,e)]=o})),n},goog.array.range=function(e,t,r){var n=[],o=0,i=e;if(void 0!==t&&(o=e,i=t),0>(r=r||1)*(i-o))return[];if(0<r)for(e=o;e<i;e+=r)n.push(e);else for(e=o;e>i;e+=r)n.push(e);return n},goog.array.repeat=function(e,t){for(var r=[],n=0;n<t;n++)r[n]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var n=arguments[r];if(Array.isArray(n))for(var o=0;o<n.length;o+=8192){var i=goog.array.slice(n,o,o+8192);i=goog.array.flatten.apply(null,i);for(var a=0;a<i.length;a++)t.push(i[a])}else t.push(n)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,r,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,n=1;n<arguments.length;n++)arguments[n].length<r&&(r=arguments[n].length);for(n=0;n<r;n++){for(var o=[],i=0;i<arguments.length;i++)o.push(arguments[i][n]);t.push(o)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var r=e.length-1;0<r;r--){var n=Math.floor(t()*(r+1)),o=e[r];e[r]=e[n],e[n]=o}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,(function(t){r.push(e[t])})),r},goog.array.concatMap=function(e,t,r){return goog.array.concat.apply([],goog.array.map(e,t,r))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);255<o&&(t[r++]=255&o,o>>=8),t[r++]=o}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var n=goog.array.slice(e,r,r+8192);t+=String.fromCharCode.apply(null,n)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t[r++]=o:(2048>o?t[r++]=o>>6|192:(55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128):t[r++]=o>>12|224,t[r++]=o>>6&63|128),t[r++]=63&o|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,n=0;r<e.length;){var o=e[r++];if(128>o)t[n++]=String.fromCharCode(o);else if(191<o&&224>o){var i=e[r++];t[n++]=String.fromCharCode((31&o)<<6|63&i)}else if(239<o&&365>o){i=e[r++];var a=e[r++];o=((7&o)<<18|(63&i)<<12|(63&a)<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))}else i=e[r++],a=e[r++],t[n++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],n=0;n<e.length;n++)r.push(e[n]^t[n]);return r},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(e);r&&void 0!==r[t]&&(e&&(e instanceof r[t]||!(e instanceof r.Location||e instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,r=t&&(t.defaultView||t.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,r),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(r){return t?e==r:e===r}},goog.functions.compose=function(e,t){var r=arguments,n=r.length;return function(){var e;n&&(e=r[n-1].apply(this,arguments));for(var t=n-2;0<=t;t--)e=r[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,r=t.length;return function(){for(var e,n=0;n<r;n++)e=t[n].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var r=function(){};return r.prototype=e.prototype,r=new r,e.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(t=e(),r=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,r){var n=0;return function(o){goog.global.clearTimeout(n);var i=arguments;n=goog.global.setTimeout((function(){e.apply(r,i)}),t)}},goog.functions.throttle=function(e,t,r){var n=0,o=!1,i=[],a=function(){n=0,o&&(o=!1,s())},s=function(){n=goog.global.setTimeout(a,t),e.apply(r,i)};return function(e){i=arguments,n?o=!0:s()}},goog.functions.rateLimit=function(e,t,r){var n=0,o=function(){n=0};return function(i){n||(n=goog.global.setTimeout(o,t),e.apply(r,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var r=[],n=1;n<arguments.length;n++)r.push(goog.html.SafeScript.stringify_(arguments[n]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(e){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(e){},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.fs.blob={},goog.fs.blob.getBlob=function(e){var t=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==t){t=new t;for(var r=0;r<arguments.length;r++)t.append(arguments[r]);return t.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(e,t,r){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==n){n=new n;for(var o=0;o<e.length;o++)n.append(e[o],r);return n.getBlob(t)}if(void 0!==goog.global.Blob)return n={},t&&(n.type=t),r&&(n.endings=r),new Blob(e,n);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\ud801\ud804-\ud839\ud83c-\udbff豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\ud802-\ud803\ud83a-\ud83bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var r=0,n=0,o=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var i=e[t];goog.i18n.bidi.startsWithRtl(i)?(r++,n++):goog.i18n.bidi.isRequiredLtrRe_.test(i)?o=!0:goog.i18n.bidi.hasAnyLtr(i)?n++:goog.i18n.bidi.hasNumeralsRe_.test(i)&&(o=!0)}return 0==n?o?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/n>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var r=goog.html.TrustedResourceUrl.unwrap(this),n=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",n,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,t){var r=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[n])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,r,n){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(r,n)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",r=0;r<e.length;r++)t+=goog.string.Const.unwrap(e[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.fromSafeScript=function(e){return e=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(e)],"text/javascript"),e=goog.fs.url.createObjectUrl(e),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,r){if(null==r)return t;if("string"==typeof r)return r?e+encodeURIComponent(r):"";for(var n in r){var o=r[n];o=Array.isArray(o)?o:[o];for(var i=0;i<o.length;i++){var a=o[i];null!=a&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(String(a)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var r=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var n=Math.max(e.length,t.length),o=0;0==r&&o<n;o++){var i=e[o]||"",a=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;r=0==i[1].length?0:parseInt(i[1],10);var s=0==a[1].length?0:parseInt(a[1],10);r=goog.string.internal.compareElements_(r,s)||goog.string.internal.compareElements_(0==i[2].length,0==a[2].length)||goog.string.internal.compareElements_(i[2],a[2]),i=i[3],a=a[3]}while(0==r)}return r},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SafeUrl.isSafeMimeType(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromMediaSource=function(e){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),e=e instanceof MediaSource?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SafeUrl.isSafeMimeType(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,r){return(e=e.exec(t))?(e=e[1],-1==(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,r="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var n=e[t];null!=n&&(r+=t+":"+(n=Array.isArray(n)?goog.array.map(n,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(n))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,r=!0,n=0;n<e.length;n++){var o=e.charAt(n);"'"==o&&r?t=!t:'"'==o&&t&&(r=!r)}return t&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,r=/^[-_a-zA-Z0-9]$/,n=0;n<e.length;n++){var o=e.charAt(n);if("]"==o){if(t)return!1;t=!0}else if("["==o){if(!t)return!1;t=!1}else if(!t&&!r.test(o))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,r,n){var o="";return r=r.replace(/^(['"])(.*)\1$/,(function(e,t,r){return o=t,r})),e=goog.html.SafeUrl.sanitize(r).getTypedStringValue(),t+o+e+o+n}))},goog.html.SafeStyle.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,r),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var r=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},r=[],n=0;n<e.length;n++){var o=e[n];if(t[o])r.push(t[o]);else if(goog.object.contains(t,o)&&r.pop()!=o)return!1}return 0==r.length},goog.html.SafeStyleSheet.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,n=[];t=r.exec(e);)n.push([t[1],t[2],t[3]||void 0]);return n},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,n),r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var r={};goog.array.forEach(t,(function(e){r[e[0]]=e[1]}));var n=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS","HeadlessChrome"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,r=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(r=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(e){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("\x3c!--"+goog.string.internal.htmlEscape(e)+"--\x3e",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,r){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,r)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,r,n){e&&goog.html.TrustedResourceUrl.unwrap(e);var o={};return o.src=e||null,o.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(o,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,n)},goog.html.SafeHtml.createSandboxIframe=function(e,t,r,n){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var o={};return o.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,o.srcdoc=t||null,o.sandbox="",e=goog.html.SafeHtml.combineAttributes(o,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,n)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var r in t){var n=r.toLowerCase();if("language"==n||"src"==n||"text"==n||"type"==n)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+n+'" attribute':"")}for(r="",e=goog.array.concat(e),n=0;n<e.length;n++)r+=goog.html.SafeScript.unwrap(e[n]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var r="";e=goog.array.concat(e);for(var n=0;n<e.length;n++)r+=goog.html.SafeStyleSheet.unwrap(e[n]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");r=goog.html.SafeHtml.getStyleValue_(r)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+r+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if("string"!=typeof r)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.':"");r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert("string"==typeof r||"number"==typeof r,"String or number value expected, got "+typeof r+" with value: "+r),t+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"");return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,r,n){return(t=goog.html.SafeHtml.create(t,r,n)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var r=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),n=[],o=function(e){Array.isArray(e)?goog.array.forEach(e,o):(e=goog.html.SafeHtml.htmlEscape(e),n.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&r!=e&&(r=null))};return goog.array.forEach(t,o),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n.join(goog.html.SafeHtml.unwrap(e)),r)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=e,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,r){var n=null,o="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==r?r=[]:Array.isArray(r)||(r=[r]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+e+"> does not allow content."),o+=">"):(n=goog.html.SafeHtml.concat(r),o+=">"+goog.html.SafeHtml.unwrap(n)+"</"+e+">",n=n.getDirection()),(e=t&&t.dir)&&(n=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,n)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var r="";if(t)for(var n in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+n+'".':"");var o=t[n];null!=o&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,n,o))}return r},goog.html.SafeHtml.combineAttributes=function(e,t,r){var n,o={};for(n in e)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),o[n]=e[n];for(n in t)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),o[n]=t[n];if(r)for(n in r){var i=n.toLowerCase();if(i in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+i+'" attribute, got "'+n+'" with value "'+r[n]+'"':"");i in t&&delete o[i],o[n]=r[n]}return o},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,r){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,r){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild)&&(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!t.parentElement)})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,r){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,r,n,o){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t=t||goog.global,r=r instanceof goog.string.Const?goog.string.Const.unwrap(r):r||"",t.open(goog.html.SafeUrl.unwrap(e),r,n,o)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,r){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),r)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var r=e.split("%s"),n="",o=Array.prototype.slice.call(arguments,1);o.length&&1<r.length;)n+=r.shift()+o.shift();return n+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(r),o=t.toLowerCase().match(r),i=Math.min(n.length,o.length),a=0;a<i;a++){r=n[a];var s=o[a];if(r!=s)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(s,10),!isNaN(t)&&e-t)?e-t:r<s?-1:1}return n.length!=o.length?n.length-o.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var o=r[e];return o||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(o=String.fromCharCode(t))),o||(goog.dom.safe.setInnerHtml(n,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),o=n.firstChild.nodeValue.slice(0,-1)),r[e]=o)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,n=0;n<r;n++){var o=1==r?t:t.charAt(n);if(e.charAt(0)==o&&e.charAt(e.length-1)==o)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,n){if(r&&(e=goog.string.unescapeEntities(e)),n&&e.length>t){n>t&&(n=t);var o=e.length-n;e=e.substring(0,t-n)+"..."+e.substring(o)}else e.length>t&&(n=Math.floor(t/2),o=e.length-n,e=e.substring(0,n+t%2)+"..."+e.substring(o));return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var n=e.charAt(r),o=n.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[n]||(31<o&&127>o?n:goog.string.escapeChar(n))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var r=e;else 256>t?(r="\\x",(16>t||256<t)&&(r+="0")):(r="\\u",4096>t&&(r+="0")),r+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var n=e;return 0<=t&&t<e.length&&0<r&&(n=e.substr(0,t)+e.substr(t+r,e.length-t-r)),n},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,r){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){return-1==(r=(e=void 0!==r?e.toFixed(r):String(e)).indexOf("."))&&(r=e.length),goog.string.repeat("0",Math.max(0,t-r))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,r){return t+r.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),"string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var n=[];0<r&&e.length;)n.push(e.shift()),r--;return e.length&&n.push(e.join(t)),n},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var r=-1,n=0;n<t.length;n++)if(""!=t[n]){var o=e.lastIndexOf(t[n]);o>r&&(r=o)}return-1==r?e:e.slice(r+1)},goog.string.editDistance=function(e,t){var r=[],n=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var o=0;o<t.length+1;o++)r[o]=o;for(o=0;o<e.length;o++){n[0]=o+1;for(var i=0;i<t.length;i++)n[i+1]=Math.min(n[i]+1,r[i+1]+1,r[i]+Number(e[o]!=t[i]));for(i=0;i<r.length;i++)r[i]=n[i]}return n[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,r=goog.labs.userAgent.engine.getEngineTuple_(e);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):r[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,r,n){return n=n?n(t):t,Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=r(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&(null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e))?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var e=goog.userAgent.getDocumentMode_();return e||(parseInt(goog.userAgent.VERSION,10)||void 0)}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(e){return goog.string.contains(goog.crypt.base64.paddingChars_,e)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),void 0===t&&(t=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),t=goog.crypt.base64.byteToCharMaps_[t];for(var r=[],n=0;n<e.length;n+=3){var o=e[n],i=n+1<e.length,a=i?e[n+1]:0,s=n+2<e.length,l=s?e[n+2]:0,u=o>>2;o=(3&o)<<4|a>>4,a=(15&a)<<2|l>>6,l&=63,s||(l=64,i||(a=64)),r.push(t[u],t[o],t[a]||"",t[l]||"")}return r.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){r+=String.fromCharCode(e)})),r},goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){r.push(e)})),r},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,r=3*t/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(e[t-1])&&(r=goog.crypt.base64.isPadding_(e[t-2])?r-2:r-1);var n=new Uint8Array(r),o=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){n[o++]=e})),n.subarray(0,o)},goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;n<e.length;){var r=e.charAt(n++),o=goog.crypt.base64.charToByteMap_[r];if(null!=o)return o;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var n=0;;){var o=r(-1),i=r(0),a=r(64),s=r(64);if(64===s&&-1===o)break;t(o<<2|i>>4),64!=a&&(t(i<<4&240|a>>2),64!=s&&t(a<<6&192|s))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var e=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=e.concat(t[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=n;for(var o=0;o<n.length;o++){var i=n[o],a=goog.crypt.base64.charToByteMap_[i];void 0===a?goog.crypt.base64.charToByteMap_[i]=o:goog.asserts.assert(a===o)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,r=(e=Math.abs(e))>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=r,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var r=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-r),16777216<=(e=Math.round(e*jspb.BinaryConstants.TWO_TO_23))&&++r,jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|r+127<<23|8388607&e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);e=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=r>>>0}else{var n=0;if(2<=(r=e))for(;2<=r&&1023>n;)n++,r/=2;else for(;1>r&&-1022<n;)r*=2,n--;e=(r=e*Math.pow(2,-n))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|n+1023<<20|e)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),o=e.charCodeAt(3),i=e.charCodeAt(4),a=e.charCodeAt(5),s=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(r<<8)+(n<<16)+(o<<24)>>>0,jspb.utils.split64High=i+(a<<8)+(s<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+(e>>>0)},jspb.utils.joinInt64=function(e,t){var r=2147483648&t;return r&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),r?-e:e},jspb.utils.toZigzag64=function(e,t,r){var n=t>>31;return r(e<<1^n,(t<<1|e>>>31)^n)},jspb.utils.joinZigzag64=function(e,t){return jspb.utils.fromZigzag64(e,t,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(e,t,r){var n=-(1&e);return r((e>>>1|t<<31)^n,t>>>1^n)},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var r=e>>>23&255;return e&=8388607,255==r?e?NaN:1/0*t:0==r?t*Math.pow(2,-149)*e:t*Math.pow(2,r-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,n=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==n?e?NaN:1/0*r:0==n?r*Math.pow(2,-1074)*e:r*Math.pow(2,n-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+jspb.utils.joinUint64(e,t);var n=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*n+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,1e7<=e&&(n+=Math.floor(e/1e7),e%=1e7),1e7<=n&&(t+=Math.floor(n/1e7),n%=1e7),r(t,0)+r(n,t)+r(e,1)},jspb.utils.joinSignedDecimalString=function(e,t){var r=2147483648&t;return r&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),r?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,r):jspb.utils.joinUnsignedDecimalString(e,r)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=jspb.utils.hash64ToDecimalString(e[n],t);return r},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++)t=e*n[r]+t,n[r]=255&t,t>>>=8}jspb.asserts.assert(0<e.length);var r=!1;"-"===e[0]&&(r=!0,e=e.slice(1));for(var n=[0,0,0,0,0,0,0,0],o=0;o<e.length;o++)t(10,e.charCodeAt(o)-jspb.utils.ZERO_CHAR_CODE_);return r&&(function(){for(var e=0;8>e;e++)n[e]=255&~n[e]}(),t(1,1)),goog.crypt.byteArrayToString(n)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.toHexDigit_=function(e){return String.fromCharCode(10>e?jspb.utils.ZERO_CHAR_CODE_+e:jspb.utils.A_CHAR_CODE_-10+e)},jspb.utils.fromHexCharCode_=function(e){return e>=jspb.utils.A_CHAR_CODE_?e-jspb.utils.A_CHAR_CODE_+10:e-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var r=0;8>r;r++){var n=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.toHexDigit_(n>>4),t[2*r+3]=jspb.utils.toHexDigit_(15&n)}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),jspb.asserts.assert(18==e.length),jspb.asserts.assert("0"==e[0]),jspb.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++){var n=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+2)),o=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+3));t=String.fromCharCode(16*n+o)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,r):jspb.utils.joinUint64(e,r)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,r){for(var n=0,o=t;o<r;o++)n+=e[o]>>7;return r-t-n},jspb.utils.countVarintFields=function(e,t,r,n){var o=0;if(128>(n=8*n+jspb.BinaryConstants.WireType.VARINT))for(;t<r&&e[t++]==n;)for(o++;;){var i=e[t++];if(0==(128&i))break}else for(;t<r;){for(i=n;128<i;){if(e[t]!=(127&i|128))return o;t++,i>>=7}if(e[t++]!=i)break;for(o++;0!=(128&(i=e[t++])););}return o},jspb.utils.countFixedFields_=function(e,t,r,n,o){var i=0;if(128>n)for(;t<r&&e[t++]==n;)i++,t+=o;else for(;t<r;){for(var a=n;128<a;){if(e[t++]!=(127&a|128))return i;a>>=7}if(e[t++]!=a)break;i++,t+=o}return i},jspb.utils.countFixed32Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,r,n){var o=0;for(n=8*n+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var i=n;128<i;){if(e[t++]!=(127&i|128))return o;i>>=7}if(e[t++]!=i)break;o++;for(var a=0,s=1;a+=(127&(i=e[t++]))*s,s*=128,0!=(128&i););t+=a}return o},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return"string"==typeof e?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var n=e.charCodeAt(r);if(255<n)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=n}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(e,t,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var n=jspb.BinaryDecoder.instanceCache_.pop();return e&&n.setBlock(e,t,r),n}return new jspb.BinaryDecoder(e,t,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=void 0!==t?t:0,this.end_=void 0!==r?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(e){for(var t=128,r=0,n=0,o=0;4>o&&128<=t;o++)r|=(127&(t=this.bytes_[this.cursor_++]))<<7*o;if(128<=t&&(r|=(127&(t=this.bytes_[this.cursor_++]))<<28,n|=(127&t)>>4),128<=t)for(o=0;5>o&&128<=t;o++)n|=(127&(t=this.bytes_[this.cursor_++]))<<7*o+3;if(128>t)return e(r>>>0,n>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(e){return this.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(e){var t=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var n=0,o=0,i=r+7;i>=r;i--)n=n<<8|t[i],o=o<<8|t[i+4];return e(n,o)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],r=127&t;return 128>t?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+1]))<<7,128>t?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+2]))<<14,128>t?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+3]))<<21,128>t?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(t=e[this.cursor_+4]))<<28,128>t?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|n<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|r<<16|n<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var n=[],o="";r<e;){var i=t[r++];if(128>i)n.push(i);else{if(192>i)continue;if(224>i){var a=t[r++];n.push((31&i)<<6|63&a)}else if(240>i){a=t[r++];var s=t[r++];n.push((15&i)<<12|(63&a)<<6|63&s)}else if(248>i){i=(7&i)<<18|(63&(a=t[r++]))<<12|(63&(s=t[r++]))<<6|63&t[r++],i-=65536,n.push(55296+(i>>10&1023),56320+(1023&i))}}8192<=n.length&&(o+=String.fromCharCode.apply(null,n),n.length=0)}return o+=goog.crypt.byteArrayToString(n),this.cursor_=r,o},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],n=e[t+1],o=e[t+2],i=e[t+3],a=e[t+4],s=e[t+5],l=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(r,n,o,i,a,s,l,e)},jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var n=jspb.BinaryReader.instanceCache_.pop();return e&&n.decoder_.setBlock(e,t,r),n}return new jspb.BinaryReader(e,t,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){null===this.readCallbacks_&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return jspb.asserts.assert(null!==this.readCallbacks_),e=this.readCallbacks_[e],jspb.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n,this.decoder_.setEnd(n),t(e,this),this.decoder_.setCursor(n),this.decoder_.setEnd(r)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(e,t,r){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==e),r(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(r),e},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(e)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(e)},jspb.BinaryReader.prototype.readPackedField_=function(e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var r=[];this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(e){var t=this;jspb.utils.splitHash64(e),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(e,r){t.writeSplitVarint64(e>>>0,r>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){jspb.asserts.assert("boolean"==typeof e||"number"==typeof e),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){var t=this.buffer_.length;jspb.asserts.assertString(e);for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(128>n)this.buffer_.push(n);else if(2048>n)this.buffer_.push(n>>6|192),this.buffer_.push(63&n|128);else if(65536>n)if(55296<=n&&56319>=n&&r+1<e.length){var o=e.charCodeAt(r+1);56320<=o&&57343>=o&&(n=1024*(n-55296)+o-56320+65536,this.buffer_.push(n>>18|240),this.buffer_.push(n>>12&63|128),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128),r++)}else this.buffer_.push(n>>12|224),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128)}return this.buffer_.length-t},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var r=65535&e,n=65535&t,o=t>>>16;for(t=r*n+65536*(r*o&65535)+65536*((e>>>=16)*n&65535),r=e*o+(r*o>>>16)+(e*n>>>16);4294967296<=t;)t-=4294967296,r+=1;return new jspb.arith.UInt64(t>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var n=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),n=n.leftShift();for(;!n.zero();)0>=e.cmp(r)&&(t=t.add(n),r=r.sub(e)),e=e.rightShift(),n=n.rightShift();return[t,r]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var r=(t=t.div(10))[0];e=t[1].lo+e,t=r}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),n=0;n<e.length;n++){if("0">e[n]||"9"<e[n])return null;var o=parseInt(e[n],10);r.lo=o,t=t.mul(10).add(r)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,jspb.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,n=0,o=0;o<r;o++){var i=t[o];e.set(i,n),n+=i.length}return t=this.encoder_.end(),e.set(t,n),n+=t.length,jspb.asserts.assert(n==e.length),this.blocks_=[e],e},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){jspb.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var n=jspb.BinaryConstants.FieldType;switch(e){case n.DOUBLE:this.writeDouble(t,r);break;case n.FLOAT:this.writeFloat(t,r);break;case n.INT64:this.writeInt64(t,r);break;case n.UINT64:this.writeUint64(t,r);break;case n.INT32:this.writeInt32(t,r);break;case n.FIXED64:this.writeFixed64(t,r);break;case n.FIXED32:this.writeFixed32(t,r);break;case n.BOOL:this.writeBool(t,r);break;case n.STRING:this.writeString(t,r);break;case n.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case n.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case n.BYTES:this.writeBytes(t,r);break;case n.UINT32:this.writeUint32(t,r);break;case n.ENUM:this.writeEnum(t,r);break;case n.SFIXED32:this.writeSfixed32(t,r);break;case n.SFIXED64:this.writeSfixed64(t,r);break;case n.SINT32:this.writeSint32(t,r);break;case n.SINT64:this.writeSint64(t,r);break;case n.FHASH64:this.writeFixedHash64(t,r);break;case n.VHASH64:this.writeVarintHash64(t,r);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(e,t){null!=t&&this.writeZigzagVarintHash64_(e,t)},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&this.writeZigzagVarint64String_(e,t)},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(jspb.asserts.assert("boolean"==typeof t||"number"==typeof t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,r){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),r(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);var n=this.encoder_;jspb.utils.toZigzag64(t,r,(function(e,t){n.writeSplitVarint64(e>>>0,t>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitFixed64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitVarint64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitZigzagVarint64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarintHash64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++){var o=this.beginDelimited_(e);r(t[n],this),this.endDelimited_(o)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[n],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSplitFixed64(r(t[o]),n(t[o]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSplitVarint64(r(t[o]),n(t[o]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=this.encoder_,i=0;i<t.length;i++)jspb.utils.toZigzag64(r(t[i]),n(t[i]),(function(e,t){o.writeSplitVarint64(e>>>0,t>>>0)}));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var n=jspb.arith.Int64.fromString(t[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var n=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t[r]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var r=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeEnum(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeVarintHash64(t[r]);this.endDelimited_(e)}},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var n=this.map_[t[e]];(r=n.valueWrapper)&&r.toArray(),this.arr_.push([n.key,n.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),n=[],o=0;o<r.length;o++){var i=this.map_[r[o][0].toString()];this.wrapEntry_(i);var a=i.valueWrapper;a?(jspb.asserts.assert(t),n.push([i.key,t(e,a)])):n.push([i.key,i.value])}return n},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var n=0;n<e.length;n++){var o=e[n][0],i=r(e[n][1]);t.set(o,i)}return t},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,n.value])}return e},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,this.wrapEntry_(n)])}return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var n=0;n<r.length;n++){var o=this.map_[r[n]];e.call(t,this.wrapEntry_(o),o.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);return this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t,this.map_[e.toString()]=r,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(e){return e.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(e,t,r,n,o){var i=this.stringKeys_();i.sort();for(var a=0;a<i.length;a++){var s=this.map_[i[a]];t.beginSubMessage(e),r.call(t,1,s.key),this.valueCtor_?n.call(t,2,this.wrapEntry_(s),o):n.call(t,2,s.value),t.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(e,t,r,n,o,i,a){for(;t.nextField()&&!t.isEndGroup();){var s=t.getFieldNumber();1==s?i=r.call(t):2==s&&(e.valueCtor_?(jspb.asserts.assert(o),a||(a=new e.valueCtor_),n.call(t,a,o)):a=n.call(t))}jspb.asserts.assert(null!=i),jspb.asserts.assert(null!=a),e.set(i,a)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,r,n,o){this.fieldIndex=e,this.fieldName=t,this.ctor=r,this.toObjectFn=n,this.isRepeated=o},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(e,t,r,n,o,i){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=r,this.binaryMessageSerializeFn=n,this.binaryMessageDeserializeFn=o,this.isPacked=i},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,r,n,o,i){if(e.wrappers_=null,t||(t=r?[r]:[]),e.messageId_=r?String(r):void 0,e.arrayIndexOffset_=0===r?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,n),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=o),o)for(t=0;t<o.length;t++)(r=o[t])<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(i&&i.length)for(t=0;t<i.length;t++)jspb.Message.computeOneofCase(e,i[t])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:Array.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var r=e.array.length,n=-1;if(r&&(n=r-1,r=e.array[n],jspb.Message.isExtensionObject_(r)))return e.pivot_=jspb.Message.getFieldNumber_(e,n),void(e.extensionObject_=r);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,n+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,r){for(var n=[],o=0;o<e.length;o++)n[o]=t.call(e[o],r,e[o]);return n},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(e,t,r,n,o){for(var i in r){var a=r[i],s=n.call(e,a);if(null!=s){for(var l in a.fieldName)if(a.fieldName.hasOwnProperty(l))break;t[l]=a.toObjectFn?a.isRepeated?jspb.Message.toObjectList(s,a.toObjectFn,o):a.toObjectFn(o,s):s}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(e,t,r,n){for(var o in r){var i=r[o],a=i.fieldInfo;if(!i.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var s=n.call(e,a);if(null!=s)if(a.isMessageType()){if(!i.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");i.binaryWriterFn.call(t,a.fieldIndex,s,i.binaryMessageSerializeFn)}else i.binaryWriterFn.call(t,a.fieldIndex,s)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(e,t,r,n,o){var i=r[t.getFieldNumber()];if(i){if(r=i.fieldInfo,!i.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var a=new r.ctor;i.binaryReaderFn.call(t,a,i.binaryMessageDeserializeFn)}else a=i.binaryReaderFn.call(t);r.isRepeated&&!i.isPacked?(t=n.call(e,r))?t.push(a):o.call(e,r,[a]):o.call(e,r,a)}else t.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var r=e.array[t];return r===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:r}if(e.extensionObject_)return(r=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:r},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var n=0;n<r.length;n++)r[n]=+r[n];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var n=0;n<r.length;n++)r[n]=!!r[n];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(e){return null==e||"string"==typeof e?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?goog.crypt.base64.decodeStringToUint8Array(e):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),e.length&&"string"!=typeof e[0]?goog.array.map(e,jspb.Message.bytesAsB64):e},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getBooleanField(e,t))?r:e},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(e,t,r,n){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var o=jspb.Message.getField(e,t);if(!o){if(r)return;o=[],jspb.Message.setField(e,t,o)}return e.wrappers_[t]=new jspb.Map(o,n)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(e,t,r){return jspb.asserts.assertInstanceof(e,jspb.Message),t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r),e},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(e,t,r,n){return jspb.asserts.assertInstanceof(e,jspb.Message),r!==n?jspb.Message.setField(e,t,r):t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(e),delete e.extensionObject_[t]),e},jspb.Message.addToRepeatedField=function(e,t,r,n){return jspb.asserts.assertInstanceof(e,jspb.Message),t=jspb.Message.getRepeatedField(e,t),null!=n?t.splice(n,0,r):t.push(r),e},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(e,t,r,n){return jspb.asserts.assertInstanceof(e,jspb.Message),(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==n&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0)),jspb.Message.setField(e,t,n)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(e,t){for(var r,n,o=0;o<t.length;o++){var i=t[o],a=jspb.Message.getField(e,i);null!=a&&(r=i,n=a,jspb.Message.setField(e,i,void 0))}return r?(jspb.Message.setField(e,r,n),r):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(e,t,r,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){var o=jspb.Message.getField(e,r);(n||o)&&(e.wrappers_[r]=new t(o))}return e.wrappers_[r]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(e,t,r){return jspb.Message.wrapRepeatedField_(e,t,r),(t=e.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]),t},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(e,t,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){for(var n=jspb.Message.getRepeatedField(e,r),o=[],i=0;i<n.length;i++)o[i]=new t(n[i]);e.wrappers_[r]=o}},jspb.Message.setWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var n=r?r.toArray():r;return e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(e,t,r,n){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var o=n?n.toArray():n;return e.wrappers_[t]=n,jspb.Message.setOneofField(e,t,r,o)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={}),r=r||[];for(var n=[],o=0;o<r.length;o++)n[o]=r[o].toArray();return e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(e,t,r,n,o){jspb.Message.wrapRepeatedField_(e,n,t);var i=e.wrappers_[t];return i||(i=e.wrappers_[t]=[]),r=r||new n,e=jspb.Message.getRepeatedField(e,t),null!=o?(i.splice(o,0,r),e.splice(o,0,r.toArray())):(i.push(r),e.push(r.toArray())),r},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(e,t,r,n){for(var o={},i=0;i<e.length;i++)o[t.call(e[i])]=r?r.call(e[i],n,e[i]):e[i];return o},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray();t=t.toArray();var n=[],o=0,i=r.length>t.length?r.length:t.length;for(e.getJsPbMessageId()&&(n[0]=e.getJsPbMessageId(),o=1);o<i;o++)jspb.Message.compareFields(r[o],t[o])||(n[o]=t[o]);return new e.constructor(n)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var r,n={};for(r in e)n[r]=0;for(r in t)n[r]=0;for(r in n)if(!jspb.Message.compareFields(e[r],t[r]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){var n=void 0,o=void 0,i=Math.max(e.length,t.length);for(r=0;r<i;r++){var a=e[r],s=t[r];if(a&&a.constructor==Object&&(jspb.asserts.assert(void 0===n),jspb.asserts.assert(r===e.length-1),n=a,a=void 0),s&&s.constructor==Object&&(jspb.asserts.assert(void 0===o),jspb.asserts.assert(r===t.length-1),o=s,s=void 0),!jspb.Message.compareFields(a,s))return!1}return!n&&!o||(n=n||{},o=o||{},jspb.Message.compareExtensions(n,o))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assertInstanceof(t,jspb.Message),jspb.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var r=t.toArray(),n=e.toArray(),o=r.length=0;o<n.length;o++)r[o]=n[o];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(e){if(Array.isArray(e)){for(var t=Array(e.length),r=0;r<e.length;r++){var n=e[r];null!=n&&(t[r]="object"==typeof n?jspb.Message.clone_(jspb.asserts.assert(n)):n)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(r in t={},e)null!=(n=e[r])&&(t[r]="object"==typeof n?jspb.Message.clone_(jspb.asserts.assert(n)):n);return t},jspb.Message.registerMessageType=function(e,t){t.messageId=e},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf),function(e){e[e.PROMPT=0]="PROMPT",e[e.PROCESS=1]="PROCESS",e[e.CONDITIONAL=2]="CONDITIONAL",e[e.COMMAND=3]="COMMAND"}(NodeTypes||(NodeTypes={})),function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Replace=2]="Replace",e[e.Delete=3]="Delete",e[e.Get=4]="Get",e[e.Execute=5]="Execute",e[e.Validate=6]="Validate",e[e.Acknowledge=7]="Acknowledge",e[e.Initiate=8]="Initiate",e[e.Authorized=9]="Authorized",e[e.RequestAll=10]="RequestAll",e[e.Error=11]="Error"}(VerbTypes||(VerbTypes={})),function(e){e[e.LogInfo=0]="LogInfo",e[e.LogWarning=1]="LogWarning",e[e.LogError=2]="LogError"}(LogMessageTypes||(LogMessageTypes={}));class GraphNodeInfo extends googleProtobuf.Message{constructor(e){super(),_GraphNodeInfo_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_GraphNodeInfo_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("id"in e&&null!=e.id&&(this.id=e.id),"name"in e&&null!=e.name&&(this.name=e.name),"description"in e&&null!=e.description&&(this.description=e.description))}get id(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set id(e){googleProtobuf.Message.setField(this,1,e)}get name(){return googleProtobuf.Message.getFieldWithDefault(this,2,"")}set name(e){googleProtobuf.Message.setField(this,2,e)}get description(){return googleProtobuf.Message.getFieldWithDefault(this,3,"")}set description(e){googleProtobuf.Message.setField(this,3,e)}static fromObject(e){const t=new GraphNodeInfo({});return null!=e.id&&(t.id=e.id),null!=e.name&&(t.name=e.name),null!=e.description&&(t.description=e.description),t}toObject(){const e={};return null!=this.id&&(e.id=this.id),null!=this.name&&(e.name=this.name),null!=this.description&&(e.description=this.description),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.id.length&&t.writeString(1,this.id),this.name.length&&t.writeString(2,this.name),this.description.length&&t.writeString(3,this.description),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new GraphNodeInfo;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.id=t.readString();break;case 2:r.name=t.readString();break;case 3:r.description=t.readString();break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return GraphNodeInfo.deserialize(e)}}_GraphNodeInfo_one_of_decls=new WeakMap;class Edge extends googleProtobuf.Message{constructor(e){super(),_Edge_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_Edge_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("source"in e&&null!=e.source&&(this.source=e.source),"target"in e&&null!=e.target&&(this.target=e.target))}get source(){return googleProtobuf.Message.getWrapperField(this,GraphNodeInfo,1)}set source(e){googleProtobuf.Message.setWrapperField(this,1,e)}get has_source(){return null!=googleProtobuf.Message.getField(this,1)}get target(){return googleProtobuf.Message.getWrapperField(this,GraphNodeInfo,2)}set target(e){googleProtobuf.Message.setWrapperField(this,2,e)}get has_target(){return null!=googleProtobuf.Message.getField(this,2)}static fromObject(e){const t=new Edge({});return null!=e.source&&(t.source=GraphNodeInfo.fromObject(e.source)),null!=e.target&&(t.target=GraphNodeInfo.fromObject(e.target)),t}toObject(){const e={};return null!=this.source&&(e.source=this.source.toObject()),null!=this.target&&(e.target=this.target.toObject()),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.has_source&&t.writeMessage(1,this.source,(()=>this.source.serialize(t))),this.has_target&&t.writeMessage(2,this.target,(()=>this.target.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Edge;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.source,(()=>r.source=GraphNodeInfo.deserialize(t)));break;case 2:t.readMessage(r.target,(()=>r.target=GraphNodeInfo.deserialize(t)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Edge.deserialize(e)}}_Edge_one_of_decls=new WeakMap;class Prompt extends googleProtobuf.Message{constructor(e){super(),_Prompt_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_Prompt_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("prompt"in e&&null!=e.prompt&&(this.prompt=e.prompt),"system"in e&&null!=e.system&&(this.system=e.system))}get prompt(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set prompt(e){googleProtobuf.Message.setField(this,1,e)}get system(){return googleProtobuf.Message.getFieldWithDefault(this,2,"")}set system(e){googleProtobuf.Message.setField(this,2,e)}static fromObject(e){const t=new Prompt({});return null!=e.prompt&&(t.prompt=e.prompt),null!=e.system&&(t.system=e.system),t}toObject(){const e={};return null!=this.prompt&&(e.prompt=this.prompt),null!=this.system&&(e.system=this.system),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.prompt.length&&t.writeString(1,this.prompt),this.system.length&&t.writeString(2,this.system),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Prompt;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.prompt=t.readString();break;case 2:r.system=t.readString();break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Prompt.deserialize(e)}}_Prompt_one_of_decls=new WeakMap;class Command extends googleProtobuf.Message{constructor(e){super(),_Command_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_Command_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||"command"in e&&null!=e.command&&(this.command=e.command)}get command(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set command(e){googleProtobuf.Message.setField(this,1,e)}static fromObject(e){const t=new Command({});return null!=e.command&&(t.command=e.command),t}toObject(){const e={};return null!=this.command&&(e.command=this.command),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.command.length&&t.writeString(1,this.command),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Command;for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber())r.command=t.readString();else t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Command.deserialize(e)}}_Command_one_of_decls=new WeakMap;class Conditional extends googleProtobuf.Message{constructor(e){super(),_Conditional_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[2],__classPrivateFieldGet(this,_Conditional_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("statement"in e&&null!=e.statement&&(this.statement=e.statement),"options"in e&&null!=e.options&&(this.options=e.options))}get statement(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set statement(e){googleProtobuf.Message.setField(this,1,e)}get options(){return googleProtobuf.Message.getRepeatedWrapperField(this,Node,2)}set options(e){googleProtobuf.Message.setRepeatedWrapperField(this,2,e)}static fromObject(e){const t=new Conditional({});return null!=e.statement&&(t.statement=e.statement),null!=e.options&&(t.options=e.options.map((e=>Node.fromObject(e)))),t}toObject(){const e={};return null!=this.statement&&(e.statement=this.statement),null!=this.options&&(e.options=this.options.map((e=>e.toObject()))),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.statement.length&&t.writeString(1,this.statement),this.options.length&&t.writeRepeatedMessage(2,this.options,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Conditional;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.statement=t.readString();break;case 2:t.readMessage(r.options,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,2,Node.deserialize(t),Node)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Conditional.deserialize(e)}}_Conditional_one_of_decls=new WeakMap;class Graph$3 extends googleProtobuf.Message{constructor(e){super(),_Graph_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[1,2],__classPrivateFieldGet(this,_Graph_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("nodes_info"in e&&null!=e.nodes_info&&(this.nodes_info=e.nodes_info),"edges"in e&&null!=e.edges&&(this.edges=e.edges))}get nodes_info(){return googleProtobuf.Message.getRepeatedWrapperField(this,GraphNodeInfo,1)}set nodes_info(e){googleProtobuf.Message.setRepeatedWrapperField(this,1,e)}get edges(){return googleProtobuf.Message.getRepeatedWrapperField(this,Edge,2)}set edges(e){googleProtobuf.Message.setRepeatedWrapperField(this,2,e)}static fromObject(e){const t=new Graph$3({});return null!=e.nodes_info&&(t.nodes_info=e.nodes_info.map((e=>GraphNodeInfo.fromObject(e)))),null!=e.edges&&(t.edges=e.edges.map((e=>Edge.fromObject(e)))),t}toObject(){const e={};return null!=this.nodes_info&&(e.nodes_info=this.nodes_info.map((e=>e.toObject()))),null!=this.edges&&(e.edges=this.edges.map((e=>e.toObject()))),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.nodes_info.length&&t.writeRepeatedMessage(1,this.nodes_info,(e=>e.serialize(t))),this.edges.length&&t.writeRepeatedMessage(2,this.edges,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Graph$3;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.nodes_info,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,1,GraphNodeInfo.deserialize(t),GraphNodeInfo)));break;case 2:t.readMessage(r.edges,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,2,Edge.deserialize(t),Edge)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Graph$3.deserialize(e)}}_Graph_one_of_decls=new WeakMap;class Process extends googleProtobuf.Message{constructor(e){super(),_Process_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[2,3],__classPrivateFieldGet(this,_Process_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("graph"in e&&null!=e.graph&&(this.graph=e.graph),"topological_order"in e&&null!=e.topological_order&&(this.topological_order=e.topological_order),"nodes"in e&&null!=e.nodes&&(this.nodes=e.nodes))}get graph(){return googleProtobuf.Message.getWrapperField(this,Graph$3,1)}set graph(e){googleProtobuf.Message.setWrapperField(this,1,e)}get has_graph(){return null!=googleProtobuf.Message.getField(this,1)}get topological_order(){return googleProtobuf.Message.getRepeatedWrapperField(this,GraphNodeInfo,2)}set topological_order(e){googleProtobuf.Message.setRepeatedWrapperField(this,2,e)}get nodes(){return googleProtobuf.Message.getRepeatedWrapperField(this,Node,3)}set nodes(e){googleProtobuf.Message.setRepeatedWrapperField(this,3,e)}static fromObject(e){const t=new Process({});return null!=e.graph&&(t.graph=Graph$3.fromObject(e.graph)),null!=e.topological_order&&(t.topological_order=e.topological_order.map((e=>GraphNodeInfo.fromObject(e)))),null!=e.nodes&&(t.nodes=e.nodes.map((e=>Node.fromObject(e)))),t}toObject(){const e={};return null!=this.graph&&(e.graph=this.graph.toObject()),null!=this.topological_order&&(e.topological_order=this.topological_order.map((e=>e.toObject()))),null!=this.nodes&&(e.nodes=this.nodes.map((e=>e.toObject()))),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.has_graph&&t.writeMessage(1,this.graph,(()=>this.graph.serialize(t))),this.topological_order.length&&t.writeRepeatedMessage(2,this.topological_order,(e=>e.serialize(t))),this.nodes.length&&t.writeRepeatedMessage(3,this.nodes,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Process;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.graph,(()=>r.graph=Graph$3.deserialize(t)));break;case 2:t.readMessage(r.topological_order,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,2,GraphNodeInfo.deserialize(t),GraphNodeInfo)));break;case 3:t.readMessage(r.nodes,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,3,Node.deserialize(t),Node)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Process.deserialize(e)}}_Process_one_of_decls=new WeakMap;class NodeContent extends googleProtobuf.Message{constructor(e){super(),_NodeContent_one_of_decls.set(this,[[1,2,3,4]]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_NodeContent_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("prompt"in e&&null!=e.prompt&&(this.prompt=e.prompt),"process"in e&&null!=e.process&&(this.process=e.process),"conditional"in e&&null!=e.conditional&&(this.conditional=e.conditional),"command"in e&&null!=e.command&&(this.command=e.command))}get prompt(){return googleProtobuf.Message.getWrapperField(this,Prompt,1)}set prompt(e){googleProtobuf.Message.setOneofWrapperField(this,1,__classPrivateFieldGet(this,_NodeContent_one_of_decls,"f")[0],e)}get has_prompt(){return null!=googleProtobuf.Message.getField(this,1)}get process(){return googleProtobuf.Message.getWrapperField(this,Process,2)}set process(e){googleProtobuf.Message.setOneofWrapperField(this,2,__classPrivateFieldGet(this,_NodeContent_one_of_decls,"f")[0],e)}get has_process(){return null!=googleProtobuf.Message.getField(this,2)}get conditional(){return googleProtobuf.Message.getWrapperField(this,Conditional,3)}set conditional(e){googleProtobuf.Message.setOneofWrapperField(this,3,__classPrivateFieldGet(this,_NodeContent_one_of_decls,"f")[0],e)}get has_conditional(){return null!=googleProtobuf.Message.getField(this,3)}get command(){return googleProtobuf.Message.getWrapperField(this,Command,4)}set command(e){googleProtobuf.Message.setOneofWrapperField(this,4,__classPrivateFieldGet(this,_NodeContent_one_of_decls,"f")[0],e)}get has_command(){return null!=googleProtobuf.Message.getField(this,4)}get node_content(){return{0:"none",1:"prompt",2:"process",3:"conditional",4:"command"}[googleProtobuf.Message.computeOneofCase(this,[1,2,3,4])]}static fromObject(e){const t=new NodeContent({});return null!=e.prompt&&(t.prompt=Prompt.fromObject(e.prompt)),null!=e.process&&(t.process=Process.fromObject(e.process)),null!=e.conditional&&(t.conditional=Conditional.fromObject(e.conditional)),null!=e.command&&(t.command=Command.fromObject(e.command)),t}toObject(){const e={};return null!=this.prompt&&(e.prompt=this.prompt.toObject()),null!=this.process&&(e.process=this.process.toObject()),null!=this.conditional&&(e.conditional=this.conditional.toObject()),null!=this.command&&(e.command=this.command.toObject()),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.has_prompt&&t.writeMessage(1,this.prompt,(()=>this.prompt.serialize(t))),this.has_process&&t.writeMessage(2,this.process,(()=>this.process.serialize(t))),this.has_conditional&&t.writeMessage(3,this.conditional,(()=>this.conditional.serialize(t))),this.has_command&&t.writeMessage(4,this.command,(()=>this.command.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new NodeContent;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.prompt,(()=>r.prompt=Prompt.deserialize(t)));break;case 2:t.readMessage(r.process,(()=>r.process=Process.deserialize(t)));break;case 3:t.readMessage(r.conditional,(()=>r.conditional=Conditional.deserialize(t)));break;case 4:t.readMessage(r.command,(()=>r.command=Command.deserialize(t)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return NodeContent.deserialize(e)}}_NodeContent_one_of_decls=new WeakMap;class Node extends googleProtobuf.Message{constructor(e){super(),_Node_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[2,3],__classPrivateFieldGet(this,_Node_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("node_info"in e&&null!=e.node_info&&(this.node_info=e.node_info),"input_variables"in e&&null!=e.input_variables&&(this.input_variables=e.input_variables),"output_variables"in e&&null!=e.output_variables&&(this.output_variables=e.output_variables),"node_type"in e&&null!=e.node_type&&(this.node_type=e.node_type),"node_content"in e&&null!=e.node_content&&(this.node_content=e.node_content))}get node_info(){return googleProtobuf.Message.getWrapperField(this,GraphNodeInfo,1)}set node_info(e){googleProtobuf.Message.setWrapperField(this,1,e)}get has_node_info(){return null!=googleProtobuf.Message.getField(this,1)}get input_variables(){return googleProtobuf.Message.getFieldWithDefault(this,2,[])}set input_variables(e){googleProtobuf.Message.setField(this,2,e)}get output_variables(){return googleProtobuf.Message.getFieldWithDefault(this,3,[])}set output_variables(e){googleProtobuf.Message.setField(this,3,e)}get node_type(){return googleProtobuf.Message.getFieldWithDefault(this,4,NodeTypes.PROMPT)}set node_type(e){googleProtobuf.Message.setField(this,4,e)}get node_content(){return googleProtobuf.Message.getWrapperField(this,NodeContent,5)}set node_content(e){googleProtobuf.Message.setWrapperField(this,5,e)}get has_node_content(){return null!=googleProtobuf.Message.getField(this,5)}static fromObject(e){const t=new Node({});return null!=e.node_info&&(t.node_info=GraphNodeInfo.fromObject(e.node_info)),null!=e.input_variables&&(t.input_variables=e.input_variables),null!=e.output_variables&&(t.output_variables=e.output_variables),null!=e.node_type&&(t.node_type=e.node_type),null!=e.node_content&&(t.node_content=NodeContent.fromObject(e.node_content)),t}toObject(){const e={};return null!=this.node_info&&(e.node_info=this.node_info.toObject()),null!=this.input_variables&&(e.input_variables=this.input_variables),null!=this.output_variables&&(e.output_variables=this.output_variables),null!=this.node_type&&(e.node_type=this.node_type),null!=this.node_content&&(e.node_content=this.node_content.toObject()),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.has_node_info&&t.writeMessage(1,this.node_info,(()=>this.node_info.serialize(t))),this.input_variables.length&&t.writeRepeatedString(2,this.input_variables),this.output_variables.length&&t.writeRepeatedString(3,this.output_variables),this.node_type!=NodeTypes.PROMPT&&t.writeEnum(4,this.node_type),this.has_node_content&&t.writeMessage(5,this.node_content,(()=>this.node_content.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Node;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.node_info,(()=>r.node_info=GraphNodeInfo.deserialize(t)));break;case 2:googleProtobuf.Message.addToRepeatedField(r,2,t.readString());break;case 3:googleProtobuf.Message.addToRepeatedField(r,3,t.readString());break;case 4:r.node_type=t.readEnum();break;case 5:t.readMessage(r.node_content,(()=>r.node_content=NodeContent.deserialize(t)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Node.deserialize(e)}}_Node_one_of_decls=new WeakMap;class Identity extends googleProtobuf.Message{constructor(e){super(),_Identity_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_Identity_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("id"in e&&null!=e.id&&(this.id=e.id),"ip_address"in e&&null!=e.ip_address&&(this.ip_address=e.ip_address))}get id(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set id(e){googleProtobuf.Message.setField(this,1,e)}get ip_address(){return googleProtobuf.Message.getFieldWithDefault(this,2,"")}set ip_address(e){googleProtobuf.Message.setField(this,2,e)}static fromObject(e){const t=new Identity({});return null!=e.id&&(t.id=e.id),null!=e.ip_address&&(t.ip_address=e.ip_address),t}toObject(){const e={};return null!=this.id&&(e.id=this.id),null!=this.ip_address&&(e.ip_address=this.ip_address),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.id.length&&t.writeString(1,this.id),this.ip_address.length&&t.writeString(2,this.ip_address),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Identity;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.id=t.readString();break;case 2:r.ip_address=t.readString();break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Identity.deserialize(e)}}_Identity_one_of_decls=new WeakMap;class Execution extends googleProtobuf.Message{constructor(e){super(),_Execution_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_Execution_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("current_node"in e&&null!=e.current_node&&(this.current_node=e.current_node),"process"in e&&null!=e.process&&(this.process=e.process),"current_variable_definitions"in e&&null!=e.current_variable_definitions&&(this.current_variable_definitions=e.current_variable_definitions),"execution_id"in e&&null!=e.execution_id&&(this.execution_id=e.execution_id),"node_execution_response"in e&&null!=e.node_execution_response&&(this.node_execution_response=e.node_execution_response)),this.current_variable_definitions||(this.current_variable_definitions=new Map),this.node_execution_response||(this.node_execution_response=new Map)}get current_node(){return googleProtobuf.Message.getWrapperField(this,GraphNodeInfo,1)}set current_node(e){googleProtobuf.Message.setWrapperField(this,1,e)}get has_current_node(){return null!=googleProtobuf.Message.getField(this,1)}get process(){return googleProtobuf.Message.getWrapperField(this,Process,2)}set process(e){googleProtobuf.Message.setWrapperField(this,2,e)}get has_process(){return null!=googleProtobuf.Message.getField(this,2)}get current_variable_definitions(){return googleProtobuf.Message.getField(this,3)}set current_variable_definitions(e){googleProtobuf.Message.setField(this,3,e)}get execution_id(){return googleProtobuf.Message.getFieldWithDefault(this,4,"")}set execution_id(e){googleProtobuf.Message.setField(this,4,e)}get node_execution_response(){return googleProtobuf.Message.getField(this,5)}set node_execution_response(e){googleProtobuf.Message.setField(this,5,e)}static fromObject(e){const t=new Execution({});return null!=e.current_node&&(t.current_node=GraphNodeInfo.fromObject(e.current_node)),null!=e.process&&(t.process=Process.fromObject(e.process)),"object"==typeof e.current_variable_definitions&&(t.current_variable_definitions=new Map(Object.entries(e.current_variable_definitions))),null!=e.execution_id&&(t.execution_id=e.execution_id),"object"==typeof e.node_execution_response&&(t.node_execution_response=new Map(Object.entries(e.node_execution_response))),t}toObject(){const e={};return null!=this.current_node&&(e.current_node=this.current_node.toObject()),null!=this.process&&(e.process=this.process.toObject()),null!=this.current_variable_definitions&&(e.current_variable_definitions=Object.fromEntries(this.current_variable_definitions)),null!=this.execution_id&&(e.execution_id=this.execution_id),null!=this.node_execution_response&&(e.node_execution_response=Object.fromEntries(this.node_execution_response)),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;this.has_current_node&&t.writeMessage(1,this.current_node,(()=>this.current_node.serialize(t))),this.has_process&&t.writeMessage(2,this.process,(()=>this.process.serialize(t)));for(const[e,r]of this.current_variable_definitions)t.writeMessage(3,this.current_variable_definitions,(()=>{t.writeString(1,e),t.writeString(2,r)}));this.execution_id.length&&t.writeString(4,this.execution_id);for(const[e,r]of this.node_execution_response)t.writeMessage(5,this.node_execution_response,(()=>{t.writeString(1,e),t.writeString(2,r)}));if(!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Execution;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.current_node,(()=>r.current_node=GraphNodeInfo.deserialize(t)));break;case 2:t.readMessage(r.process,(()=>r.process=Process.deserialize(t)));break;case 3:t.readMessage(r,(()=>googleProtobuf.Map.deserializeBinary(r.current_variable_definitions,t,t.readString,t.readString)));break;case 4:r.execution_id=t.readString();break;case 5:t.readMessage(r,(()=>googleProtobuf.Map.deserializeBinary(r.node_execution_response,t,t.readString,t.readString)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Execution.deserialize(e)}}_Execution_one_of_decls=new WeakMap;class SystemState extends googleProtobuf.Message{constructor(e){super(),_SystemState_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[4,5,6,7,9,10,13],__classPrivateFieldGet(this,_SystemState_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("authenticated"in e&&null!=e.authenticated&&(this.authenticated=e.authenticated),"websocket_ready"in e&&null!=e.websocket_ready&&(this.websocket_ready=e.websocket_ready),"graph"in e&&null!=e.graph&&(this.graph=e.graph),"local_nodes"in e&&null!=e.local_nodes&&(this.local_nodes=e.local_nodes),"selected_nodes"in e&&null!=e.selected_nodes&&(this.selected_nodes=e.selected_nodes),"selected_edges"in e&&null!=e.selected_edges&&(this.selected_edges=e.selected_edges),"execution_steps"in e&&null!=e.execution_steps&&(this.execution_steps=e.execution_steps),"selected_process"in e&&null!=e.selected_process&&(this.selected_process=e.selected_process),"backend_identities"in e&&null!=e.backend_identities&&(this.backend_identities=e.backend_identities),"peer_identities"in e&&null!=e.peer_identities&&(this.peer_identities=e.peer_identities),"primary_backend"in e&&null!=e.primary_backend&&(this.primary_backend=e.primary_backend),"client_identity"in e&&null!=e.client_identity&&(this.client_identity=e.client_identity),"message_log"in e&&null!=e.message_log&&(this.message_log=e.message_log))}get authenticated(){return googleProtobuf.Message.getFieldWithDefault(this,1,!1)}set authenticated(e){googleProtobuf.Message.setField(this,1,e)}get websocket_ready(){return googleProtobuf.Message.getFieldWithDefault(this,2,!1)}set websocket_ready(e){googleProtobuf.Message.setField(this,2,e)}get graph(){return googleProtobuf.Message.getWrapperField(this,Graph$3,3)}set graph(e){googleProtobuf.Message.setWrapperField(this,3,e)}get has_graph(){return null!=googleProtobuf.Message.getField(this,3)}get local_nodes(){return googleProtobuf.Message.getRepeatedWrapperField(this,Node,4)}set local_nodes(e){googleProtobuf.Message.setRepeatedWrapperField(this,4,e)}get selected_nodes(){return googleProtobuf.Message.getRepeatedWrapperField(this,GraphNodeInfo,5)}set selected_nodes(e){googleProtobuf.Message.setRepeatedWrapperField(this,5,e)}get selected_edges(){return googleProtobuf.Message.getRepeatedWrapperField(this,Edge,6)}set selected_edges(e){googleProtobuf.Message.setRepeatedWrapperField(this,6,e)}get execution_steps(){return googleProtobuf.Message.getRepeatedWrapperField(this,Execution,7)}set execution_steps(e){googleProtobuf.Message.setRepeatedWrapperField(this,7,e)}get selected_process(){return googleProtobuf.Message.getWrapperField(this,Node,8)}set selected_process(e){googleProtobuf.Message.setWrapperField(this,8,e)}get has_selected_process(){return null!=googleProtobuf.Message.getField(this,8)}get backend_identities(){return googleProtobuf.Message.getRepeatedWrapperField(this,Identity,9)}set backend_identities(e){googleProtobuf.Message.setRepeatedWrapperField(this,9,e)}get peer_identities(){return googleProtobuf.Message.getRepeatedWrapperField(this,Identity,10)}set peer_identities(e){googleProtobuf.Message.setRepeatedWrapperField(this,10,e)}get primary_backend(){return googleProtobuf.Message.getWrapperField(this,Identity,11)}set primary_backend(e){googleProtobuf.Message.setWrapperField(this,11,e)}get has_primary_backend(){return null!=googleProtobuf.Message.getField(this,11)}get client_identity(){return googleProtobuf.Message.getWrapperField(this,Identity,12)}set client_identity(e){googleProtobuf.Message.setWrapperField(this,12,e)}get has_client_identity(){return null!=googleProtobuf.Message.getField(this,12)}get message_log(){return googleProtobuf.Message.getRepeatedWrapperField(this,Envelope,13)}set message_log(e){googleProtobuf.Message.setRepeatedWrapperField(this,13,e)}static fromObject(e){const t=new SystemState({});return null!=e.authenticated&&(t.authenticated=e.authenticated),null!=e.websocket_ready&&(t.websocket_ready=e.websocket_ready),null!=e.graph&&(t.graph=Graph$3.fromObject(e.graph)),null!=e.local_nodes&&(t.local_nodes=e.local_nodes.map((e=>Node.fromObject(e)))),null!=e.selected_nodes&&(t.selected_nodes=e.selected_nodes.map((e=>GraphNodeInfo.fromObject(e)))),null!=e.selected_edges&&(t.selected_edges=e.selected_edges.map((e=>Edge.fromObject(e)))),null!=e.execution_steps&&(t.execution_steps=e.execution_steps.map((e=>Execution.fromObject(e)))),null!=e.selected_process&&(t.selected_process=Node.fromObject(e.selected_process)),null!=e.backend_identities&&(t.backend_identities=e.backend_identities.map((e=>Identity.fromObject(e)))),null!=e.peer_identities&&(t.peer_identities=e.peer_identities.map((e=>Identity.fromObject(e)))),null!=e.primary_backend&&(t.primary_backend=Identity.fromObject(e.primary_backend)),null!=e.client_identity&&(t.client_identity=Identity.fromObject(e.client_identity)),null!=e.message_log&&(t.message_log=e.message_log.map((e=>Envelope.fromObject(e)))),t}toObject(){const e={};return null!=this.authenticated&&(e.authenticated=this.authenticated),null!=this.websocket_ready&&(e.websocket_ready=this.websocket_ready),null!=this.graph&&(e.graph=this.graph.toObject()),null!=this.local_nodes&&(e.local_nodes=this.local_nodes.map((e=>e.toObject()))),null!=this.selected_nodes&&(e.selected_nodes=this.selected_nodes.map((e=>e.toObject()))),null!=this.selected_edges&&(e.selected_edges=this.selected_edges.map((e=>e.toObject()))),null!=this.execution_steps&&(e.execution_steps=this.execution_steps.map((e=>e.toObject()))),null!=this.selected_process&&(e.selected_process=this.selected_process.toObject()),null!=this.backend_identities&&(e.backend_identities=this.backend_identities.map((e=>e.toObject()))),null!=this.peer_identities&&(e.peer_identities=this.peer_identities.map((e=>e.toObject()))),null!=this.primary_backend&&(e.primary_backend=this.primary_backend.toObject()),null!=this.client_identity&&(e.client_identity=this.client_identity.toObject()),null!=this.message_log&&(e.message_log=this.message_log.map((e=>e.toObject()))),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(0!=this.authenticated&&t.writeBool(1,this.authenticated),0!=this.websocket_ready&&t.writeBool(2,this.websocket_ready),this.has_graph&&t.writeMessage(3,this.graph,(()=>this.graph.serialize(t))),this.local_nodes.length&&t.writeRepeatedMessage(4,this.local_nodes,(e=>e.serialize(t))),this.selected_nodes.length&&t.writeRepeatedMessage(5,this.selected_nodes,(e=>e.serialize(t))),this.selected_edges.length&&t.writeRepeatedMessage(6,this.selected_edges,(e=>e.serialize(t))),this.execution_steps.length&&t.writeRepeatedMessage(7,this.execution_steps,(e=>e.serialize(t))),this.has_selected_process&&t.writeMessage(8,this.selected_process,(()=>this.selected_process.serialize(t))),this.backend_identities.length&&t.writeRepeatedMessage(9,this.backend_identities,(e=>e.serialize(t))),this.peer_identities.length&&t.writeRepeatedMessage(10,this.peer_identities,(e=>e.serialize(t))),this.has_primary_backend&&t.writeMessage(11,this.primary_backend,(()=>this.primary_backend.serialize(t))),this.has_client_identity&&t.writeMessage(12,this.client_identity,(()=>this.client_identity.serialize(t))),this.message_log.length&&t.writeRepeatedMessage(13,this.message_log,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new SystemState;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.authenticated=t.readBool();break;case 2:r.websocket_ready=t.readBool();break;case 3:t.readMessage(r.graph,(()=>r.graph=Graph$3.deserialize(t)));break;case 4:t.readMessage(r.local_nodes,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,4,Node.deserialize(t),Node)));break;case 5:t.readMessage(r.selected_nodes,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,5,GraphNodeInfo.deserialize(t),GraphNodeInfo)));break;case 6:t.readMessage(r.selected_edges,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,6,Edge.deserialize(t),Edge)));break;case 7:t.readMessage(r.execution_steps,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,7,Execution.deserialize(t),Execution)));break;case 8:t.readMessage(r.selected_process,(()=>r.selected_process=Node.deserialize(t)));break;case 9:t.readMessage(r.backend_identities,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,9,Identity.deserialize(t),Identity)));break;case 10:t.readMessage(r.peer_identities,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,10,Identity.deserialize(t),Identity)));break;case 11:t.readMessage(r.primary_backend,(()=>r.primary_backend=Identity.deserialize(t)));break;case 12:t.readMessage(r.client_identity,(()=>r.client_identity=Identity.deserialize(t)));break;case 13:t.readMessage(r.message_log,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,13,Envelope.deserialize(t),Envelope)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return SystemState.deserialize(e)}}_SystemState_one_of_decls=new WeakMap;class AuthenticationMessage extends googleProtobuf.Message{constructor(e){super(),_AuthenticationMessage_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_AuthenticationMessage_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("client_email"in e&&null!=e.client_email&&(this.client_email=e.client_email),"client_password"in e&&null!=e.client_password&&(this.client_password=e.client_password))}get client_email(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set client_email(e){googleProtobuf.Message.setField(this,1,e)}get client_password(){return googleProtobuf.Message.getFieldWithDefault(this,2,"")}set client_password(e){googleProtobuf.Message.setField(this,2,e)}static fromObject(e){const t=new AuthenticationMessage({});return null!=e.client_email&&(t.client_email=e.client_email),null!=e.client_password&&(t.client_password=e.client_password),t}toObject(){const e={};return null!=this.client_email&&(e.client_email=this.client_email),null!=this.client_password&&(e.client_password=this.client_password),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.client_email.length&&t.writeString(1,this.client_email),this.client_password.length&&t.writeString(2,this.client_password),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new AuthenticationMessage;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.client_email=t.readString();break;case 2:r.client_password=t.readString();break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return AuthenticationMessage.deserialize(e)}}_AuthenticationMessage_one_of_decls=new WeakMap;class UserSettings extends googleProtobuf.Message{constructor(e){super(),_UserSettings_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_UserSettings_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("openai_api_key"in e&&null!=e.openai_api_key&&(this.openai_api_key=e.openai_api_key),"mongo_db_uri"in e&&null!=e.mongo_db_uri&&(this.mongo_db_uri=e.mongo_db_uri))}get openai_api_key(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set openai_api_key(e){googleProtobuf.Message.setField(this,1,e)}get mongo_db_uri(){return googleProtobuf.Message.getFieldWithDefault(this,2,"")}set mongo_db_uri(e){googleProtobuf.Message.setField(this,2,e)}static fromObject(e){const t=new UserSettings({});return null!=e.openai_api_key&&(t.openai_api_key=e.openai_api_key),null!=e.mongo_db_uri&&(t.mongo_db_uri=e.mongo_db_uri),t}toObject(){const e={};return null!=this.openai_api_key&&(e.openai_api_key=this.openai_api_key),null!=this.mongo_db_uri&&(e.mongo_db_uri=this.mongo_db_uri),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.openai_api_key.length&&t.writeString(1,this.openai_api_key),this.mongo_db_uri.length&&t.writeString(2,this.mongo_db_uri),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new UserSettings;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.openai_api_key=t.readString();break;case 2:r.mongo_db_uri=t.readString();break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return UserSettings.deserialize(e)}}_UserSettings_one_of_decls=new WeakMap;class SystemError extends googleProtobuf.Message{constructor(e){super(),_SystemError_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_SystemError_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("error_message"in e&&null!=e.error_message&&(this.error_message=e.error_message),"originator"in e&&null!=e.originator&&(this.originator=e.originator))}get error_message(){return googleProtobuf.Message.getFieldWithDefault(this,1,"")}set error_message(e){googleProtobuf.Message.setField(this,1,e)}get originator(){return googleProtobuf.Message.getWrapperField(this,Identity,2)}set originator(e){googleProtobuf.Message.setWrapperField(this,2,e)}get has_originator(){return null!=googleProtobuf.Message.getField(this,2)}static fromObject(e){const t=new SystemError({});return null!=e.error_message&&(t.error_message=e.error_message),null!=e.originator&&(t.originator=Identity.fromObject(e.originator)),t}toObject(){const e={};return null!=this.error_message&&(e.error_message=this.error_message),null!=this.originator&&(e.originator=this.originator.toObject()),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.error_message.length&&t.writeString(1,this.error_message),this.has_originator&&t.writeMessage(2,this.originator,(()=>this.originator.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new SystemError;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.error_message=t.readString();break;case 2:t.readMessage(r.originator,(()=>r.originator=Identity.deserialize(t)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return SystemError.deserialize(e)}}_SystemError_one_of_decls=new WeakMap;class Letter extends googleProtobuf.Message{constructor(e){super(),_Letter_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_Letter_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("body"in e&&null!=e.body&&(this.body=e.body),"verb"in e&&null!=e.verb&&(this.verb=e.verb))}get body(){return googleProtobuf.Message.getWrapperField(this,Body,1)}set body(e){googleProtobuf.Message.setWrapperField(this,1,e)}get has_body(){return null!=googleProtobuf.Message.getField(this,1)}get verb(){return googleProtobuf.Message.getFieldWithDefault(this,2,VerbTypes.Create)}set verb(e){googleProtobuf.Message.setField(this,2,e)}static fromObject(e){const t=new Letter({});return null!=e.body&&(t.body=Body.fromObject(e.body)),null!=e.verb&&(t.verb=e.verb),t}toObject(){const e={};return null!=this.body&&(e.body=this.body.toObject()),null!=this.verb&&(e.verb=this.verb),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.has_body&&t.writeMessage(1,this.body,(()=>this.body.serialize(t))),this.verb!=VerbTypes.Create&&t.writeEnum(2,this.verb),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Letter;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.body,(()=>r.body=Body.deserialize(t)));break;case 2:r.verb=t.readEnum();break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Letter.deserialize(e)}}_Letter_one_of_decls=new WeakMap;class Body extends googleProtobuf.Message{constructor(e){super(),_Body_one_of_decls.set(this,[[1,2,3,4,5,6,7]]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],__classPrivateFieldGet(this,_Body_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("node"in e&&null!=e.node&&(this.node=e.node),"authentication_message"in e&&null!=e.authentication_message&&(this.authentication_message=e.authentication_message),"user_settings"in e&&null!=e.user_settings&&(this.user_settings=e.user_settings),"execution_details"in e&&null!=e.execution_details&&(this.execution_details=e.execution_details),"errors"in e&&null!=e.errors&&(this.errors=e.errors),"identity"in e&&null!=e.identity&&(this.identity=e.identity),"nodes_to_process"in e&&null!=e.nodes_to_process&&(this.nodes_to_process=e.nodes_to_process))}get node(){return googleProtobuf.Message.getWrapperField(this,Node,1)}set node(e){googleProtobuf.Message.setOneofWrapperField(this,1,__classPrivateFieldGet(this,_Body_one_of_decls,"f")[0],e)}get has_node(){return null!=googleProtobuf.Message.getField(this,1)}get authentication_message(){return googleProtobuf.Message.getWrapperField(this,AuthenticationMessage,2)}set authentication_message(e){googleProtobuf.Message.setOneofWrapperField(this,2,__classPrivateFieldGet(this,_Body_one_of_decls,"f")[0],e)}get has_authentication_message(){return null!=googleProtobuf.Message.getField(this,2)}get user_settings(){return googleProtobuf.Message.getWrapperField(this,UserSettings,3)}set user_settings(e){googleProtobuf.Message.setOneofWrapperField(this,3,__classPrivateFieldGet(this,_Body_one_of_decls,"f")[0],e)}get has_user_settings(){return null!=googleProtobuf.Message.getField(this,3)}get execution_details(){return googleProtobuf.Message.getWrapperField(this,Execution,4)}set execution_details(e){googleProtobuf.Message.setOneofWrapperField(this,4,__classPrivateFieldGet(this,_Body_one_of_decls,"f")[0],e)}get has_execution_details(){return null!=googleProtobuf.Message.getField(this,4)}get errors(){return googleProtobuf.Message.getWrapperField(this,SystemError,5)}set errors(e){googleProtobuf.Message.setOneofWrapperField(this,5,__classPrivateFieldGet(this,_Body_one_of_decls,"f")[0],e)}get has_errors(){return null!=googleProtobuf.Message.getField(this,5)}get identity(){return googleProtobuf.Message.getWrapperField(this,Identity,6)}set identity(e){googleProtobuf.Message.setOneofWrapperField(this,6,__classPrivateFieldGet(this,_Body_one_of_decls,"f")[0],e)}get has_identity(){return null!=googleProtobuf.Message.getField(this,6)}get nodes_to_process(){return googleProtobuf.Message.getWrapperField(this,NodesToProcess,7)}set nodes_to_process(e){googleProtobuf.Message.setOneofWrapperField(this,7,__classPrivateFieldGet(this,_Body_one_of_decls,"f")[0],e)}get has_nodes_to_process(){return null!=googleProtobuf.Message.getField(this,7)}get contents(){return{0:"none",1:"node",2:"authentication_message",3:"user_settings",4:"execution_details",5:"errors",6:"identity",7:"nodes_to_process"}[googleProtobuf.Message.computeOneofCase(this,[1,2,3,4,5,6,7])]}static fromObject(e){const t=new Body({});return null!=e.node&&(t.node=Node.fromObject(e.node)),null!=e.authentication_message&&(t.authentication_message=AuthenticationMessage.fromObject(e.authentication_message)),null!=e.user_settings&&(t.user_settings=UserSettings.fromObject(e.user_settings)),null!=e.execution_details&&(t.execution_details=Execution.fromObject(e.execution_details)),null!=e.errors&&(t.errors=SystemError.fromObject(e.errors)),null!=e.identity&&(t.identity=Identity.fromObject(e.identity)),null!=e.nodes_to_process&&(t.nodes_to_process=NodesToProcess.fromObject(e.nodes_to_process)),t}toObject(){const e={};return null!=this.node&&(e.node=this.node.toObject()),null!=this.authentication_message&&(e.authentication_message=this.authentication_message.toObject()),null!=this.user_settings&&(e.user_settings=this.user_settings.toObject()),null!=this.execution_details&&(e.execution_details=this.execution_details.toObject()),null!=this.errors&&(e.errors=this.errors.toObject()),null!=this.identity&&(e.identity=this.identity.toObject()),null!=this.nodes_to_process&&(e.nodes_to_process=this.nodes_to_process.toObject()),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.has_node&&t.writeMessage(1,this.node,(()=>this.node.serialize(t))),this.has_authentication_message&&t.writeMessage(2,this.authentication_message,(()=>this.authentication_message.serialize(t))),this.has_user_settings&&t.writeMessage(3,this.user_settings,(()=>this.user_settings.serialize(t))),this.has_execution_details&&t.writeMessage(4,this.execution_details,(()=>this.execution_details.serialize(t))),this.has_errors&&t.writeMessage(5,this.errors,(()=>this.errors.serialize(t))),this.has_identity&&t.writeMessage(6,this.identity,(()=>this.identity.serialize(t))),this.has_nodes_to_process&&t.writeMessage(7,this.nodes_to_process,(()=>this.nodes_to_process.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Body;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.node,(()=>r.node=Node.deserialize(t)));break;case 2:t.readMessage(r.authentication_message,(()=>r.authentication_message=AuthenticationMessage.deserialize(t)));break;case 3:t.readMessage(r.user_settings,(()=>r.user_settings=UserSettings.deserialize(t)));break;case 4:t.readMessage(r.execution_details,(()=>r.execution_details=Execution.deserialize(t)));break;case 5:t.readMessage(r.errors,(()=>r.errors=SystemError.deserialize(t)));break;case 6:t.readMessage(r.identity,(()=>r.identity=Identity.deserialize(t)));break;case 7:t.readMessage(r.nodes_to_process,(()=>r.nodes_to_process=NodesToProcess.deserialize(t)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Body.deserialize(e)}}_Body_one_of_decls=new WeakMap;class NodesToProcess extends googleProtobuf.Message{constructor(e){super(),_NodesToProcess_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[1],__classPrivateFieldGet(this,_NodesToProcess_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("nodes"in e&&null!=e.nodes&&(this.nodes=e.nodes),"containing_node_info"in e&&null!=e.containing_node_info&&(this.containing_node_info=e.containing_node_info))}get nodes(){return googleProtobuf.Message.getRepeatedWrapperField(this,Node,1)}set nodes(e){googleProtobuf.Message.setRepeatedWrapperField(this,1,e)}get containing_node_info(){return googleProtobuf.Message.getWrapperField(this,GraphNodeInfo,2)}set containing_node_info(e){googleProtobuf.Message.setWrapperField(this,2,e)}get has_containing_node_info(){return null!=googleProtobuf.Message.getField(this,2)}static fromObject(e){const t=new NodesToProcess({});return null!=e.nodes&&(t.nodes=e.nodes.map((e=>Node.fromObject(e)))),null!=e.containing_node_info&&(t.containing_node_info=GraphNodeInfo.fromObject(e.containing_node_info)),t}toObject(){const e={};return null!=this.nodes&&(e.nodes=this.nodes.map((e=>e.toObject()))),null!=this.containing_node_info&&(e.containing_node_info=this.containing_node_info.toObject()),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.nodes.length&&t.writeRepeatedMessage(1,this.nodes,(e=>e.serialize(t))),this.has_containing_node_info&&t.writeMessage(2,this.containing_node_info,(()=>this.containing_node_info.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new NodesToProcess;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.nodes,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,1,Node.deserialize(t),Node)));break;case 2:t.readMessage(r.containing_node_info,(()=>r.containing_node_info=GraphNodeInfo.deserialize(t)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return NodesToProcess.deserialize(e)}}_NodesToProcess_one_of_decls=new WeakMap;class Envelope extends googleProtobuf.Message{constructor(e){super(),_Envelope_one_of_decls.set(this,[]),googleProtobuf.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[1],__classPrivateFieldGet(this,_Envelope_one_of_decls,"f")),Array.isArray(e)||"object"!=typeof e||("letters"in e&&null!=e.letters&&(this.letters=e.letters),"sender"in e&&null!=e.sender&&(this.sender=e.sender),"receiver"in e&&null!=e.receiver&&(this.receiver=e.receiver),"verification_id"in e&&null!=e.verification_id&&(this.verification_id=e.verification_id))}get letters(){return googleProtobuf.Message.getRepeatedWrapperField(this,Letter,1)}set letters(e){googleProtobuf.Message.setRepeatedWrapperField(this,1,e)}get sender(){return googleProtobuf.Message.getWrapperField(this,Identity,2)}set sender(e){googleProtobuf.Message.setWrapperField(this,2,e)}get has_sender(){return null!=googleProtobuf.Message.getField(this,2)}get receiver(){return googleProtobuf.Message.getWrapperField(this,Identity,3)}set receiver(e){googleProtobuf.Message.setWrapperField(this,3,e)}get has_receiver(){return null!=googleProtobuf.Message.getField(this,3)}get verification_id(){return googleProtobuf.Message.getFieldWithDefault(this,4,"")}set verification_id(e){googleProtobuf.Message.setField(this,4,e)}static fromObject(e){const t=new Envelope({});return null!=e.letters&&(t.letters=e.letters.map((e=>Letter.fromObject(e)))),null!=e.sender&&(t.sender=Identity.fromObject(e.sender)),null!=e.receiver&&(t.receiver=Identity.fromObject(e.receiver)),null!=e.verification_id&&(t.verification_id=e.verification_id),t}toObject(){const e={};return null!=this.letters&&(e.letters=this.letters.map((e=>e.toObject()))),null!=this.sender&&(e.sender=this.sender.toObject()),null!=this.receiver&&(e.receiver=this.receiver.toObject()),null!=this.verification_id&&(e.verification_id=this.verification_id),e}serialize(e){const t=e||new googleProtobuf.BinaryWriter;if(this.letters.length&&t.writeRepeatedMessage(1,this.letters,(e=>e.serialize(t))),this.has_sender&&t.writeMessage(2,this.sender,(()=>this.sender.serialize(t))),this.has_receiver&&t.writeMessage(3,this.receiver,(()=>this.receiver.serialize(t))),this.verification_id.length&&t.writeString(4,this.verification_id),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof googleProtobuf.BinaryReader?e:new googleProtobuf.BinaryReader(e),r=new Envelope;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(r.letters,(()=>googleProtobuf.Message.addToRepeatedWrapperField(r,1,Letter.deserialize(t),Letter)));break;case 2:t.readMessage(r.sender,(()=>r.sender=Identity.deserialize(t)));break;case 3:t.readMessage(r.receiver,(()=>r.receiver=Identity.deserialize(t)));break;case 4:r.verification_id=t.readString();break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return Envelope.deserialize(e)}}_Envelope_one_of_decls=new WeakMap;const new_system_state=new SystemState,systemStateStore=writable(new_system_state);function get_each_context$5(e,t,r){const n=e.slice();return n[11]=t[r],n}function get_each_context_1$3(e,t,r){const n=e.slice();return n[14]=t[r],n}function create_each_block_1$3(e){let t,r,n=e[3][e[14]]+"";return{c(){t=element$1("option"),r=text(n),t.__value=e[14],t.value=t.__value},m(e,n){insert(e,t,n),append(t,r)},p:noop$2,d(e){e&&detach(t)}}}function create_each_block$5(e){let t,r,n,o,i,a=e[3][e[11].node_type]+"",s=e[11].node_info.name+"";return{c(){t=element$1("option"),r=text(a),n=text(" : "),o=text(s),t.__value=i=e[11],t.value=t.__value},m(e,i){insert(e,t,i),append(t,r),append(t,n),append(t,o)},p(e,n){4&n&&a!==(a=e[3][e[11].node_type]+"")&&set_data(r,a),4&n&&s!==(s=e[11].node_info.name+"")&&set_data(o,s),4&n&&i!==(i=e[11])&&(t.__value=i,t.value=t.__value)},d(e){e&&detach(t)}}}function create_fragment$9(e){let t,r,n,o,i,a,s,l,u,c,g,d,p=e[3][e[0]]+"",h=e[4],f=[];for(let t=0;t<h.length;t+=1)f[t]=create_each_block_1$3(get_each_context_1$3(e,h,t));let y=e[2],m=[];for(let t=0;t<y.length;t+=1)m[t]=create_each_block$5(get_each_context$5(e,y,t));return{c(){t=element$1("p"),t.textContent="Select a node type to modify:",r=space(),n=element$1("select");for(let e=0;e<f.length;e+=1)f[e].c();o=space(),i=element$1("p"),a=text("Selected type: "),s=text(p),l=space(),u=element$1("select"),c=element$1("option"),c.textContent="Select a node";for(let e=0;e<m.length;e+=1)m[e].c();void 0===e[0]&&add_render_callback((()=>e[8].call(n))),c.__value="",c.value=c.__value,void 0===e[1]&&add_render_callback((()=>e[9].call(u)))},m(p,h){insert(p,t,h),insert(p,r,h),insert(p,n,h);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(n,null);select_option(n,e[0],!0),insert(p,o,h),insert(p,i,h),append(i,a),append(i,s),insert(p,l,h),insert(p,u,h),append(u,c);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(u,null);select_option(u,e[1],!0),g||(d=[listen(n,"change",e[8]),listen(u,"change",e[9]),listen(u,"change",e[10])],g=!0)},p(e,[t]){if(24&t){let r;for(h=e[4],r=0;r<h.length;r+=1){const o=get_each_context_1$3(e,h,r);f[r]?f[r].p(o,t):(f[r]=create_each_block_1$3(o),f[r].c(),f[r].m(n,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=h.length}if(17&t&&select_option(n,e[0]),1&t&&p!==(p=e[3][e[0]]+"")&&set_data(s,p),12&t){let r;for(y=e[2],r=0;r<y.length;r+=1){const n=get_each_context$5(e,y,r);m[r]?m[r].p(n,t):(m[r]=create_each_block$5(n),m[r].c(),m[r].m(u,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=y.length}6&t&&select_option(u,e[1])},i:noop$2,o:noop$2,d(e){e&&detach(t),e&&detach(r),e&&detach(n),destroy_each(f,e),e&&detach(o),e&&detach(i),e&&detach(l),e&&detach(u),destroy_each(m,e),g=!1,run_all(d)}}}function instance$8(e,t,r){let n,o;component_subscribe(e,systemStateStore,(e=>r(7,n=e)));let i=[],a=NodeTypes.PROMPT,s=["PROMPT","PROCESS"];console.log("keylist is:",s);let l=Array.from({length:s.length},((e,t)=>t)),u=new Array;function c(){switch(o.node_type){case NodeTypes.PROMPT:console.log("Selected node is a prompt");break;case NodeTypes.PROCESS:set_store_value(systemStateStore,n.selected_process=o,n),console.log("Selected node is a process");break;case NodeTypes.CONDITIONAL:console.log("Selected node is a conditional");break;case NodeTypes.COMMAND:console.log("Selected node is a command");break;default:console.log("Selected node is not a valid node type")}}return e.$$.update=()=>{193&e.$$.dirty&&(r(6,i=n.local_nodes),r(2,u=i.filter((e=>e.node_type===a))))},[a,o,u,s,l,c,i,n,function(){a=select_value(this),r(0,a),r(4,l)},function(){o=select_value(this),r(1,o),r(2,u),r(7,n),r(6,i),r(0,a)},()=>c()]}class ModifyNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$9,safe_not_equal,{})}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));function unsafeStringify(e,t=0){return byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]}const randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var native={randomUUID:randomUUID};function v4(e,t,r){if(native.randomUUID&&!t&&!e)return native.randomUUID();const n=(e=e||{}).random||(e.rng||rng)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return unsafeStringify(n)}const websocket={websocket:null},websocketStore=writable(websocket);function initializeSystemState(e){const t=new Graph$3;e.graph=t,e.authenticated=!1,e.websocket_ready=!1,e.local_nodes=[],e.selected_nodes=[];const r=selfIdentify();return e.client_identity=r,e}function getNodes(){let e;websocketStore.subscribe((t=>{e=t.websocket})),console.log("requesting nodes from server");const t=new Letter;t.verb=VerbTypes.Get;const r=new Body,n=new Node;r.node=n,t.body=r,sendEnvelope(e,[t])}function setupWebsocketConnection(){console.log("setting up websocket connection");const e="DEVELOPMENT";console.log("The environment is: ",e);const t="PRODUCTION"===e.toUpperCase()?"wss://liminalnook.com/ws/":"ws://localhost:8080";alert("Change websocket to external environment");let r=new WebSocket(t);return r.addEventListener("open",(()=>{console.log("websocket connection opened"),r=setupWebsocketMessageHandler(r)})),console.log("Event listener setup:"),r}function setupWebsocketMessageHandler(e){return console.log("setting up websocket message handler"),e.addEventListener("message",(e=>{console.log("\n------------------\n"),e.data.arrayBuffer().then((e=>{const t=new Uint8Array(e),r=Envelope.deserializeBinary(t);console.log("received message: ",r.toObject());let n=new Identity;systemStateStore.subscribe((e=>{n=e.client_identity})),r.has_receiver||alert("This message does not have a receiver. This is not good."),r.has_receiver&&r.receiver.id!==n.id&&alert("Rerouting the message to the correct client. This message is not for me."),r.has_receiver&&r.receiver.id===n.id?r.letters.forEach((e=>{if(console.log("letter: ",e),e.verb===VerbTypes.Initiate&&e.body.has_node){const t=e.body.node;t&&"function"==typeof t.toObject&&(console.log("add_node: ",t.toObject()),systemStateStore.update((e=>(e.local_nodes.push(t),e))))}if(e.verb===VerbTypes.Acknowledge){if(e.body.has_identity){const t=e.body.identity;console.log("setting primary server identity: ",t.toObject()),systemStateStore.update((e=>(e.primary_backend=t,e))),getNodes()}e.body.has_node&&(console.log("Added node to local system state"),systemStateStore.update((t=>(e.body.node.node_content.has_process&&(t.selected_process=e.body.node),t.local_nodes.push(e.body.node),t))))}})):console.log("This message is not for me.")}))})),e}function sendWebsocketMessage(e,t){console.log("sending message: ",e.toObject());const r=e.serializeBinary();t.send(r)}function sendEnvelope(e,t,r=undefined,n=undefined){r||(console.log("Sender not set. Defaulting to this client."),systemStateStore.subscribe((e=>{r=e.client_identity})),null==r?alert("this client identity not defined"):console.log("Setting client identity: ",r.toObject())),n||(console.log("Receiver not set. Defaulting to the primary backend."),systemStateStore.subscribe((e=>{n=e.primary_backend})),null==n?console.log("primary backend not defined"):console.log("Setting receiver identity: ",n.toObject()));const o=new Envelope;o.sender=r,o.receiver=n;const i=v4();o.verification_id=i,o.letters=t,sendWebsocketMessage(o,e)}function selfIdentify(){const e=v4(),t=new Identity;return t.id=e,getExternalIP().then((e=>{t.ip_address=e})),t}function getExternalIP(){return __awaiter(this,void 0,void 0,(function*(){return"placeholder_frontend_ip"}))}function get_each_context$4(e,t,r){const n=e.slice();return n[14]=t[r],n}function get_each_context_1$2(e,t,r){const n=e.slice();return n[14]=t[r],n}function create_each_block_1$2(e){let t,r,n,o,i,a,s,l,u=e[5][e[14].node_type]+"",c=e[14].node_info.name+"";function g(){return e[12](e[14])}return{c(){t=element$1("li"),r=element$1("button"),n=text(u),o=text(" : "),i=text(c),a=space(),attr(r,"type","button"),toggle_class(r,"selected",e[6](e[14]))},m(e,u){insert(e,t,u),append(t,r),append(r,n),append(r,o),append(r,i),append(t,a),s||(l=listen(r,"click",g),s=!0)},p(t,o){e=t,4&o&&u!==(u=e[5][e[14].node_type]+"")&&set_data(n,u),4&o&&c!==(c=e[14].node_info.name+"")&&set_data(i,c),68&o&&toggle_class(r,"selected",e[6](e[14]))},d(e){e&&detach(t),s=!1,l()}}}function create_each_block$4(e){let t,r,n,o,i,a=e[5][e[14].node_type]+"",s=e[14].node_info.name+"";return{c(){t=element$1("li"),r=element$1("p"),n=text(a),o=text(" : "),i=text(s)},m(e,a){insert(e,t,a),append(t,r),append(r,n),append(r,o),append(r,i)},p(e,t){8&t&&a!==(a=e[5][e[14].node_type]+"")&&set_data(n,a),8&t&&s!==(s=e[14].node_info.name+"")&&set_data(i,s)},d(e){e&&detach(t)}}}function create_if_block$5(e){let t,r;return{c(){t=element$1("p"),r=text(e[4]),attr(t,"class","error svelte-1fi3y4c")},m(e,n){insert(e,t,n),append(t,r)},p(e,t){16&t&&set_data(r,e[4])},d(e){e&&detach(t)}}}function create_fragment$8(e){let t,r,n,o,i,a,s,l,u,c,g,d,p,h,f,y,m,b,_,v=e[2],S=[];for(let t=0;t<v.length;t+=1)S[t]=create_each_block_1$2(get_each_context_1$2(e,v,t));let E=e[3],w=[];for(let t=0;t<E.length;t+=1)w[t]=create_each_block$4(get_each_context$4(e,E,t));let x=e[4]&&create_if_block$5(e);return{c(){t=element$1("p"),t.textContent="Please set a descriptive name for your process:",r=space(),n=element$1("input"),o=space(),i=element$1("p"),i.textContent="Please set a description for your process, please talk about what purpose it\n  serves:",a=space(),s=element$1("input"),l=space(),u=element$1("p"),u.textContent='Click the node buttons below to add them to the graph. Then click "Add Node(s)\n  to see them populate on the graph."',c=space(),g=element$1("ul");for(let e=0;e<S.length;e+=1)S[e].c();d=space(),p=element$1("h3"),p.textContent="Nodes to add:",h=space();for(let e=0;e<w.length;e+=1)w[e].c();f=space(),x&&x.c(),y=space(),m=element$1("button"),m.textContent="Save Process",attr(n,"type","text"),attr(s,"type","text"),attr(m,"class","add-button")},m(v,E){insert(v,t,E),insert(v,r,E),insert(v,n,E),set_input_value(n,e[0]),insert(v,o,E),insert(v,i,E),insert(v,a,E),insert(v,s,E),set_input_value(s,e[1]),insert(v,l,E),insert(v,u,E),insert(v,c,E),insert(v,g,E);for(let e=0;e<S.length;e+=1)S[e]&&S[e].m(g,null);insert(v,d,E),insert(v,p,E),insert(v,h,E);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(v,E);insert(v,f,E),x&&x.m(v,E),insert(v,y,E),insert(v,m,E),b||(_=[listen(n,"input",e[10]),listen(s,"input",e[11]),listen(m,"click",e[8])],b=!0)},p(e,[t]){if(1&t&&n.value!==e[0]&&set_input_value(n,e[0]),2&t&&s.value!==e[1]&&set_input_value(s,e[1]),228&t){let r;for(v=e[2],r=0;r<v.length;r+=1){const n=get_each_context_1$2(e,v,r);S[r]?S[r].p(n,t):(S[r]=create_each_block_1$2(n),S[r].c(),S[r].m(g,null))}for(;r<S.length;r+=1)S[r].d(1);S.length=v.length}if(40&t){let r;for(E=e[3],r=0;r<E.length;r+=1){const n=get_each_context$4(e,E,r);w[r]?w[r].p(n,t):(w[r]=create_each_block$4(n),w[r].c(),w[r].m(f.parentNode,f))}for(;r<w.length;r+=1)w[r].d(1);w.length=E.length}e[4]?x?x.p(e,t):(x=create_if_block$5(e),x.c(),x.m(y.parentNode,y)):x&&(x.d(1),x=null)},i:noop$2,o:noop$2,d(e){e&&detach(t),e&&detach(r),e&&detach(n),e&&detach(o),e&&detach(i),e&&detach(a),e&&detach(s),e&&detach(l),e&&detach(u),e&&detach(c),e&&detach(g),destroy_each(S,e),e&&detach(d),e&&detach(p),e&&detach(h),destroy_each(w,e),e&&detach(f),x&&x.d(e),e&&detach(y),e&&detach(m),b=!1,run_all(_)}}}function instance$7(e,t,r){let n,o;component_subscribe(e,websocketStore,(e=>r(13,n=e))),component_subscribe(e,systemStateStore,(e=>r(9,o=e)));let i="",a="",s=[],l=[],u="",c=Object.keys(NodeTypes).filter((e=>isNaN(Number(e))));function g(e){return l.includes(e)}function d(e){g(e)?r(3,l=l.filter((t=>t!==e))):r(3,l=[...l,e])}onMount((()=>{r(2,s=o.local_nodes)}));return e.$$.update=()=>{512&e.$$.dirty&&r(2,s=o.local_nodes)},[i,a,s,l,u,c,g,d,function(){if(!i.trim()||!a.trim())return void r(4,u="Both name and description are required!");r(4,u=""),alert("sendNodes feature is not yet implemented!"),console.log("sending selected_node_list: ",l);let e=new GraphNodeInfo;e.name=i,e.description=a,e.id=v4();let t=new NodesToProcess;t.containing_node_info=e,t.nodes=l;let o=n.websocket,s=new Letter,c=new Body;c.nodes_to_process=t,s.body=c,s.verb=VerbTypes.Validate,sendEnvelope(o,[s]),r(3,l=[]),r(1,a=""),r(0,i="")},o,function(){i=this.value,r(0,i)},function(){a=this.value,r(1,a)},e=>d(e)]}class ProcessComponent extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$8,safe_not_equal,{})}}function get_each_context$3(e,t,r){const n=e.slice();return n[21]=t[r],n[23]=r,n}function get_each_context_1$1(e,t,r){const n=e.slice();return n[24]=t[r],n[23]=r,n}function create_each_block_1$1(e){let t,r,n,o,i,a,s=e[4][e[23]]+"";function l(){return e[11](e[23])}return{c(){t=element$1("button"),r=text("`Remove input var: "),n=text(s),o=text("`"),attr(t,"type","button")},m(e,s){insert(e,t,s),append(t,r),append(t,n),append(t,o),i||(a=listen(t,"click",l),i=!0)},p(t,r){e=t,16&r&&s!==(s=e[4][e[23]]+"")&&set_data(n,s)},d(e){e&&detach(t),i=!1,a()}}}function create_each_block$3(e){let t,r,n,o,i,a,s=e[5][e[23]]+"";function l(){return e[14](e[23])}return{c(){t=element$1("button"),r=text("`Remove output Var: "),n=text(s),o=text("`"),attr(t,"type","button")},m(e,s){insert(e,t,s),append(t,r),append(t,n),append(t,o),i||(a=listen(t,"click",l),i=!0)},p(t,r){e=t,32&r&&s!==(s=e[5][e[23]]+"")&&set_data(n,s)},d(e){e&&detach(t),i=!1,a()}}}function create_fragment$7(e){let t,r,n,o,i,a,s,l,u,c,g,d,p,h,f,y,m,b,_,v,S,E,w,x,T,R,A,j,C,P,I,M,O,B,N=e[4],k=[];for(let t=0;t<N.length;t+=1)k[t]=create_each_block_1$1(get_each_context_1$1(e,N,t));let D=e[5],q=[];for(let t=0;t<D.length;t+=1)q[t]=create_each_block$3(get_each_context$3(e,D,t));return{c(){t=element$1("form"),r=element$1("div"),n=element$1("div"),o=element$1("input"),i=space(),a=element$1("input"),s=space(),l=element$1("div"),u=element$1("h4"),u.textContent="Input Variables",c=space();for(let e=0;e<k.length;e+=1)k[e].c();g=space(),d=element$1("input"),p=space(),h=element$1("button"),h.textContent="Add",f=space(),y=element$1("div"),m=element$1("h4"),m.textContent="Output Variables",b=space();for(let e=0;e<q.length;e+=1)q[e].c();_=space(),v=element$1("input"),S=space(),E=element$1("button"),E.textContent="Add",w=space(),x=element$1("label"),x.textContent="Prompt",T=space(),R=element$1("input"),A=space(),j=element$1("label"),j.textContent="System",C=space(),P=element$1("input"),I=space(),M=element$1("button"),M.textContent="Submit",attr(o,"placeholder","Name"),attr(a,"placeholder","Description"),attr(d,"placeholder","New Input Variable"),attr(h,"type","button"),attr(v,"placeholder","New Output Variable"),attr(E,"type","button"),attr(x,"for","prompt"),attr(x,"class","required-label svelte-wwcf2i"),attr(R,"id","prompt"),attr(R,"type","text"),R.required=!0,attr(R,"class","required-input svelte-wwcf2i"),attr(j,"for","system"),attr(j,"class","required-label svelte-wwcf2i"),attr(P,"id","system"),attr(P,"type","text"),P.required=!0,attr(P,"class","required-input svelte-wwcf2i"),attr(M,"type","submit")},m(N,D){insert(N,t,D),append(t,r),append(r,n),append(n,o),set_input_value(o,e[3]),append(n,i),append(n,a),set_input_value(a,e[2]),append(n,s),append(n,l),append(l,u),append(l,c);for(let e=0;e<k.length;e+=1)k[e]&&k[e].m(l,null);append(l,g),append(l,d),set_input_value(d,e[6]),append(l,p),append(l,h),append(n,f),append(n,y),append(y,m),append(y,b);for(let e=0;e<q.length;e+=1)q[e]&&q[e].m(y,null);append(y,_),append(y,v),set_input_value(v,e[7]),append(y,S),append(y,E),append(n,w),append(n,x),append(n,T),append(n,R),set_input_value(R,e[1]),append(n,A),append(n,j),append(n,C),append(n,P),set_input_value(P,e[0]),append(n,I),append(n,M),O||(B=[listen(o,"input",e[9]),listen(a,"input",e[10]),listen(d,"input",e[12]),listen(h,"click",e[13]),listen(v,"input",e[15]),listen(E,"click",e[16]),listen(R,"input",e[17]),listen(P,"input",e[18]),listen(t,"submit",prevent_default(e[8]))],O=!0)},p(e,[t]){if(8&t&&o.value!==e[3]&&set_input_value(o,e[3]),4&t&&a.value!==e[2]&&set_input_value(a,e[2]),16&t){let r;for(N=e[4],r=0;r<N.length;r+=1){const n=get_each_context_1$1(e,N,r);k[r]?k[r].p(n,t):(k[r]=create_each_block_1$1(n),k[r].c(),k[r].m(l,g))}for(;r<k.length;r+=1)k[r].d(1);k.length=N.length}if(64&t&&d.value!==e[6]&&set_input_value(d,e[6]),32&t){let r;for(D=e[5],r=0;r<D.length;r+=1){const n=get_each_context$3(e,D,r);q[r]?q[r].p(n,t):(q[r]=create_each_block$3(n),q[r].c(),q[r].m(y,_))}for(;r<q.length;r+=1)q[r].d(1);q.length=D.length}128&t&&v.value!==e[7]&&set_input_value(v,e[7]),2&t&&R.value!==e[1]&&set_input_value(R,e[1]),1&t&&P.value!==e[0]&&set_input_value(P,e[0])},i:noop$2,o:noop$2,d(e){e&&detach(t),destroy_each(k,e),destroy_each(q,e),O=!1,run_all(B)}}}function isValidHandlebarsTemplate(e){return/\{\{([^}]+)\}\}/g.test(e)}function extractVariableNames(e){const t=/\{\{([^}]+)\}\}/g;let r;const n=new Set;for(;null!==(r=t.exec(e));)n.add(r[1].trim());return Array.from(n)}function instance$6(e,t,r){let n;component_subscribe(e,websocketStore,(e=>r(19,n=e)));let o="",i="",a="",s="",l=[],u=[],c="",g="";return[o,i,a,s,l,u,c,g,function(){if(!isValidHandlebarsTemplate(i))return void alert("Invalid Handlebars template.");let e=new Prompt;e.prompt=i,e.system=o;let t=new Node;""!=c&&r(4,l=[...l,c]);let d=extractVariableNames(i),p=l.every((e=>d.includes(e))),h=d.every((e=>l.includes(e))),f=p&&h;if(""!=g&&r(5,u=[...u,g]),f){t.input_variables=l,t.output_variables=u;let d=new NodeContent;d.prompt=e;let p=new GraphNodeInfo;p.name=s,p.id=new v4,p.description=a,t.node_info=p,t.node_content=d,t.node_type=NodeTypes.PROMPT;let h=n.websocket,f=new Body;f.node=t;let y=new Letter;y.body=f,y.verb=VerbTypes.Create,sendEnvelope(h,[y]),r(0,o=""),r(1,i=""),r(2,a=""),r(3,s=""),r(4,l=[]),r(5,u=[]),r(6,c=""),r(7,g="")}else alert("All of the input variables do not have a definition within the template")},function(){s=this.value,r(3,s)},function(){a=this.value,r(2,a)},e=>{l.splice(e,1),r(4,l)},function(){c=this.value,r(6,c)},()=>{r(4,l=[...l,c]),r(6,c="")},e=>{u.splice(e,1),r(5,u)},function(){g=this.value,r(7,g)},()=>{r(5,u=[...u,g]),r(7,g="")},function(){i=this.value,r(1,i)},function(){o=this.value,r(0,o)}]}class PromptComponent extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$7,safe_not_equal,{})}}function get_each_context$2(e,t,r){const n=e.slice();return n[8]=t[r],n}function create_each_block$2(e){let t,r,n=e[1][e[8]]+"";return{c(){t=element$1("option"),r=text(n),t.__value=e[8],t.value=t.__value},m(e,n){insert(e,t,n),append(t,r)},p:noop$2,d(e){e&&detach(t)}}}function create_if_block_1$1(e){let t,r;return t=new PromptComponent({}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),r=!0},i(e){r||(transition_in(t.$$.fragment,e),r=!0)},o(e){transition_out(t.$$.fragment,e),r=!1},d(e){destroy_component(t,e)}}}function create_if_block$4(e){let t,r;return t=new ProcessComponent({}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),r=!0},i(e){r||(transition_in(t.$$.fragment,e),r=!0)},o(e){transition_out(t.$$.fragment,e),r=!1},d(e){destroy_component(t,e)}}}function create_fragment$6(e){let t,r,n,o,i,a,s,l,u,c,g,d=e[1][e[0]]+"",p=e[2],h=[];for(let t=0;t<p.length;t+=1)h[t]=create_each_block$2(get_each_context$2(e,p,t));let f=e[0]===NodeTypes.PROMPT&&create_if_block_1$1(),y=e[0]===NodeTypes.PROCESS&&create_if_block$4();return{c(){t=element$1("select");for(let e=0;e<h.length;e+=1)h[e].c();r=space(),n=element$1("p"),o=text("Selected type: "),i=text(d),a=space(),f&&f.c(),s=space(),y&&y.c(),l=empty(),void 0===e[0]&&add_render_callback((()=>e[3].call(t)))},m(d,p){insert(d,t,p);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(t,null);select_option(t,e[0],!0),insert(d,r,p),insert(d,n,p),append(n,o),append(n,i),insert(d,a,p),f&&f.m(d,p),insert(d,s,p),y&&y.m(d,p),insert(d,l,p),u=!0,c||(g=listen(t,"change",e[3]),c=!0)},p(e,[r]){if(6&r){let n;for(p=e[2],n=0;n<p.length;n+=1){const o=get_each_context$2(e,p,n);h[n]?h[n].p(o,r):(h[n]=create_each_block$2(o),h[n].c(),h[n].m(t,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=p.length}5&r&&select_option(t,e[0]),(!u||1&r)&&d!==(d=e[1][e[0]]+"")&&set_data(i,d),e[0]===NodeTypes.PROMPT?f?1&r&&transition_in(f,1):(f=create_if_block_1$1(),f.c(),transition_in(f,1),f.m(s.parentNode,s)):f&&(group_outros(),transition_out(f,1,1,(()=>{f=null})),check_outros()),e[0]===NodeTypes.PROCESS?y?1&r&&transition_in(y,1):(y=create_if_block$4(),y.c(),transition_in(y,1),y.m(l.parentNode,l)):y&&(group_outros(),transition_out(y,1,1,(()=>{y=null})),check_outros())},i(e){u||(transition_in(f),transition_in(y),u=!0)},o(e){transition_out(f),transition_out(y),u=!1},d(e){e&&detach(t),destroy_each(h,e),e&&detach(r),e&&detach(n),e&&detach(a),f&&f.d(e),e&&detach(s),y&&y.d(e),e&&detach(l),c=!1,g()}}}function instance$5(e,t,r){let n=NodeTypes.PROMPT;new Prompt,new Process,new Conditional,new Command;let o=["PROMPT","PROCESS"],i=Array.from({length:o.length},((e,t)=>t));return[n,o,i,function(){n=select_value(this),r(0,n),r(2,i)}]}class NewNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$6,safe_not_equal,{})}}function cubicInOut(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function blur(e,{delay:t=0,duration:r=400,easing:n=cubicInOut,amount:o=5,opacity:i=0}={}){const a=getComputedStyle(e),s=+a.opacity,l="none"===a.filter?"":a.filter,u=s*(1-i),[c,g]=split_css_unit(o);return{delay:t,duration:r,easing:n,css:(e,t)=>`opacity: ${s-u*t}; filter: ${l} blur(${t*c}${g});`}}function fade(e,{delay:t=0,duration:r=400,easing:n=identity$1}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:e=>"opacity: "+e*o}}function get_each_context$1(e,t,r){const n=e.slice();return n[15]=t[r],n}function get_each_context_1(e,t,r){const n=e.slice();return n[18]=t[r],n}function create_each_block_1(e){let t,r,n,o=e[18].node_info.name+"";return{c(){t=element$1("option"),r=text(o),t.__value=n=e[18],t.value=t.__value},m(e,n){insert(e,t,n),append(t,r)},p(e,i){8&i&&o!==(o=e[18].node_info.name+"")&&set_data(r,o),8&i&&n!==(n=e[18])&&(t.__value=n,t.value=t.__value)},d(e){e&&detach(t)}}}function create_each_block$1(e){let t,r,n,o,i,a,s=e[15]+"";function l(...t){return e[12](e[15],...t)}return{c(){t=element$1("label"),r=text(s),n=text(":\n      "),o=element$1("input"),attr(o,"type","text")},m(e,s){insert(e,t,s),append(t,r),append(t,n),append(t,o),i||(a=listen(o,"input",l),i=!0)},p(t,n){e=t,2&n&&s!==(s=e[15]+"")&&set_data(r,s)},d(e){e&&detach(t),i=!1,a()}}}function create_if_block$3(e){let t;return{c(){t=element$1("button"),t.textContent="Submit",attr(t,"type","submit")},m(e,r){insert(e,t,r)},d(e){e&&detach(t)}}}function create_fragment$5(e){let t,r,n,o,i,a,s,l=e[3],u=[];for(let t=0;t<l.length;t+=1)u[t]=create_each_block_1(get_each_context_1(e,l,t));let c=e[1],g=[];for(let t=0;t<c.length;t+=1)g[t]=create_each_block$1(get_each_context$1(e,c,t));let d=e[2]&&create_if_block$3();return{c(){t=element$1("select"),r=element$1("option"),r.textContent="Select a process";for(let e=0;e<u.length;e+=1)u[e].c();n=space(),o=element$1("form");for(let e=0;e<g.length;e+=1)g[e].c();i=space(),d&&d.c(),r.__value="",r.value=r.__value,void 0===e[0]&&add_render_callback((()=>e[10].call(t)))},m(l,c){insert(l,t,c),append(t,r);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(t,null);select_option(t,e[0],!0),insert(l,n,c),insert(l,o,c);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(o,null);append(o,i),d&&d.m(o,null),a||(s=[listen(t,"change",e[10]),listen(t,"change",e[11]),listen(o,"submit",prevent_default(e[5]))],a=!0)},p(e,[r]){if(8&r){let n;for(l=e[3],n=0;n<l.length;n+=1){const o=get_each_context_1(e,l,n);u[n]?u[n].p(o,r):(u[n]=create_each_block_1(o),u[n].c(),u[n].m(t,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=l.length}if(9&r&&select_option(t,e[0]),18&r){let t;for(c=e[1],t=0;t<c.length;t+=1){const n=get_each_context$1(e,c,t);g[t]?g[t].p(n,r):(g[t]=create_each_block$1(n),g[t].c(),g[t].m(o,i))}for(;t<g.length;t+=1)g[t].d(1);g.length=c.length}e[2]?d||(d=create_if_block$3(),d.c(),d.m(o,null)):d&&(d.d(1),d=null)},i:noop$2,o:noop$2,d(e){e&&detach(t),destroy_each(u,e),e&&detach(n),e&&detach(o),destroy_each(g,e),d&&d.d(),a=!1,run_all(s)}}}function instance$4(e,t,r){let n,o;component_subscribe(e,systemStateStore,(e=>r(9,n=e))),component_subscribe(e,websocketStore,(e=>r(13,o=e)));var i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};let a,s=new Map,l=[],u=!1,c=new Array,g=new Array;function d(e,t){s.set(e,t)}function p(){set_store_value(systemStateStore,n.selected_process=a,n)}onMount((()=>{r(8,g=n.local_nodes),r(3,c=g.filter((e=>e.node_type===NodeTypes.PROCESS))),console.log("ExecuteNode mounted"),void 0!==n.selected_process&&(r(0,a=n.selected_process),r(1,l=a.input_variables))}));return e.$$.update=()=>{513&e.$$.dirty&&void 0!==n.selected_process&&(r(0,a=n.selected_process),r(1,l=a.input_variables),r(7,s=new Map)),768&e.$$.dirty&&(r(8,g=n.local_nodes),r(3,c=g.filter((e=>e.node_type===NodeTypes.PROCESS)))),128&e.$$.dirty&&r(2,u=Array.from(s.values()).every((e=>""!==e.trim())))},[a,l,u,c,d,function(){return i(this,void 0,void 0,(function*(){let e=new Letter,t=new Body,r=new Execution;r.process=a.node_content.process,r.current_variable_definitions=s,r.execution_id=v4(),r.current_node=a.node_content.process.topological_order[0],t.execution_details=r,e.body=t,e.verb=VerbTypes.Execute,sendEnvelope(o.websocket,[e])}))},p,s,g,n,function(){a=select_value(this),r(0,a),r(9,n),r(3,c),r(9,n),r(8,g)},()=>p(),(e,t)=>d(e,t.target.value)]}class ExecuteNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$5,safe_not_equal,{})}}function get_each_context(e,t,r){const n=e.slice();return n[5]=t[r],n[6]=t,n[7]=r,n}function create_if_block$2(e){let t,r,n,o,i;var a=e[5].component;return a&&(r=construct_svelte_component(a,{})),{c(){t=element$1("div"),r&&create_component(r.$$.fragment),attr(t,"class","section-content svelte-qngs79")},m(e,n){insert(e,t,n),r&&mount_component(r,t,null),i=!0},p(e,n){if(1&n&&a!==(a=e[5].component)){if(r){group_outros();const e=r;transition_out(e.$$.fragment,1,0,(()=>{destroy_component(e,1)})),check_outros()}a?(r=construct_svelte_component(a,{}),create_component(r.$$.fragment),transition_in(r.$$.fragment,1),mount_component(r,t,null)):r=null}},i(e){i||(r&&transition_in(r.$$.fragment,e),add_render_callback((()=>{i&&(o&&o.end(1),n=create_in_transition(t,fade,{duration:100}),n.start())})),i=!0)},o(e){r&&transition_out(r.$$.fragment,e),n&&n.invalidate(),o=create_out_transition(t,blur,{duration:100,amount:5}),i=!1},d(e){e&&detach(t),r&&destroy_component(r),e&&o&&o.end()}}}function create_each_block(e,t){let r,n,o,i,a,s,l,u,c=t[5].header+"",g=t[6],d=t[7];function p(...e){return t[2](t[5],...e)}function h(){return t[3](t[5])}let f=t[5].open&&create_if_block$2(t);const y=()=>t[4](r,g,d),m=()=>t[4](null,g,d);return{key:e,first:null,c(){r=element$1("div"),n=element$1("div"),o=text(c),i=space(),f&&f.c(),a=space(),attr(n,"class","section-header svelte-qngs79"),attr(r,"class","section svelte-qngs79"),this.first=r},m(e,t){insert(e,r,t),append(r,n),append(n,o),append(r,i),f&&f.m(r,null),append(r,a),y(),s=!0,l||(u=[listen(n,"keydown",p),listen(n,"click",h)],l=!0)},p(e,n){t=e,(!s||1&n)&&c!==(c=t[5].header+"")&&set_data(o,c),t[5].open?f?(f.p(t,n),1&n&&transition_in(f,1)):(f=create_if_block$2(t),f.c(),transition_in(f,1),f.m(r,a)):f&&(group_outros(),transition_out(f,1,1,(()=>{f=null})),check_outros()),g===t[6]&&d===t[7]||(m(),g=t[6],d=t[7],y())},i(e){s||(transition_in(f),s=!0)},o(e){transition_out(f),s=!1},d(e){e&&detach(r),f&&f.d(),m(),l=!1,run_all(u)}}}function create_fragment$4(e){let t,r,n=[],o=new Map,i=e[0];const a=e=>e[5].header;for(let t=0;t<i.length;t+=1){let r=get_each_context(e,i,t),s=a(r);o.set(s,n[t]=create_each_block(s,r))}return{c(){t=element$1("div");for(let e=0;e<n.length;e+=1)n[e].c();attr(t,"class","sidebar svelte-qngs79")},m(e,o){insert(e,t,o);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null);r=!0},p(e,[r]){3&r&&(i=e[0],group_outros(),n=update_keyed_each(n,r,a,1,e,i,o,t,outro_and_destroy_block,create_each_block,null,get_each_context),check_outros())},i(e){if(!r){for(let e=0;e<i.length;e+=1)transition_in(n[e]);r=!0}},o(e){for(let e=0;e<n.length;e+=1)transition_out(n[e]);r=!1},d(e){e&&detach(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function instance$3(e,t,r){onMount((()=>{console.log("Sidebar mounted")}));let n=[{header:"Create a New Node",component:NewNode,open:!1},{header:"Modify Node",component:ModifyNode,open:!1},{header:"Execute Process",component:ExecuteNode,open:!1}];function o(e){r(0,n=n.map((t=>{if(t===e){let e=!t.open;return{...t,open:e}}return t})))}return[n,o,(e,t)=>{"Enter"===t.key&&o(e)},e=>o(e),function(e,t,o){binding_callbacks[e?"unshift":"push"]((()=>{t[o].ref=e,r(0,n)}))}]}class Sidebar extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$4,safe_not_equal,{})}}function isObject$4(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject$4,freeGlobal$1="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$3=freeGlobal||freeSelf||Function("return this")(),_root=root$3,root$2=_root,now$1=function(){return root$2.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,""):e}var _baseTrim=baseTrim$1,root$1=_root,Symbol$4=root$1.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,nativeObjectToString$1=objectProto$5.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty$4.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var n=!0}catch(e){}var o=nativeObjectToString$1.call(e);return n&&(t?e[symToStringTag$1]=r:delete e[symToStringTag$1]),o}var _getRawTag=getRawTag$1,objectProto$4=Object.prototype,nativeObjectToString=objectProto$4.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$1(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$5(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol$5,baseTrim=_baseTrim,isObject$3=isObject_1,isSymbol$4=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol$4(e))return NAN;if(isObject$3(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$3(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,isObject$2=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(e,t,r){var n,o,i,a,s,l,u=0,c=!1,g=!1,d=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);function p(t){var r=n,i=o;return n=o=void 0,u=t,a=e.apply(i,r)}function h(e){var r=e-l;return void 0===l||r>=t||r<0||g&&e-u>=i}function f(){var e=now();if(h(e))return y(e);s=setTimeout(f,function(e){var r=t-(e-l);return g?nativeMin(r,i-(e-u)):r}(e))}function y(e){return s=void 0,d&&n?p(e):(n=o=void 0,a)}function m(){var e=now(),r=h(e);if(n=arguments,o=this,l=e,r){if(void 0===s)return function(e){return u=e,s=setTimeout(f,t),c?p(e):a}(l);if(g)return clearTimeout(s),s=setTimeout(f,t),p(l)}return void 0===s&&(s=setTimeout(f,t)),a}return t=toNumber(t)||0,isObject$2(r)&&(c=!!r.leading,i=(g="maxWait"in r)?nativeMax(toNumber(r.maxWait)||0,t):i,d="trailing"in r?!!r.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=o=s=void 0},m.flush=function(){return void 0===s?a:y(now())},m}var debounce_1=debounce$1,heap$1={exports:{}},module;heap$1.exports,module=heap$1,heap$1.exports,function(){var e,t,r,n,o,i,a,s,l,u,c,g,d,p,h;r=Math.floor,u=Math.min,t=function(e,t){return e<t?-1:e>t?1:0},l=function(e,n,o,i,a){var s;if(null==o&&(o=0),null==a&&(a=t),o<0)throw new Error("lo must be non-negative");for(null==i&&(i=e.length);o<i;)a(n,e[s=r((o+i)/2)])<0?i=s:o=s+1;return[].splice.apply(e,[o,o-o].concat(n)),n},i=function(e,r,n){return null==n&&(n=t),e.push(r),p(e,0,e.length-1,n)},o=function(e,r){var n,o;return null==r&&(r=t),n=e.pop(),e.length?(o=e[0],e[0]=n,h(e,0,r)):o=n,o},s=function(e,r,n){var o;return null==n&&(n=t),o=e[0],e[0]=r,h(e,0,n),o},a=function(e,r,n){var o;return null==n&&(n=t),e.length&&n(e[0],r)<0&&(r=(o=[e[0],r])[0],e[0]=o[1],h(e,0,n)),r},n=function(e,n){var o,i,a,s,l,u;for(null==n&&(n=t),l=[],i=0,a=(s=function(){u=[];for(var t=0,n=r(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}.apply(this).reverse()).length;i<a;i++)o=s[i],l.push(h(e,o,n));return l},d=function(e,r,n){var o;if(null==n&&(n=t),-1!==(o=e.indexOf(r)))return p(e,0,o,n),h(e,o,n)},c=function(e,r,o){var i,s,l,u,c;if(null==o&&(o=t),!(s=e.slice(0,r)).length)return s;for(n(s,o),l=0,u=(c=e.slice(r)).length;l<u;l++)i=c[l],a(s,i,o);return s.sort(o).reverse()},g=function(e,r,i){var a,s,c,g,d,p,h,f,y;if(null==i&&(i=t),10*r<=e.length){if(!(c=e.slice(0,r).sort(i)).length)return c;for(s=c[c.length-1],g=0,p=(h=e.slice(r)).length;g<p;g++)i(a=h[g],s)<0&&(l(c,a,0,null,i),c.pop(),s=c[c.length-1]);return c}for(n(e,i),y=[],d=0,f=u(r,e.length);0<=f?d<f:d>f;0<=f?++d:--d)y.push(o(e,i));return y},p=function(e,r,n,o){var i,a,s;for(null==o&&(o=t),i=e[n];n>r&&o(i,a=e[s=n-1>>1])<0;)e[n]=a,n=s;return e[n]=i},h=function(e,r,n){var o,i,a,s,l;for(null==n&&(n=t),i=e.length,l=r,a=e[r],o=2*r+1;o<i;)(s=o+1)<i&&!(n(e[o],e[s])<0)&&(o=s),e[r]=e[o],o=2*(r=o)+1;return e[r]=a,p(e,l,r,n)},e=function(){function e(e){this.cmp=null!=e?e:t,this.nodes=[]}return e.push=i,e.pop=o,e.replace=s,e.pushpop=a,e.heapify=n,e.updateItem=d,e.nlargest=c,e.nsmallest=g,e.prototype.push=function(e){return i(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return a(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return n(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),module.exports=e}.call(commonjsGlobal);var heapExports=heap$1.exports,heap=heapExports,isArray$4=Array.isArray,isArray_1=isArray$4,isArray$3=isArray_1,isSymbol$3=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$1(e,t){if(isArray$3(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol$3(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey$1,isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var e=_baseGetTag,t=isObject_1;return isFunction_1=function(r){if(!t(r))return!1;var n=e(r);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}}var root=_root,coreJsData$1=root["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:""),uid;function isMasked$1(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked$1,_toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var e=Function.prototype.toString;return _toSource=function(t){if(null!=t){try{return e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}}var isFunction=requireIsFunction(),isMasked=_isMasked,isObject$1=isObject_1,toSource=require_toSource(),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$3=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$3.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$3).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(e){return!(!isObject$1(e)||isMasked(e))&&(isFunction(e)?reIsNative:reIsHostCtor).test(toSource(e))}var _baseIsNative=baseIsNative$1;function getValue$2(e,t){return null==e?void 0:e[t]}var _getValue=getValue$2,baseIsNative=_baseIsNative,getValue$1=_getValue;function getNative$2(e,t){var r=getValue$1(e,t);return baseIsNative(r)?r:void 0}var _getNative=getNative$2,getNative$1=_getNative,nativeCreate$4=getNative$1(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function hashGet$1(e){var t=this.__data__;if(nativeCreate$2){var r=t[e];return r===HASH_UNDEFINED$1?void 0:r}return hasOwnProperty$2.call(t,e)?t[e]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function hashHas$1(e){var t=this.__data__;return nativeCreate$1?void 0!==t[e]:hasOwnProperty$1.call(t,e)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet$1(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash$1.prototype.clear=hashClear,Hash$1.prototype.delete=hashDelete,Hash$1.prototype.get=hashGet,Hash$1.prototype.has=hashHas,Hash$1.prototype.set=hashSet;var _Hash=Hash$1,_listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;return hasRequired_listCacheClear=1,_listCacheClear=function(){this.__data__=[],this.size=0}}function eq$1(e,t){return e===t||e!=e&&t!=t}var eq_1=eq$1,_assocIndexOf,hasRequired_assocIndexOf,_listCacheDelete,hasRequired_listCacheDelete,_listCacheGet,hasRequired_listCacheGet,_listCacheHas,hasRequired_listCacheHas,_listCacheSet,hasRequired_listCacheSet,_ListCache,hasRequired_ListCache,_Map,hasRequired_Map;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var e=eq_1;return _assocIndexOf=function(t,r){for(var n=t.length;n--;)if(e(t[n][0],r))return n;return-1},_assocIndexOf}function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var e=require_assocIndexOf(),t=Array.prototype.splice;return _listCacheDelete=function(r){var n=this.__data__,o=e(n,r);return!(o<0)&&(o==n.length-1?n.pop():t.call(n,o,1),--this.size,!0)},_listCacheDelete}function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var e=require_assocIndexOf();return _listCacheGet=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]},_listCacheGet}function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var e=require_assocIndexOf();return _listCacheHas=function(t){return e(this.__data__,t)>-1}}function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var e=require_assocIndexOf();return _listCacheSet=function(t,r){var n=this.__data__,o=e(n,t);return o<0?(++this.size,n.push([t,r])):n[o][1]=r,this},_listCacheSet}function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var e=require_listCacheClear(),t=require_listCacheDelete(),r=require_listCacheGet(),n=require_listCacheHas(),o=require_listCacheSet();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=o,_ListCache=i}function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var e=_getNative(_root,"Map");return _Map=e}var Hash=_Hash,ListCache=require_ListCache(),Map$2=require_Map();function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(e){var t=getMapData$3(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(e){return getMapData$2(this,e).get(e)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(e){return getMapData$1(this,e).has(e)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(e,t){var r=getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$1(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache$1.prototype.clear=mapCacheClear,MapCache$1.prototype.delete=mapCacheDelete,MapCache$1.prototype.get=mapCacheGet,MapCache$1.prototype.has=mapCacheHas,MapCache$1.prototype.set=mapCacheSet;var _MapCache=MapCache$1,MapCache=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$2(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(memoize$2.Cache||MapCache),r}memoize$2.Cache=MapCache;var memoize_1=memoize$2,memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(e){var t=memoize$1(e,(function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e})),r=t.cache;return t}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$2=memoizeCapped((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,(function(e,r,n,o){t.push(n?o.replace(reEscapeChar,"$1"):r||e)})),t})),_stringToPath=stringToPath$2;function arrayMap$2(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var _arrayMap=arrayMap$2,Symbol$1=_Symbol,arrayMap$1=_arrayMap,isArray$2=isArray_1,isSymbol$2=isSymbol_1,INFINITY$1=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$1(e){if("string"==typeof e)return e;if(isArray$2(e))return arrayMap$1(e,baseToString$1)+"";if(isSymbol$2(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$3(e){return null==e?"":baseToString(e)}var toString_1=toString$3,isArray$1=isArray_1,isKey=_isKey,stringToPath$1=_stringToPath,toString$2=toString_1;function castPath$2(e,t){return isArray$1(e)?e:isKey(e,t)?[e]:stringToPath$1(toString$2(e))}var _castPath=castPath$2,isSymbol$1=isSymbol_1,INFINITY=1/0;function toKey$3(e){if("string"==typeof e||isSymbol$1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}var _toKey=toKey$3,castPath$1=_castPath,toKey$2=_toKey;function baseGet$1(e,t){for(var r=0,n=(t=castPath$1(t,e)).length;null!=e&&r<n;)e=e[toKey$2(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet$1,baseGet=_baseGet;function get$1(e,t,r){var n=null==e?void 0:baseGet(e,t);return void 0===n?r:n}var get_1=get$1,getNative=_getNative,defineProperty$1=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty$1=defineProperty$1,defineProperty=_defineProperty$1;function baseAssignValue$1(e,t,r){"__proto__"==t&&defineProperty?defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue$1,baseAssignValue=_baseAssignValue,eq=eq_1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function assignValue$1(e,t,r){var n=e[t];hasOwnProperty.call(e,t)&&eq(n,r)&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}var _assignValue=assignValue$1,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex$1,assignValue=_assignValue,castPath=_castPath,isIndex=_isIndex,isObject=isObject_1,toKey$1=_toKey;function baseSet$1(e,t,r,n){if(!isObject(e))return e;for(var o=-1,i=(t=castPath(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=toKey$1(t[o]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=isObject(c)?c:isIndex(t[o+1])?[]:{})}assignValue(s,l,u),s=s[l]}return e}var _baseSet=baseSet$1,baseSet=_baseSet;function set$1(e,t,r){return null==e?e:baseSet(e,t,r)}var set_1=set$1;function copyArray$2(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _copyArray=copyArray$2,arrayMap=_arrayMap,copyArray$1=_copyArray,isArray=isArray_1,isSymbol=isSymbol_1,stringToPath=_stringToPath,toKey=_toKey,toString$1=toString_1;function toPath$1(e){return isArray(e)?arrayMap(e,toKey):isSymbol(e)?[e]:copyArray$1(stringToPath(toString$1(e)))}var toPath_1=toPath$1,debounce=debounce_1,Heap=heap,get=get_1,set=set_1,toPath=toPath_1;function _interopDefaultLegacy$1(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var debounce__default=_interopDefaultLegacy$1(debounce),Heap__default=_interopDefaultLegacy$1(Heap),get__default=_interopDefaultLegacy$1(get),set__default=_interopDefaultLegacy$1(set),toPath__default=_interopDefaultLegacy$1(toPath);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var window$1="undefined"==typeof window?null:window,navigator=window$1?window$1.navigator:null;window$1&&window$1.document;var typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof((function(){})),typeofhtmlele="undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement),instanceStr=function(e){return e&&e.instanceString&&fn$6(e.instanceString)?e.instanceString():null},string=function(e){return null!=e&&_typeof(e)==typeofstr},fn$6=function(e){return null!=e&&_typeof(e)===typeoffn},array=function(e){return!elementOrCollection(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},plainObject=function(e){return null!=e&&_typeof(e)===typeofobj&&!array(e)&&e.constructor===Object},object=function(e){return null!=e&&_typeof(e)===typeofobj},number$1=function(e){return null!=e&&_typeof(e)===_typeof(1)&&!isNaN(e)},integer=function(e){return number$1(e)&&Math.floor(e)===e},htmlElement=function(e){return"undefined"===typeofhtmlele?void 0:null!=e&&e instanceof HTMLElement},elementOrCollection=function(e){return element(e)||collection(e)},element=function(e){return"collection"===instanceStr(e)&&e._private.single},collection=function(e){return"collection"===instanceStr(e)&&!e._private.single},core=function(e){return"core"===instanceStr(e)},stylesheet=function(e){return"stylesheet"===instanceStr(e)},event=function(e){return"event"===instanceStr(e)},emptyString=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},domElement=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement},boundingBox=function(e){return plainObject(e)&&number$1(e.x1)&&number$1(e.x2)&&number$1(e.y1)&&number$1(e.y2)},promise=function(e){return object(e)&&fn$6(e.then)},ms=function(){return navigator&&navigator.userAgent.match(/msie|trident|edge/i)},memoize=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var r=function r(){var n,o=arguments,i=t.apply(this,o),a=r.cache;return(n=a[i])||(n=a[i]=e.apply(this,o)),n};return r.cache={},r},camel2dash=memoize((function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),dash2camel=memoize((function(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),prependCamel=memoize((function(e,t){return e+t[0].toUpperCase()+t.substring(1)}),(function(e,t){return e+"$"+t})),capitalize=function(e){return emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},number="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number+"[%]?)\\s*,\\s*("+number+"[%]?)\\s*,\\s*("+number+"[%]?)(?:\\s*,\\s*("+number+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number+"[%]?)\\s*,\\s*(?:"+number+"[%]?)\\s*,\\s*(?:"+number+"[%]?)(?:\\s*,\\s*(?:"+number+"))?\\)",hsla="hsl[a]?\\(("+number+")\\s*,\\s*("+number+"[%])\\s*,\\s*("+number+"[%])(?:\\s*,\\s*("+number+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number+")\\s*,\\s*(?:"+number+"[%])\\s*,\\s*(?:"+number+"[%])(?:\\s*,\\s*(?:"+number+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function(e,t){return e<t?-1:e>t?1:0},descending=function(e,t){return-1*ascending(e,t)},extend=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var n=t[r];if(null!=n)for(var o=Object.keys(n),i=0;i<o.length;i++){var a=o[i];e[a]=n[a]}}return e},hex2tuple=function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n,o=16;return 4===e.length?(t=parseInt(e[1]+e[1],o),r=parseInt(e[2]+e[2],o),n=parseInt(e[3]+e[3],o)):(t=parseInt(e[1]+e[2],o),r=parseInt(e[3]+e[4],o),n=parseInt(e[5]+e[6],o)),[t,r,n]}},hsl2tuple=function(e){var t,r,n,o,i,a,s,l;function u(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var c=new RegExp("^"+hsla+"$").exec(e);if(c){if((r=parseInt(c[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(n=parseFloat(c[2]))<0||n>100)return;if(n/=100,(o=parseFloat(c[3]))<0||o>100)return;if(o/=100,void 0!==(i=c[4])&&((i=parseFloat(i))<0||i>1))return;if(0===n)a=s=l=Math.round(255*o);else{var g=o<.5?o*(1+n):o+n-o*n,d=2*o-g;a=Math.round(255*u(d,g,r+1/3)),s=Math.round(255*u(d,g,r)),l=Math.round(255*u(d,g,r-1/3))}t=[a,s,l,i]}return t},rgb2tuple=function(e){var t,r=new RegExp("^"+rgba+"$").exec(e);if(r){t=[];for(var n=[],o=1;o<=3;o++){var i=r[o];if("%"===i[i.length-1]&&(n[o]=!0),i=parseFloat(i),n[o]&&(i=i/100*255),i<0||i>255)return;t.push(Math.floor(i))}var a=n[1]||n[2]||n[3],s=n[1]&&n[2]&&n[3];if(a&&!s)return;var l=r[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t},colorname2tuple=function(e){return colors[e.toLowerCase()]},color2tuple=function(e){return(array(e)?e:null)||colorname2tuple(e)||hex2tuple(e)||rgb2tuple(e)||hsl2tuple(e)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(e){for(var t=e.map,r=e.keys,n=r.length,o=0;o<n;o++){var i=r[o];if(plainObject(i))throw Error("Tried to set map with object key");o<r.length-1?(null==t[i]&&(t[i]={}),t=t[i]):t[i]=e.value}},getMap=function(e){for(var t=e.map,r=e.keys,n=r.length,o=0;o<n;o++){var i=r[o];if(plainObject(i))throw Error("Tried to get map with object key");if(null==(t=t[i]))return t}return t},performance=window$1?window$1.performance:null,pnow=performance&&performance.now?function(){return performance.now()}:function(){return Date.now()},raf=function(){if(window$1){if(window$1.requestAnimationFrame)return function(e){window$1.requestAnimationFrame(e)};if(window$1.mozRequestAnimationFrame)return function(e){window$1.mozRequestAnimationFrame(e)};if(window$1.webkitRequestAnimationFrame)return function(e){window$1.webkitRequestAnimationFrame(e)};if(window$1.msRequestAnimationFrame)return function(e){window$1.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout((function(){e(pnow())}),1e3/60)}}(),requestAnimationFrame$1=function(e){return raf(e)},performanceNow=pnow,DEFAULT_HASH_SEED=9261,K=65599,DEFAULT_HASH_SEED_ALT=5381,hashIterableInts=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_HASH_SEED;!(t=e.next()).done;)r=r*K+t.value|0;return r},hashInt=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_HASH_SEED)*K+e|0},hashIntAlt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_HASH_SEED_ALT;return(t<<5)+t+e|0},combineHashes=function(e,t){return 2097152*e+t},combineHashesArray=function(e){return 2097152*e[0]+e[1]},hashArrays=function(e,t){return[hashInt(e[0],t[0]),hashIntAlt(e[1],t[1])]},hashIntsArray=function(e,t){var r={value:0,done:!1},n=0,o=e.length;return hashIterableInts({next:function(){return n<o?r.value=e[n++]:r.done=!0,r}},t)},hashString=function(e,t){var r={value:0,done:!1},n=0,o=e.length;return hashIterableInts({next:function(){return n<o?r.value=e.charCodeAt(n++):r.done=!0,r}},t)},hashStrings=function(){return hashStringsArray(arguments)},hashStringsArray=function(e){for(var t,r=0;r<e.length;r++){var n=e[r];t=0===r?hashString(n):hashString(n,t)}return t},warningsEnabled=!0,warnSupported=null!=console.warn,traceSupported=null!=console.trace,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop$1=function(){},error=function(e){throw new Error(e)},warnings=function(e){if(void 0===e)return warningsEnabled;warningsEnabled=!!e},warn=function(e){warnings()&&(warnSupported?console.warn(e):(console.log(e),traceSupported&&console.trace()))},clone=function(e){return extend({},e)},copy=function(e){return null==e?e:array(e)?e.slice():plainObject(e)?clone(e):e},copyArray=function(e){return e.slice()},uuid=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},_staticEmptyObject={},staticEmptyObject=function(){return _staticEmptyObject},defaults$g=function(e){var t=Object.keys(e);return function(r){for(var n={},o=0;o<t.length;o++){var i=t[o],a=null==r?void 0:r[i];n[i]=void 0===a?e[i]:a}return n}},removeFromArray=function(e,t,r){for(var n=e.length-1;n>=0&&(e[n]!==t||(e.splice(n,1),!r));n--);},clearArray=function(e){e.splice(0,e.length)},push=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.push(n)}},getPrefixedProperty=function(e,t,r){return r&&(t=prependCamel(r,t)),e[t]},setPrefixedProperty=function(e,t,r,n){r&&(t=prependCamel(r,t)),e[t]=n},ObjectMap=function(){function e(){_classCallCheck(this,e),this._obj={}}return _createClass(e,[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),e}(),Map$1="undefined"!=typeof Map?Map:ObjectMap,undef="undefined",ObjectSet=function(){function e(t){if(_classCallCheck(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var n=0;n<r.length;n++)this.add(r[n])}}return _createClass(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter((function(t){return e.has(t)}))}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),e}(),Set$1=("undefined"==typeof Set?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&core(e)){var n=t.group;if(null==n&&(n=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===n||"edges"===n){this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===n:!!t.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==o.position.x&&(o.position.x=0),null==o.position.y&&(o.position.y=0),t.renderedPosition){var i=t.renderedPosition,a=e.pan(),s=e.zoom();o.position={x:(i.x-a.x)/s,y:(i.y-a.y)/s}}var l=[];array(t.classes)?l=t.classes:string(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var g=l[u];g&&""!==g&&o.classes.add(g)}this.createEmitter();var d=t.style||t.css;d&&(warn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d)),(void 0===r||r)&&this.restore()}else error("An element must be of type `nodes` or `edges`; you specified `"+n+"`")}else error("An element must have a core reference and parameters set")},defineSearch=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,r,n){var o;plainObject(t)&&!elementOrCollection(t)&&(t=(o=t).roots||o.root,r=o.visit,n=o.directed),n=2!==arguments.length||fn$6(r)?n:r,r=fn$6(r)?r:function(){};for(var i,a=this._private.cy,s=t=string(t)?this.filter(t):t,l=[],u=[],c={},g={},d={},p=0,h=this.byGroup(),f=h.nodes,y=h.edges,m=0;m<s.length;m++){var b=s[m],_=b.id();b.isNode()&&(l.unshift(b),e.bfs&&(d[_]=!0,u.push(b)),g[_]=0)}for(var v=function(){var t=e.bfs?l.shift():l.pop(),o=t.id();if(e.dfs){if(d[o])return"continue";d[o]=!0,u.push(t)}var a,s=g[o],h=c[o],m=null!=h?h.source():null,b=null!=h?h.target():null,_=null==h?void 0:t.same(m)?b[0]:m[0];if(!0===(a=r(t,h,_,p++,s)))return i=t,"break";if(!1===a)return"break";for(var v=t.connectedEdges().filter((function(e){return(!n||e.source().same(t))&&y.has(e)})),S=0;S<v.length;S++){var E=v[S],w=E.connectedNodes().filter((function(e){return!e.same(t)&&f.has(e)})),x=w.id();0===w.length||d[x]||(w=w[0],l.push(w),e.bfs&&(d[x]=!0,u.push(w)),c[x]=E,g[x]=g[o]+1)}};0!==l.length;){var S=v();if("continue"!==S&&"break"===S)break}for(var E=a.collection(),w=0;w<u.length;w++){var x=u[w],T=c[x.id()];null!=T&&E.push(T),E.push(x)}return{path:a.collection(E),found:a.collection(i)}}},elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn$v.bfs=elesfn$v.breadthFirstSearch,elesfn$v.dfs=elesfn$v.depthFirstSearch;var dijkstraDefaults=defaults$g({root:null,weight:function(e){return 1},directed:!1}),elesfn$u={dijkstra:function(e){if(!plainObject(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=dijkstraDefaults(e),n=r.root,o=r.weight,i=r.directed,a=this,s=o,l=string(n)?this.filter(n)[0]:n[0],u={},c={},g={},d=this.byGroup(),p=d.nodes,h=d.edges;h.unmergeBy((function(e){return e.isLoop()}));for(var f=function(e){return u[e.id()]},y=function(e,t){u[e.id()]=t,m.updateItem(e)},m=new Heap__default.default((function(e,t){return f(e)-f(t)})),b=0;b<p.length;b++){var _=p[b];u[_.id()]=_.same(l)?0:1/0,m.push(_)}for(var v=function(e,t){for(var r,n=(i?e.edgesTo(t):e.edgesWith(t)).intersect(h),o=1/0,a=0;a<n.length;a++){var l=n[a],u=s(l);(u<o||!r)&&(o=u,r=l)}return{edge:r,dist:o}};m.size()>0;){var S=m.pop(),E=f(S),w=S.id();if(g[w]=E,E!==1/0)for(var x=S.neighborhood().intersect(p),T=0;T<x.length;T++){var R=x[T],A=R.id(),j=v(S,R),C=E+j.dist;C<f(R)&&(y(R,C),c[A]={node:S,edge:j.edge})}}return{distanceTo:function(e){var t=string(e)?p.filter(e)[0]:e[0];return g[t.id()]},pathTo:function(e){var t=string(e)?p.filter(e)[0]:e[0],r=[],n=t,o=n.id();if(t.length>0)for(r.unshift(t);c[o];){var i=c[o];r.unshift(i.edge),r.unshift(i.node),o=(n=i.node).id()}return a.spawn(r)}}}},elesfn$t={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),r=t.nodes,n=t.edges,o=r.length,i=new Array(o),a=r,s=function(e){for(var t=0;t<i.length;t++){if(i[t].has(e))return t}},l=0;l<o;l++)i[l]=this.spawn(r[l]);for(var u=n.sort((function(t,r){return e(t)-e(r)})),c=0;c<u.length;c++){var g=u[c],d=g.source()[0],p=g.target()[0],h=s(d),f=s(p),y=i[h],m=i[f];h!==f&&(a.merge(g),y.merge(m),i.splice(f,1))}return a}},aStarDefaults=defaults$g({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),elesfn$s={aStar:function(e){var t=this.cy(),r=aStarDefaults(e),n=r.root,o=r.goal,i=r.heuristic,a=r.directed,s=r.weight;n=t.collection(n)[0],o=t.collection(o)[0];var l,u,c=n.id(),g=o.id(),d={},p={},h={},f=new Heap__default.default((function(e,t){return p[e.id()]-p[t.id()]})),y=new Set$1,m={},b={},_=function(e,t){f.push(e),y.add(t)};_(n,c),d[c]=0,p[c]=i(n);for(var v,S=0;f.size()>0;){if(l=f.pop(),u=l.id(),y.delete(u),S++,u===g){for(var E=[],w=o,x=g,T=b[x];E.unshift(w),null!=T&&E.unshift(T),null!=(w=m[x]);)T=b[x=w.id()];return{found:!0,distance:d[u],path:this.spawn(E),steps:S}}h[u]=!0;for(var R=l._private.edges,A=0;A<R.length;A++){var j=R[A];if(this.hasElementWithId(j.id())&&(!a||j.data("source")===u)){var C=j.source(),P=j.target(),I=C.id()!==u?C:P,M=I.id();if(this.hasElementWithId(M)&&!h[M]){var O=d[u]+s(j);v=M,y.has(v)?O<d[M]&&(d[M]=O,p[M]=O+i(I),m[M]=l,b[M]=j):(d[M]=O,p[M]=O+i(I),_(I,M),m[M]=l,b[M]=j)}}}}return{found:!1,distance:void 0,path:void 0,steps:S}}},floydWarshallDefaults=defaults$g({weight:function(e){return 1},directed:!1}),elesfn$r={floydWarshall:function(e){for(var t=this.cy(),r=floydWarshallDefaults(e),n=r.weight,o=r.directed,i=n,a=this.byGroup(),s=a.nodes,l=a.edges,u=s.length,c=u*u,g=function(e){return s.indexOf(e)},d=function(e){return s[e]},p=new Array(c),h=0;h<c;h++){var f=h%u,y=(h-f)/u;p[h]=y===f?0:1/0}for(var m=new Array(c),b=new Array(c),_=0;_<l.length;_++){var v=l[_],S=v.source()[0],E=v.target()[0];if(S!==E){var w=g(S),x=g(E),T=w*u+x,R=i(v);if(p[T]>R&&(p[T]=R,m[T]=x,b[T]=v),!o){var A=x*u+w;!o&&p[A]>R&&(p[A]=R,m[A]=w,b[A]=v)}}}for(var j=0;j<u;j++)for(var C=0;C<u;C++)for(var P=C*u+j,I=0;I<u;I++){var M=C*u+I,O=j*u+I;p[P]+p[O]<p[M]&&(p[M]=p[P]+p[O],m[M]=m[P])}var B=function(e){return g(function(e){return(string(e)?t.filter(e):e)[0]}(e))},N={distance:function(e,t){var r=B(e),n=B(t);return p[r*u+n]},path:function(e,r){var n=B(e),o=B(r),i=d(n);if(n===o)return i.collection();if(null==m[n*u+o])return t.collection();var a,s=t.collection(),l=n;for(s.merge(i);n!==o;)l=n,n=m[n*u+o],a=b[l*u+n],s.merge(a),s.merge(d(n));return s}};return N}},bellmanFordDefaults=defaults$g({weight:function(e){return 1},directed:!1,root:null}),elesfn$q={bellmanFord:function(e){var t=this,r=bellmanFordDefaults(e),n=r.weight,o=r.directed,i=r.root,a=n,s=this,l=this.cy(),u=this.byGroup(),c=u.edges,g=u.nodes,d=g.length,p=new Map$1,h=!1,f=[];i=l.collection(i)[0],c.unmergeBy((function(e){return e.isLoop()}));for(var y=c.length,m=function(e){var t=p.get(e.id());return t||(t={},p.set(e.id(),t)),t},b=function(e){return(string(e)?l.$(e):e)[0]},_=0;_<d;_++){var v=g[_],S=m(v);v.same(i)?S.dist=0:S.dist=1/0,S.pred=null,S.edge=null}for(var E=!1,w=function(e,t,r,n,o,i){var a=n.dist+i;a<o.dist&&!r.same(n.edge)&&(o.dist=a,o.pred=e,o.edge=r,E=!0)},x=1;x<d;x++){E=!1;for(var T=0;T<y;T++){var R=c[T],A=R.source(),j=R.target(),C=a(R),P=m(A),I=m(j);w(A,0,R,P,I,C),o||w(j,0,R,I,P,C)}if(!E)break}if(E)for(var M=[],O=0;O<y;O++){var B=c[O],N=B.source(),k=B.target(),D=a(B),q=m(N).dist,$=m(k).dist;if(q+D<$||!o&&$+D<q){if(h||(warn("Graph contains a negative weight cycle for Bellman-Ford"),h=!0),!1===e.findNegativeWeightCycles)break;var F=[];q+D<$&&F.push(N),!o&&$+D<q&&F.push(k);for(var L=F.length,U=0;U<L;U++){var W=F[U],z=[W];z.push(m(W).edge);for(var V=m(W).pred;-1===z.indexOf(V);)z.push(V),z.push(m(V).edge),V=m(V).pred;for(var H=(z=z.slice(z.indexOf(V)))[0].id(),G=0,K=2;K<z.length;K+=2)z[K].id()<H&&(H=z[K].id(),G=K);(z=z.slice(G).concat(z.slice(0,G))).push(z[0]);var Y=z.map((function(e){return e.id()})).join(",");-1===M.indexOf(Y)&&(f.push(s.spawn(z)),M.push(Y))}}}return{distanceTo:function(e){return m(b(e)).dist},pathTo:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=[],o=b(e);;){if(null==o)return t.spawn();var a=m(o),l=a.edge,u=a.pred;if(n.unshift(o[0]),o.same(r)&&n.length>0)break;null!=l&&n.unshift(l),o=u}return s.spawn(n)},hasNegativeWeightCycle:h,negativeWeightCycles:f}}},sqrt2=Math.sqrt(2),collapse=function(e,t,r){0===r.length&&error("Karger-Stein must be run on a connected (sub)graph");for(var n=r[e],o=n[1],i=n[2],a=t[o],s=t[i],l=r,u=l.length-1;u>=0;u--){var c=l[u],g=c[1],d=c[2];(t[g]===a&&t[d]===s||t[g]===s&&t[d]===a)&&l.splice(u,1)}for(var p=0;p<l.length;p++){var h=l[p];h[1]===s?(l[p]=h.slice(),l[p][1]=a):h[2]===s&&(l[p]=h.slice(),l[p][2]=a)}for(var f=0;f<t.length;f++)t[f]===s&&(t[f]=a);return l},contractUntil=function(e,t,r,n){for(;r>n;){var o=Math.floor(Math.random()*t.length);t=collapse(o,e,t),r--}return t},elesfn$p={kargerStein:function(){var e=this,t=this.byGroup(),r=t.nodes,n=t.edges;n.unmergeBy((function(e){return e.isLoop()}));var o=r.length,i=n.length,a=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),s=Math.floor(o/sqrt2);if(!(o<2)){for(var l=[],u=0;u<i;u++){var c=n[u];l.push([u,r.indexOf(c.source()),r.indexOf(c.target())])}for(var g=1/0,d=[],p=new Array(o),h=new Array(o),f=new Array(o),y=function(e,t){for(var r=0;r<o;r++)t[r]=e[r]},m=0;m<=a;m++){for(var b=0;b<o;b++)h[b]=b;var _=contractUntil(h,l.slice(),o,s),v=_.slice();y(h,f);var S=contractUntil(h,_,s,2),E=contractUntil(f,v,s,2);S.length<=E.length&&S.length<g?(g=S.length,d=S,y(h,p)):E.length<=S.length&&E.length<g&&(g=E.length,d=E,y(f,p))}for(var w=this.spawn(d.map((function(e){return n[e[0]]}))),x=this.spawn(),T=this.spawn(),R=p[0],A=0;A<p.length;A++){var j=p[A],C=r[A];j===R?x.merge(C):T.merge(C)}var P=function(t){var r=e.spawn();return t.forEach((function(t){r.merge(t),t.connectedEdges().forEach((function(t){e.contains(t)&&!w.contains(t)&&r.merge(t)}))})),r},I=[P(x),P(T)];return{cut:w,components:I,partition1:x,partition2:T}}error("At least 2 nodes are required for Karger-Stein algorithm")}},copyPosition=function(e){return{x:e.x,y:e.y}},modelToRenderedPosition=function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}},renderedToModelPosition=function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}},array2point=function(e){return{x:e[0],y:e[1]}},min=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=1/0,o=t;o<r;o++){var i=e[o];isFinite(i)&&(n=Math.min(i,n))}return n},max=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=-1/0,o=t;o<r;o++){var i=e[o];isFinite(i)&&(n=Math.max(i,n))}return n},mean=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=0,o=0,i=t;i<r;i++){var a=e[i];isFinite(a)&&(n+=a,o++)}return n/o},median=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?e=e.slice(t,r):(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t));for(var i=0,a=e.length-1;a>=0;a--){var s=e[a];o?isFinite(s)||(e[a]=-1/0,i++):e.splice(a,1)}n&&e.sort((function(e,t){return e-t}));var l=e.length,u=Math.floor(l/2);return l%2!=0?e[u+1+i]:(e[u-1+i]+e[u+i])/2},deg2rad=function(e){return Math.PI*e/180},getAngleFromDisp=function(e,t){return Math.atan2(t,e)-Math.PI/2},log2=Math.log2||function(e){return Math.log(e)/Math.log(2)},signum=function(e){return e>0?1:e<0?-1:0},dist=function(e,t){return Math.sqrt(sqdist(e,t))},sqdist=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},inPlaceSumNormalize=function(e){for(var t=e.length,r=0,n=0;n<t;n++)r+=e[n];for(var o=0;o<t;o++)e[o]=e[o]/r;return e},qbezierAt=function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r},qbezierPtAt=function(e,t,r,n){return{x:qbezierAt(e.x,t.x,r.x,n),y:qbezierAt(e.y,t.y,r.y,n)}},lineAt=function(e,t,r,n){var o=t.x-e.x,i=t.y-e.y,a=dist(e,t),s=o/a,l=i/a;return r=null==r?0:r,n=null!=n?n:r*a,{x:e.x+s*n,y:e.y+l*n}},bound=function(e,t,r){return Math.max(e,Math.min(r,t))},makeBoundingBox=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},copyBoundingBox=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},clearBoundingBox=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},updateBoundingBox=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},expandBoundingBoxByPoint=function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},expandBoundingBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},expandBoundingBoxSides=function(e){var t,r,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===i.length)t=r=n=o=i[0];else if(2===i.length)t=n=i[0],o=r=i[1];else if(4===i.length){var a=_slicedToArray(i,4);t=a[0],r=a[1],n=a[2],o=a[3]}return e.x1-=o,e.x2+=r,e.y1-=t,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},assignBoundingBox=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},boundingBoxesIntersect=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},inBoundingBox=function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2},pointInBoundingBox=function(e,t){return inBoundingBox(e,t.x,t.y)},boundingBoxInBoundingBox=function(e,t){return inBoundingBox(e,t.x1,t.y1)&&inBoundingBox(e,t.x2,t.y2)},roundRectangleIntersectLine=function(e,t,r,n,o,i,a){var s,l=getRoundRectangleRadius(o,i),u=o/2,c=i/2,g=n-c-a;if((s=finiteLinesIntersect(e,t,r,n,r-u+l-a,g,r+u-l+a,g,!1)).length>0)return s;var d=r+u+a;if((s=finiteLinesIntersect(e,t,r,n,d,n-c+l-a,d,n+c-l+a,!1)).length>0)return s;var p=n+c+a;if((s=finiteLinesIntersect(e,t,r,n,r-u+l-a,p,r+u-l+a,p,!1)).length>0)return s;var h,f=r-u-a;if((s=finiteLinesIntersect(e,t,r,n,f,n-c+l-a,f,n+c-l+a,!1)).length>0)return s;var y=r-u+l,m=n-c+l;if((h=intersectLineCircle(e,t,r,n,y,m,l+a)).length>0&&h[0]<=y&&h[1]<=m)return[h[0],h[1]];var b=r+u-l,_=n-c+l;if((h=intersectLineCircle(e,t,r,n,b,_,l+a)).length>0&&h[0]>=b&&h[1]<=_)return[h[0],h[1]];var v=r+u-l,S=n+c-l;if((h=intersectLineCircle(e,t,r,n,v,S,l+a)).length>0&&h[0]>=v&&h[1]>=S)return[h[0],h[1]];var E=r-u+l,w=n+c-l;return(h=intersectLineCircle(e,t,r,n,E,w,l+a)).length>0&&h[0]<=E&&h[1]>=w?[h[0],h[1]]:[]},inLineVicinity=function(e,t,r,n,o,i,a){var s=a,l=Math.min(r,o),u=Math.max(r,o),c=Math.min(n,i),g=Math.max(n,i);return l-s<=e&&e<=u+s&&c-s<=t&&t<=g+s},inBezierVicinity=function(e,t,r,n,o,i,a,s,l){var u=Math.min(r,a,o)-l,c=Math.max(r,a,o)+l,g=Math.min(n,s,i)-l,d=Math.max(n,s,i)+l;return!(e<u||e>c||t<g||t>d)},solveQuadratic=function(e,t,r,n){var o=t*t-4*e*(r-=n);if(o<0)return[];var i=Math.sqrt(o),a=2*e;return[(-t+i)/a,(-t-i)/a]},solveCubic=function(e,t,r,n,o){var i,a,s,l,u,c,g,d;return 0===e&&(e=1e-5),s=-27*(n/=e)+(t/=e)*(9*(r/=e)-t*t*2),i=(a=(3*r-t*t)/9)*a*a+(s/=54)*s,o[1]=0,g=t/3,i>0?(u=(u=s+Math.sqrt(i))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(i))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),o[0]=-g+u+c,g+=(u+c)/2,o[4]=o[2]=-g,g=Math.sqrt(3)*(-c+u)/2,o[3]=g,void(o[5]=-g)):(o[5]=o[3]=0,0===i?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),o[0]=2*d-g,void(o[4]=o[2]=-(d+g))):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),o[0]=-g+d*Math.cos(l/3),o[2]=-g+d*Math.cos((l+2*Math.PI)/3),void(o[4]=-g+d*Math.cos((l+4*Math.PI)/3))))},sqdistToQuadraticBezier=function(e,t,r,n,o,i,a,s){var l=[];solveCubic(1*r*r-4*r*o+2*r*a+4*o*o-4*o*a+a*a+n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s,9*r*o-3*r*r-3*r*a-6*o*o+3*o*a+9*n*i-3*n*n-3*n*s-6*i*i+3*i*s,3*r*r-6*r*o+r*a-r*e+2*o*o+2*o*e-a*e+3*n*n-6*n*i+n*s-n*t+2*i*i+2*i*t-s*t,1*r*o-r*r+r*e-o*e+n*i-n*n+n*t-i*t,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var g,d,p,h=-1,f=0;f<u.length;f++)g=Math.pow(1-u[f],2)*r+2*(1-u[f])*u[f]*o+u[f]*u[f]*a,d=Math.pow(1-u[f],2)*n+2*(1-u[f])*u[f]*i+u[f]*u[f]*s,p=Math.pow(g-e,2)+Math.pow(d-t,2),h>=0?p<h&&(h=p):h=p;return h},sqdistToFiniteLine=function(e,t,r,n,o,i){var a=[e-r,t-n],s=[o-r,i-n],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],g=c*c/l;return c<0?u:g>l?(e-o)*(e-o)+(t-i)*(t-i):u-g},pointInsidePolygonPoints=function(e,t,r){for(var n,o,i,a,s=0,l=0;l<r.length/2;l++)if(n=r[2*l],o=r[2*l+1],l+1<r.length/2?(i=r[2*(l+1)],a=r[2*(l+1)+1]):(i=r[2*(l+1-r.length/2)],a=r[2*(l+1-r.length/2)+1]),n==e&&i==e);else{if(!(n>=e&&e>=i||n<=e&&e<=i))continue;(e-n)/(i-n)*(a-o)+o>t&&s++}return s%2!=0},pointInsidePolygon=function(e,t,r,n,o,i,a,s,l){var u,c=new Array(r.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var g,d=Math.cos(-u),p=Math.sin(-u),h=0;h<c.length/2;h++)c[2*h]=i/2*(r[2*h]*d-r[2*h+1]*p),c[2*h+1]=a/2*(r[2*h+1]*d+r[2*h]*p),c[2*h]+=n,c[2*h+1]+=o;if(l>0){var f=expandPolygon(c,-l);g=joinLines(f)}else g=c;return pointInsidePolygonPoints(e,t,g)},pointInsideRoundPolygon=function(e,t,r,n,o,i,a){for(var s=new Array(r.length),l=i/2,u=a/2,c=getRoundPolygonRadius(i,a),g=c*c,d=0;d<r.length/4;d++){var p,h=void 0;h=0===d?r.length-2:4*d-2,p=4*d+2;var f=n+l*r[4*d],y=o+u*r[4*d+1],m=-r[h]*r[p]-r[h+1]*r[p+1],b=c/Math.tan(Math.acos(m)/2),_=f-b*r[h],v=y-b*r[h+1],S=f+b*r[p],E=y+b*r[p+1];s[4*d]=_,s[4*d+1]=v,s[4*d+2]=S,s[4*d+3]=E;var w=r[h+1],x=-r[h];w*r[p]+x*r[p+1]<0&&(w*=-1,x*=-1);var T=_+w*c,R=v+x*c;if(Math.pow(T-e,2)+Math.pow(R-t,2)<=g)return!0}return pointInsidePolygonPoints(e,t,s)},joinLines=function(e){for(var t,r,n,o,i,a,s,l,u=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],r=e[4*c+1],n=e[4*c+2],o=e[4*c+3],c<e.length/4-1?(i=e[4*(c+1)],a=e[4*(c+1)+1],s=e[4*(c+1)+2],l=e[4*(c+1)+3]):(i=e[0],a=e[1],s=e[2],l=e[3]);var g=finiteLinesIntersect(t,r,n,o,i,a,s,l,!0);u[2*c]=g[0],u[2*c+1]=g[1]}return u},expandPolygon=function(e,t){for(var r,n,o,i,a=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],n=e[2*s+1],s<e.length/2-1?(o=e[2*(s+1)],i=e[2*(s+1)+1]):(o=e[0],i=e[1]);var l=i-n,u=-(o-r),c=Math.sqrt(l*l+u*u),g=l/c,d=u/c;a[4*s]=r+g*t,a[4*s+1]=n+d*t,a[4*s+2]=o+g*t,a[4*s+3]=i+d*t}return a},intersectLineEllipse=function(e,t,r,n,o,i){var a=r-e,s=n-t;a/=o,s/=i;var l=Math.sqrt(a*a+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(r-e)*c+e,(n-t)*c+t]},checkInEllipse=function(e,t,r,n,o,i,a){return e-=o,t-=i,(e/=r/2+a)*e+(t/=n/2+a)*t<=1},intersectLineCircle=function(e,t,r,n,o,i,a){var s=[r-e,n-t],l=[e-o,t-i],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),g=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-a*a);if(g<0)return[];var d=(-c+Math.sqrt(g))/(2*u),p=(-c-Math.sqrt(g))/(2*u),h=Math.min(d,p),f=Math.max(d,p),y=[];if(h>=0&&h<=1&&y.push(h),f>=0&&f<=1&&y.push(f),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;return y.length>1?y[0]==y[1]?[m,b]:[m,b,y[1]*s[0]+e,y[1]*s[1]+t]:[m,b]},midOfThree=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r},finiteLinesIntersect=function(e,t,r,n,o,i,a,s,l){var u=e-o,c=r-e,g=a-o,d=t-i,p=n-t,h=s-i,f=g*d-h*u,y=c*d-p*u,m=h*c-g*p;if(0!==m){var b=f/m,_=y/m,v=-.001;return v<=b&&b<=1.001&&v<=_&&_<=1.001||l?[e+b*c,t+b*p]:[]}return 0===f||0===y?midOfThree(e,r,a)===a?[a,s]:midOfThree(e,r,o)===o?[o,i]:midOfThree(o,a,r)===r?[r,n]:[]:[]},polygonIntersectLine=function(e,t,r,n,o,i,a,s){var l,u,c,g,d,p,h=[],f=new Array(r.length),y=!0;if(null==i&&(y=!1),y){for(var m=0;m<f.length/2;m++)f[2*m]=r[2*m]*i+n,f[2*m+1]=r[2*m+1]*a+o;if(s>0){var b=expandPolygon(f,-s);u=joinLines(b)}else u=f}else u=r;for(var _=0;_<u.length/2;_++)c=u[2*_],g=u[2*_+1],_<u.length/2-1?(d=u[2*(_+1)],p=u[2*(_+1)+1]):(d=u[0],p=u[1]),0!==(l=finiteLinesIntersect(e,t,n,o,c,g,d,p)).length&&h.push(l[0],l[1]);return h},roundPolygonIntersectLine=function(e,t,r,n,o,i,a,s){for(var l,u=[],c=new Array(r.length),g=i/2,d=a/2,p=getRoundPolygonRadius(i,a),h=0;h<r.length/4;h++){var f,y=void 0;y=0===h?r.length-2:4*h-2,f=4*h+2;var m=n+g*r[4*h],b=o+d*r[4*h+1],_=-r[y]*r[f]-r[y+1]*r[f+1],v=p/Math.tan(Math.acos(_)/2),S=m-v*r[y],E=b-v*r[y+1],w=m+v*r[f],x=b+v*r[f+1];0===h?(c[r.length-2]=S,c[r.length-1]=E):(c[4*h-2]=S,c[4*h-1]=E),c[4*h]=w,c[4*h+1]=x;var T=r[y+1],R=-r[y];T*r[f]+R*r[f+1]<0&&(T*=-1,R*=-1),0!==(l=intersectLineCircle(e,t,n,o,S+T*p,E+R*p,p)).length&&u.push(l[0],l[1])}for(var A=0;A<c.length/4;A++)0!==(l=finiteLinesIntersect(e,t,n,o,c[4*A],c[4*A+1],c[4*A+2],c[4*A+3],!1)).length&&u.push(l[0],l[1]);if(u.length>2){for(var j=[u[0],u[1]],C=Math.pow(j[0]-e,2)+Math.pow(j[1]-t,2),P=1;P<u.length/2;P++){var I=Math.pow(u[2*P]-e,2)+Math.pow(u[2*P+1]-t,2);I<=C&&(j[0]=u[2*P],j[1]=u[2*P+1],C=I)}return j}return u},shortenIntersection=function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),i=(o-r)/o;return i<0&&(i=1e-5),[t[0]+i*n[0],t[1]+i*n[1]]},generateUnitNgonPointsFitToSquare=function(e,t){var r=generateUnitNgonPoints(e,t);return r=fitPolygonToSquare(r)},fitPolygonToSquare=function(e){for(var t,r,n=e.length/2,o=1/0,i=1/0,a=-1/0,s=-1/0,l=0;l<n;l++)t=e[2*l],r=e[2*l+1],o=Math.min(o,t),a=Math.max(a,t),i=Math.min(i,r),s=Math.max(s,r);for(var u=2/(a-o),c=2/(s-i),g=0;g<n;g++)t=e[2*g]=e[2*g]*u,r=e[2*g+1]=e[2*g+1]*c,o=Math.min(o,t),a=Math.max(a,t),i=Math.min(i,r),s=Math.max(s,r);if(i<-1)for(var d=0;d<n;d++)r=e[2*d+1]=e[2*d+1]+(-1-i);return e},generateUnitNgonPoints=function(e,t){var r=1/e*2*Math.PI,n=e%2==0?Math.PI/2+r/2:Math.PI/2;n+=t;for(var o,i=new Array(2*e),a=0;a<e;a++)o=a*r+n,i[2*a]=Math.cos(o),i[2*a+1]=Math.sin(-o);return i},getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)},getRoundPolygonRadius=function(e,t){return Math.min(e/10,t/10,8)},getCutRectangleCornerLength=function(){return 8},bezierPtsToQuadCoeff=function(e,t,r){return[e-2*t+r,2*(t-e),e]},getBarrelCurveConstants=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},pageRankDefaults=defaults$g({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),elesfn$o={pageRank:function(e){for(var t=pageRankDefaults(e),r=t.dampingFactor,n=t.precision,o=t.iterations,i=t.weight,a=this._private.cy,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,g=c*c,d=u.length,p=new Array(g),h=new Array(c),f=(1-r)/c,y=0;y<c;y++){for(var m=0;m<c;m++){p[y*c+m]=0}h[y]=0}for(var b=0;b<d;b++){var _=u[b],v=_.data("source"),S=_.data("target");if(v!==S){var E=l.indexOfId(v),w=l.indexOfId(S),x=i(_);p[w*c+E]+=x,h[E]+=x}}for(var T=1/c+f,R=0;R<c;R++)if(0===h[R])for(var A=0;A<c;A++){p[A*c+R]=T}else for(var j=0;j<c;j++){var C=j*c+R;p[C]=p[C]/h[R]+f}for(var P,I=new Array(c),M=new Array(c),O=0;O<c;O++)I[O]=1;for(var B=0;B<o;B++){for(var N=0;N<c;N++)M[N]=0;for(var k=0;k<c;k++)for(var D=0;D<c;D++){var q=k*c+D;M[k]+=p[q]*I[D]}inPlaceSumNormalize(M),P=I,I=M,M=P;for(var $=0,F=0;F<c;F++){var L=P[F]-I[F];$+=L*L}if($<n)break}return{rank:function(e){return e=a.collection(e)[0],I[l.indexOf(e)]}}}},defaults$f=defaults$g({root:null,weight:function(e){return 1},directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:function(e){e=defaults$f(e);var t=this.cy(),r=this.nodes(),n=r.length;if(e.directed){for(var o={},i={},a=0,s=0,l=0;l<n;l++){var u=r[l],c=u.id();e.root=u;var g=this.degreeCentrality(e);a<g.indegree&&(a=g.indegree),s<g.outdegree&&(s=g.outdegree),o[c]=g.indegree,i[c]=g.outdegree}return{indegree:function(e){return 0==a?0:(string(e)&&(e=t.filter(e)),o[e.id()]/a)},outdegree:function(e){return 0===s?0:(string(e)&&(e=t.filter(e)),i[e.id()]/s)}}}for(var d={},p=0,h=0;h<n;h++){var f=r[h];e.root=f;var y=this.degreeCentrality(e);p<y.degree&&(p=y.degree),d[f.id()]=y.degree}return{degree:function(e){return 0===p?0:(string(e)&&(e=t.filter(e)),d[e.id()]/p)}}},degreeCentrality:function(e){e=defaults$f(e);var t=this.cy(),r=this,n=e,o=n.root,i=n.weight,a=n.directed,s=n.alpha;if(o=t.collection(o)[0],a){for(var l=o.connectedEdges(),u=l.filter((function(e){return e.target().same(o)&&r.has(e)})),c=l.filter((function(e){return e.source().same(o)&&r.has(e)})),g=u.length,d=c.length,p=0,h=0,f=0;f<u.length;f++)p+=i(u[f]);for(var y=0;y<c.length;y++)h+=i(c[y]);return{indegree:Math.pow(g,1-s)*Math.pow(p,s),outdegree:Math.pow(d,1-s)*Math.pow(h,s)}}for(var m=o.connectedEdges().intersection(r),b=m.length,_=0,v=0;v<m.length;v++)_+=i(m[v]);return{degree:Math.pow(b,1-s)*Math.pow(_,s)}}};elesfn$n.dc=elesfn$n.degreeCentrality,elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized;var defaults$e=defaults$g({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:function(e){for(var t=defaults$e(e),r=t.harmonic,n=t.weight,o=t.directed,i=this.cy(),a={},s=0,l=this.nodes(),u=this.floydWarshall({weight:n,directed:o}),c=0;c<l.length;c++){for(var g=0,d=l[c],p=0;p<l.length;p++)if(c!==p){var h=u.distance(d,l[p]);g+=r?1/h:h}r||(g=1/g),s<g&&(s=g),a[d.id()]=g}return{closeness:function(e){return 0==s?0:(e=string(e)?i.filter(e)[0].id():e.id(),a[e]/s)}}},closenessCentrality:function(e){var t=defaults$e(e),r=t.root,n=t.weight,o=t.directed,i=t.harmonic;r=this.filter(r)[0];for(var a=this.dijkstra({root:r,weight:n,directed:o}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(r)){var g=a.distanceTo(c);s+=i?1/g:g}}return i?s:1/s}};elesfn$m.cc=elesfn$m.closenessCentrality,elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized;var defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:function(e){for(var t=defaults$d(e),r=t.directed,n=t.weight,o=null!=n,i=this.cy(),a=this.nodes(),s={},l={},u=0,c=function(e,t){l[e]=t,t>u&&(u=t)},g=function(e){return l[e]},d=0;d<a.length;d++){var p=a[d],h=p.id();s[h]=r?p.outgoers().nodes():p.openNeighborhood().nodes(),c(h,0)}for(var f=function(e){for(var t=a[e].id(),r=[],l={},u={},d={},p=new Heap__default.default((function(e,t){return d[e]-d[t]})),h=0;h<a.length;h++){var f=a[h].id();l[f]=[],u[f]=0,d[f]=1/0}for(u[t]=1,d[t]=0,p.push(t);!p.empty();){var y=p.pop();if(r.push(y),o)for(var m=0;m<s[y].length;m++){var b=s[y][m],_=i.getElementById(y),v=void 0;v=_.edgesTo(b).length>0?_.edgesTo(b)[0]:b.edgesTo(_)[0];var S=n(v);b=b.id(),d[b]>d[y]+S&&(d[b]=d[y]+S,p.nodes.indexOf(b)<0?p.push(b):p.updateItem(b),u[b]=0,l[b]=[]),d[b]==d[y]+S&&(u[b]=u[b]+u[y],l[b].push(y))}else for(var E=0;E<s[y].length;E++){var w=s[y][E].id();d[w]==1/0&&(p.push(w),d[w]=d[y]+1),d[w]==d[y]+1&&(u[w]=u[w]+u[y],l[w].push(y))}}for(var x={},T=0;T<a.length;T++)x[a[T].id()]=0;for(;r.length>0;){for(var R=r.pop(),A=0;A<l[R].length;A++){var j=l[R][A];x[j]=x[j]+u[j]/u[R]*(1+x[R])}R!=a[e].id()&&c(R,g(R)+x[R])}},y=0;y<a.length;y++)f(y);var m={betweenness:function(e){var t=i.collection(e).id();return g(t)},betweennessNormalized:function(e){if(0==u)return 0;var t=i.collection(e).id();return g(t)/u}};return m.betweennessNormalised=m.betweennessNormalized,m}};elesfn$l.bc=elesfn$l.betweennessCentrality;var defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),setOptions$3=function(e){return defaults$c(e)},getSimilarity$1=function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n](e);return r},addLoops=function(e,t,r){for(var n=0;n<t;n++)e[n*t+n]=r},normalize$1=function(e,t){for(var r,n=0;n<t;n++){r=0;for(var o=0;o<t;o++)r+=e[o*t+n];for(var i=0;i<t;i++)e[i*t+n]=e[i*t+n]/r}},mmult=function(e,t,r){for(var n=new Array(r*r),o=0;o<r;o++){for(var i=0;i<r;i++)n[o*r+i]=0;for(var a=0;a<r;a++)for(var s=0;s<r;s++)n[o*r+s]+=e[o*r+a]*t[a*r+s]}return n},expand=function(e,t,r){for(var n=e.slice(0),o=1;o<r;o++)e=mmult(e,n,t);return e},inflate=function(e,t,r){for(var n=new Array(t*t),o=0;o<t*t;o++)n[o]=Math.pow(e[o],r);return normalize$1(n,t),n},hasConverged=function(e,t,r,n){for(var o=0;o<r;o++){if(Math.round(e[o]*Math.pow(10,n))/Math.pow(10,n)!==Math.round(t[o]*Math.pow(10,n))/Math.pow(10,n))return!1}return!0},assign$2=function(e,t,r,n){for(var o=[],i=0;i<t;i++){for(var a=[],s=0;s<t;s++)Math.round(1e3*e[i*t+s])/1e3>0&&a.push(r[s]);0!==a.length&&o.push(n.collection(a))}return o},isDuplicate=function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0},removeDuplicates=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&isDuplicate(e[t],e[r])&&e.splice(r,1);return e},markovClustering=function(e){for(var t=this.nodes(),r=this.edges(),n=this.cy(),o=setOptions$3(e),i={},a=0;a<t.length;a++)i[t[a].id()]=a;for(var s,l=t.length,u=l*l,c=new Array(u),g=0;g<u;g++)c[g]=0;for(var d=0;d<r.length;d++){var p=r[d],h=i[p.source().id()],f=i[p.target().id()],y=getSimilarity$1(p,o.attributes);c[h*l+f]+=y,c[f*l+h]+=y}addLoops(c,l,o.multFactor),normalize$1(c,l);for(var m=!0,b=0;m&&b<o.maxIterations;)m=!1,s=expand(c,l,o.expandFactor),c=inflate(s,l,o.inflateFactor),hasConverged(c,s,u,4)||(m=!0),b++;var _=assign$2(c,l,t,n);return _=removeDuplicates(_)},markovClustering$1={markovClustering:markovClustering,mcl:markovClustering},identity=function(e){return e},absDiff=function(e,t){return Math.abs(t-e)},addAbsDiff=function(e,t,r){return e+absDiff(t,r)},addSquaredDiff=function(e,t,r){return e+Math.pow(r-t,2)},sqrt=function(e){return Math.sqrt(e)},maxAbsDiff=function(e,t,r){return Math.max(e,absDiff(t,r))},getDistance=function(e,t,r,n,o){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:identity,a=n,s=0;s<e;s++)a=o(a,t(s),r(s));return i(a)},distances={euclidean:function(e,t,r){return e>=2?getDistance(e,t,r,0,addSquaredDiff,sqrt):getDistance(e,t,r,0,addAbsDiff)},squaredEuclidean:function(e,t,r){return getDistance(e,t,r,0,addSquaredDiff)},manhattan:function(e,t,r){return getDistance(e,t,r,0,addAbsDiff)},max:function(e,t,r){return getDistance(e,t,r,-1/0,maxAbsDiff)}};function clusteringDistance(e,t,r,n,o,i){var a;return a=fn$6(e)?e:distances[e]||distances.euclidean,0===t&&fn$6(e)?a(o,i):a(t,r,n,o,i)}distances["squared-euclidean"]=distances.squaredEuclidean,distances.squaredeuclidean=distances.squaredEuclidean;var defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$2=function(e){return defaults$b(e)},getDist=function(e,t,r,n,o){var i="kMedoids"!==o?function(e){return r[e]}:function(e){return n[e](r)},a=r,s=t;return clusteringDistance(e,n.length,i,(function(e){return n[e](t)}),a,s)},randomCentroids=function(e,t,r){for(var n=r.length,o=new Array(n),i=new Array(n),a=new Array(t),s=null,l=0;l<n;l++)o[l]=e.min(r[l]).value,i[l]=e.max(r[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<n;c++)s[c]=Math.random()*(i[c]-o[c])+o[c];a[u]=s}return a},classify=function(e,t,r,n,o){for(var i=1/0,a=0,s=0;s<t.length;s++){var l=getDist(r,e,t[s],n,o);l<i&&(i=l,a=s)}return a},buildCluster=function(e,t,r){for(var n=[],o=null,i=0;i<t.length;i++)r[(o=t[i]).id()]===e&&n.push(o);return n},haveValuesConverged=function(e,t,r){return Math.abs(t-e)<=r},haveMatricesConverged=function(e,t,r){for(var n=0;n<e.length;n++)for(var o=0;o<e[n].length;o++){if(Math.abs(e[n][o]-t[n][o])>r)return!1}return!0},seenBefore=function(e,t,r){for(var n=0;n<r;n++)if(e===t[n])return!0;return!1},randomMedoids=function(e,t){var r=new Array(t);if(e.length<50)for(var n=0;n<t;n++){for(var o=e[Math.floor(Math.random()*e.length)];seenBefore(o,r,n);)o=e[Math.floor(Math.random()*e.length)];r[n]=o}else for(var i=0;i<t;i++)r[i]=e[Math.floor(Math.random()*e.length)];return r},findCost=function(e,t,r){for(var n=0,o=0;o<t.length;o++)n+=getDist("manhattan",t[o],e,r,"kMedoids");return n},kMeans=function(e){var t,r=this.cy(),n=this.nodes(),o=null,i=setOptions$2(e),a=new Array(i.k),s={};i.testMode?"number"==typeof i.testCentroids?(i.testCentroids,t=randomCentroids(n,i.k,i.attributes)):t="object"===_typeof(i.testCentroids)?i.testCentroids:randomCentroids(n,i.k,i.attributes):t=randomCentroids(n,i.k,i.attributes);for(var l=!0,u=0;l&&u<i.maxIterations;){for(var c=0;c<n.length;c++)s[(o=n[c]).id()]=classify(o,t,i.distance,i.attributes,"kMeans");l=!1;for(var g=0;g<i.k;g++){var d=buildCluster(g,n,s);if(0!==d.length){for(var p=i.attributes.length,h=t[g],f=new Array(p),y=new Array(p),m=0;m<p;m++){y[m]=0;for(var b=0;b<d.length;b++)o=d[b],y[m]+=i.attributes[m](o);f[m]=y[m]/d.length,haveValuesConverged(f[m],h[m],i.sensitivityThreshold)||(l=!0)}t[g]=f,a[g]=r.collection(d)}}u++}return a},kMedoids=function(e){var t,r,n=this.cy(),o=this.nodes(),i=null,a=setOptions$2(e),s=new Array(a.k),l={},u=new Array(a.k);a.testMode?"number"==typeof a.testCentroids||(t="object"===_typeof(a.testCentroids)?a.testCentroids:randomMedoids(o,a.k)):t=randomMedoids(o,a.k);for(var c=!0,g=0;c&&g<a.maxIterations;){for(var d=0;d<o.length;d++)l[(i=o[d]).id()]=classify(i,t,a.distance,a.attributes,"kMedoids");c=!1;for(var p=0;p<t.length;p++){var h=buildCluster(p,o,l);if(0!==h.length){u[p]=findCost(t[p],h,a.attributes);for(var f=0;f<h.length;f++)(r=findCost(h[f],h,a.attributes))<u[p]&&(u[p]=r,t[p]=h[f],c=!0);s[p]=n.collection(h)}}g++}return s},updateCentroids=function(e,t,r,n,o){for(var i,a,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)n[s][l]=Math.pow(r[s][l],o.m);for(var u=0;u<e.length;u++)for(var c=0;c<o.attributes.length;c++){i=0,a=0;for(var g=0;g<t.length;g++)i+=n[g][u]*o.attributes[c](t[g]),a+=n[g][u];e[u][c]=i/a}},updateMembership=function(e,t,r,n,o){for(var i=0;i<e.length;i++)t[i]=e[i].slice();for(var a,s,l,u=2/(o.m-1),c=0;c<r.length;c++)for(var g=0;g<n.length;g++){a=0;for(var d=0;d<r.length;d++)s=getDist(o.distance,n[g],r[c],o.attributes,"cmeans"),l=getDist(o.distance,n[g],r[d],o.attributes,"cmeans"),a+=Math.pow(s/l,u);e[g][c]=1/a}},assign$1=function(e,t,r,n){for(var o,i,a=new Array(r.k),s=0;s<a.length;s++)a[s]=[];for(var l=0;l<t.length;l++){o=-1/0,i=-1;for(var u=0;u<t[0].length;u++)t[l][u]>o&&(o=t[l][u],i=u);a[i].push(e[l])}for(var c=0;c<a.length;c++)a[c]=n.collection(a[c]);return a},fuzzyCMeans=function(e){var t,r,n,o,i=this.cy(),a=this.nodes(),s=setOptions$2(e);n=new Array(a.length);for(var l=0;l<a.length;l++)n[l]=new Array(s.k);r=new Array(a.length);for(var u=0;u<a.length;u++)r[u]=new Array(s.k);for(var c=0;c<a.length;c++){for(var g=0,d=0;d<s.k;d++)r[c][d]=Math.random(),g+=r[c][d];for(var p=0;p<s.k;p++)r[c][p]=r[c][p]/g}t=new Array(s.k);for(var h=0;h<s.k;h++)t[h]=new Array(s.attributes.length);o=new Array(a.length);for(var f=0;f<a.length;f++)o[f]=new Array(s.k);for(var y=!0,m=0;y&&m<s.maxIterations;)y=!1,updateCentroids(t,a,r,o,s),updateMembership(r,n,t,a,s),haveMatricesConverged(r,n,s.sensitivityThreshold)||(y=!0),m++;return{clusters:assign$1(a,r,s,i),degreeOfMembership:r}},kClustering={kMeans:kMeans,kMedoids:kMedoids,fuzzyCMeans:fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=function(e){var t=defaults$a(e),r=linkageAliases[t.linkage];return null!=r&&(t.linkage=r),t},mergeClosest=function(e,t,r,n,o){for(var i,a=0,s=1/0,l=o.attributes,u=function(e,t){return clusteringDistance(o.distance,l.length,(function(t){return l[t](e)}),(function(e){return l[e](t)}),e,t)},c=0;c<e.length;c++){var g=e[c].key,d=r[g][n[g]];d<s&&(a=g,s=d)}if("threshold"===o.mode&&s>=o.threshold||"dendrogram"===o.mode&&1===e.length)return!1;var p,h=t[a],f=t[n[a]];p="dendrogram"===o.mode?{left:h,right:f,key:h.key}:{value:h.value.concat(f.value),key:h.key},e[h.index]=p,e.splice(f.index,1),t[h.key]=p;for(var y=0;y<e.length;y++){var m=e[y];h.key===m.key?i=1/0:"min"===o.linkage?(i=r[h.key][m.key],r[h.key][m.key]>r[f.key][m.key]&&(i=r[f.key][m.key])):"max"===o.linkage?(i=r[h.key][m.key],r[h.key][m.key]<r[f.key][m.key]&&(i=r[f.key][m.key])):i="mean"===o.linkage?(r[h.key][m.key]*h.size+r[f.key][m.key]*f.size)/(h.size+f.size):"dendrogram"===o.mode?u(m.value,h.value):u(m.value[0],h.value[0]),r[h.key][m.key]=r[m.key][h.key]=i}for(var b=0;b<e.length;b++){var _=e[b].key;if(n[_]===h.key||n[_]===f.key){for(var v=_,S=0;S<e.length;S++){var E=e[S].key;r[_][E]<r[_][v]&&(v=E)}n[_]=v}e[b].index=b}return h.key=f.key=h.index=f.index=null,!0},getAllChildren=function e(t,r,n){t&&(t.value?r.push(t.value):(t.left&&e(t.left,r),t.right&&e(t.right,r)))},buildDendrogram=function e(t,r){if(!t)return"";if(t.left&&t.right){var n=e(t.left,r),o=e(t.right,r),i=r.add({group:"nodes",data:{id:n+","+o}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:o,target:i.id()}}),i.id()}return t.value?t.value.id():void 0},buildClustersFromTree=function e(t,r,n){if(!t)return[];var o=[],i=[],a=[];return 0===r?(t.left&&getAllChildren(t.left,o),t.right&&getAllChildren(t.right,i),a=o.concat(i),[n.collection(a)]):1===r?t.value?[n.collection(t.value)]:(t.left&&getAllChildren(t.left,o),t.right&&getAllChildren(t.right,i),[n.collection(o),n.collection(i)]):t.value?[n.collection(t.value)]:(t.left&&(o=e(t.left,r-1,n)),t.right&&(i=e(t.right,r-1,n)),o.concat(i))},hierarchicalClustering=function(e){for(var t=this.cy(),r=this.nodes(),n=setOptions$1(e),o=n.attributes,i=function(e,t){return clusteringDistance(n.distance,o.length,(function(t){return o[t](e)}),(function(e){return o[e](t)}),e,t)},a=[],s=[],l=[],u=[],c=0;c<r.length;c++){var g={value:"dendrogram"===n.mode?r[c]:[r[c]],key:c,index:c};a[c]=g,u[c]=g,s[c]=[],l[c]=0}for(var d=0;d<a.length;d++)for(var p=0;p<=d;p++){var h=void 0;h="dendrogram"===n.mode?d===p?1/0:i(a[d].value,a[p].value):d===p?1/0:i(a[d].value[0],a[p].value[0]),s[d][p]=h,s[p][d]=h,h<s[d][l[d]]&&(l[d]=p)}for(var f,y=mergeClosest(a,u,s,l,n);y;)y=mergeClosest(a,u,s,l,n);return"dendrogram"===n.mode?(f=buildClustersFromTree(a[0],n.dendrogramDepth,t),n.addDendrogram&&buildDendrogram(a[0],t)):(f=new Array(a.length),a.forEach((function(e,r){e.key=e.index=null,f[r]=t.collection(e.value)}))),f},hierarchicalClustering$1={hierarchicalClustering:hierarchicalClustering,hca:hierarchicalClustering},defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions=function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||error("Damping must range on [0.5, 1).  Got: ".concat(t));var n=["median","mean","min","max"];return n.some((function(e){return e===r}))||number$1(r)||error("Preference must be one of [".concat(n.map((function(e){return"'".concat(e,"'")})).join(", "),"] or a number.  Got: ").concat(r)),defaults$9(e)},getSimilarity=function(e,t,r,n){var o=function(e,t){return n[t](e)};return-clusteringDistance(e,n.length,(function(e){return o(t,e)}),(function(e){return o(r,e)}),t,r)},getPreference=function(e,t){return"median"===t?median(e):"mean"===t?mean(e):"min"===t?min(e):"max"===t?max(e):t},findExemplars=function(e,t,r){for(var n=[],o=0;o<e;o++)t[o*e+o]+r[o*e+o]>0&&n.push(o);return n},assignClusters=function(e,t,r){for(var n=[],o=0;o<e;o++){for(var i=-1,a=-1/0,s=0;s<r.length;s++){var l=r[s];t[o*e+l]>a&&(i=l,a=t[o*e+l])}i>0&&n.push(i)}for(var u=0;u<r.length;u++)n[r[u]]=r[u];return n},assign=function(e,t,r){for(var n=assignClusters(e,t,r),o=0;o<r.length;o++){for(var i=[],a=0;a<n.length;a++)n[a]===r[o]&&i.push(a);for(var s=-1,l=-1/0,u=0;u<i.length;u++){for(var c=0,g=0;g<i.length;g++)c+=t[i[g]*e+i[u]];c>l&&(s=u,l=c)}r[o]=i[s]}return n=assignClusters(e,t,r)},affinityPropagation=function(e){for(var t,r,n,o,i,a,s=this.cy(),l=this.nodes(),u=setOptions(e),c={},g=0;g<l.length;g++)c[l[g].id()]=g;r=(t=l.length)*t,n=new Array(r);for(var d=0;d<r;d++)n[d]=-1/0;for(var p=0;p<t;p++)for(var h=0;h<t;h++)p!==h&&(n[p*t+h]=getSimilarity(u.distance,l[p],l[h],u.attributes));o=getPreference(n,u.preference);for(var f=0;f<t;f++)n[f*t+f]=o;i=new Array(r);for(var y=0;y<r;y++)i[y]=0;a=new Array(r);for(var m=0;m<r;m++)a[m]=0;for(var b=new Array(t),_=new Array(t),v=new Array(t),S=0;S<t;S++)b[S]=0,_[S]=0,v[S]=0;for(var E,w=new Array(t*u.minIterations),x=0;x<w.length;x++)w[x]=0;for(E=0;E<u.maxIterations;E++){for(var T=0;T<t;T++){for(var R=-1/0,A=-1/0,j=-1,C=0,P=0;P<t;P++)b[P]=i[T*t+P],(C=a[T*t+P]+n[T*t+P])>=R?(A=R,R=C,j=P):C>A&&(A=C);for(var I=0;I<t;I++)i[T*t+I]=(1-u.damping)*(n[T*t+I]-R)+u.damping*b[I];i[T*t+j]=(1-u.damping)*(n[T*t+j]-A)+u.damping*b[j]}for(var M=0;M<t;M++){for(var O=0,B=0;B<t;B++)b[B]=a[B*t+M],_[B]=Math.max(0,i[B*t+M]),O+=_[B];O-=_[M],_[M]=i[M*t+M],O+=_[M];for(var N=0;N<t;N++)a[N*t+M]=(1-u.damping)*Math.min(0,O-_[N])+u.damping*b[N];a[M*t+M]=(1-u.damping)*(O-_[M])+u.damping*b[M]}for(var k=0,D=0;D<t;D++){var q=a[D*t+D]+i[D*t+D]>0?1:0;w[E%u.minIterations*t+D]=q,k+=q}if(k>0&&(E>=u.minIterations-1||E==u.maxIterations-1)){for(var $=0,F=0;F<t;F++){v[F]=0;for(var L=0;L<u.minIterations;L++)v[F]+=w[L*t+F];0!==v[F]&&v[F]!==u.minIterations||$++}if($===t)break}}for(var U=findExemplars(t,i,a),W=assign(t,n,U),z={},V=0;V<U.length;V++)z[U[V]]=[];for(var H=0;H<l.length;H++){var G=W[c[l[H].id()]];null!=G&&z[G].push(l[H])}for(var K=new Array(U.length),Y=0;Y<U.length;Y++)K[Y]=s.collection(z[U[Y]]);return K},affinityPropagation$1={affinityPropagation:affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),elesfn$k={hierholzer:function(e){if(!plainObject(e)){var t=arguments;e={root:t[0],directed:t[1]}}var r,n,o,i=hierholzerDefaults(e),a=i.root,s=i.directed,l=this,u=!1;a&&(o=string(a)?this.filter(a)[0].id():a[0].id());var c={},g={};s?l.forEach((function(e){var t=e.id();if(e.isNode()){var o=e.indegree(!0),i=e.outdegree(!0),a=o-i,s=i-o;1==a?r?u=!0:r=t:1==s?n?u=!0:n=t:(s>1||a>1)&&(u=!0),c[t]=[],e.outgoers().forEach((function(e){e.isEdge()&&c[t].push(e.id())}))}else g[t]=[void 0,e.target().id()]})):l.forEach((function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(r?n?u=!0:n=t:r=t),c[t]=[],e.connectedEdges().forEach((function(e){return c[t].push(e.id())}))):g[t]=[e.source().id(),e.target().id()]}));var d={found:!1,trail:void 0};if(u)return d;if(n&&r)if(s){if(o&&n!=o)return d;o=n}else{if(o&&n!=o&&r!=o)return d;o||(o=n)}else o||(o=l[0].id());var p=function(e){for(var t,r,n,o=e,i=[e];c[o].length;)t=c[o].shift(),r=g[t][0],o!=(n=g[t][1])?(c[n]=c[n].filter((function(e){return e!=t})),o=n):s||o==r||(c[r]=c[r].filter((function(e){return e!=t})),o=r),i.unshift(t),i.unshift(o);return i},h=[],f=[];for(f=p(o);1!=f.length;)0==c[f[0]].length?(h.unshift(l.getElementById(f.shift())),h.unshift(l.getElementById(f.shift()))):f=p(f.shift()).concat(f);for(var y in h.unshift(l.getElementById(f.shift())),c)if(c[y].length)return d;return d.found=!0,d.trail=this.spawn(h,!0),d}},hopcroftTarjanBiconnected=function(){var e=this,t={},r=0,n=0,o=[],i=[],a={},s=function s(l,u,c){l===c&&(n+=1),t[u]={id:r,low:r++,cutVertex:!1};var g,d,p,h,f=e.getElementById(u).connectedEdges().intersection(e);0===f.size()?o.push(e.spawn(e.getElementById(u))):f.forEach((function(r){g=r.source().id(),d=r.target().id(),(p=g===u?d:g)!==c&&(h=r.id(),a[h]||(a[h]=!0,i.push({x:u,y:p,edge:r})),p in t?t[u].low=Math.min(t[u].low,t[p].id):(s(l,p,u),t[u].low=Math.min(t[u].low,t[p].low),t[u].id<=t[p].low&&(t[u].cutVertex=!0,function(r,n){for(var a=i.length-1,s=[],l=e.spawn();i[a].x!=r||i[a].y!=n;)s.push(i.pop().edge),a--;s.push(i.pop().edge),s.forEach((function(r){var n=r.connectedNodes().intersection(e);l.merge(r),n.forEach((function(r){var n=r.id(),o=r.connectedEdges().intersection(e);l.merge(r),t[n].cutVertex?l.merge(o.filter((function(e){return e.isLoop()}))):l.merge(o)}))})),o.push(l)}(u,p))))}))};e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||(n=0,s(r,r),t[r].cutVertex=n>1)}}));var l=Object.keys(t).filter((function(e){return t[e].cutVertex})).map((function(t){return e.getElementById(t)}));return{cut:e.spawn(l),components:o}},hopcroftTarjanBiconnected$1={hopcroftTarjanBiconnected:hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},tarjanStronglyConnected=function(){var e=this,t={},r=0,n=[],o=[],i=e.spawn(e),a=function a(s){if(o.push(s),t[s]={index:r,low:r++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach((function(e){var r=e.target().id();r!==s&&(r in t||a(r),t[r].explored||(t[s].low=Math.min(t[s].low,t[r].low)))})),t[s].index===t[s].low){for(var l=e.spawn();;){var u=o.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),g=l.merge(c);n.push(g),i=i.difference(g)}};return e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||a(r)}})),{cut:i,components:n}},tarjanStronglyConnected$1={tarjanStronglyConnected:tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected},elesfn$j={};[elesfn$v,elesfn$u,elesfn$t,elesfn$s,elesfn$r,elesfn$q,elesfn$p,elesfn$o,elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$k,hopcroftTarjanBiconnected$1,tarjanStronglyConnected$1].forEach((function(e){extend(elesfn$j,e)}));
/*!
    Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
    Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
    Licensed under The MIT License (http://opensource.org/licenses/MIT)
    */
var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,api=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};api.prototype={fulfill:function(e){return deliver(this,STATE_FULFILLED,"fulfillValue",e)},reject:function(e){return deliver(this,STATE_REJECTED,"rejectReason",e)},then:function(e,t){var r=this,n=new api;return r.onFulfilled.push(resolver(e,n,"fulfill")),r.onRejected.push(resolver(t,n,"reject")),execute(r),n.proxy}};var deliver=function(e,t,r,n){return e.state===STATE_PENDING&&(e.state=t,e[r]=n,execute(e)),e},execute=function(e){e.state===STATE_FULFILLED?execute_handlers(e,"onFulfilled",e.fulfillValue):e.state===STATE_REJECTED&&execute_handlers(e,"onRejected",e.rejectReason)},execute_handlers=function(e,t,r){if(0!==e[t].length){var n=e[t];e[t]=[];var o=function(){for(var e=0;e<n.length;e++)n[e](r)};"function"==typeof setImmediate?setImmediate(o):setTimeout(o,0)}},resolver=function(e,t,r){return function(n){if("function"!=typeof e)t[r].call(t,n);else{var o;try{o=e(n)}catch(e){return void t.reject(e)}resolve(t,o)}}},resolve=function e(t,r){if(t!==r&&t.proxy!==r){var n;if("object"===_typeof(r)&&null!==r||"function"==typeof r)try{n=r.then}catch(e){return void t.reject(e)}if("function"!=typeof n)t.fulfill(r);else{var o=!1;try{n.call(r,(function(n){o||(o=!0,n===r?t.reject(new TypeError("circular thenable chain")):e(t,n))}),(function(e){o||(o=!0,t.reject(e))}))}catch(e){o||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};api.all=function(e){return new api((function(t,r){for(var n=new Array(e.length),o=0,i=function(r,i){n[r]=i,++o===e.length&&t(n)},a=0;a<e.length;a++)!function(t){var n=e[t];null!=n&&null!=n.then?n.then((function(e){i(t,e)}),(function(e){r(e)})):i(t,n)}(a)}))},api.resolve=function(e){return new api((function(t,r){t(e)}))},api.reject=function(e){return new api((function(t,r){r(e)}))};var Promise$1="undefined"!=typeof Promise?Promise:api,Animation=function(e,t,r){var n=core(e),o=!n,i=this._private=extend({duration:1e3},t,r);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&fn$6(i.complete)&&i.completes.push(i.complete),o){var a=e.position();i.startPosition=i.startPosition||{x:a.x,y:a.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(n){var s=e.pan();i.startPan={x:s.x,y:s.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,r=t.playing;return void 0===e?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(t,r){var n=e[t];null!=n&&(e[t]=e[r],e[r]=n)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var o=e.style[n],i=o.name,a=e.startStyle[i];e.startStyle[i]=o,e.style[n]=a}return t&&this.play(),this},promise:function(e){var t,r=this._private;if("frame"===e)t=r.frames;else t=r.completes;return new Promise$1((function(e,r){t.push((function(){e()}))}))}}),anifn.complete=anifn.completed,anifn.run=anifn.play,anifn.running=anifn.playing;var define$3={animated:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return!1;var r=t[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<t.length;r++){t[r]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var r=this,n=void 0!==r.length,o=n?r:[r],i=this._private.cy||this,a=!n,s=!a;if(!i.styleEnabled())return this;var l=i.style();if(e=extend({},e,t),0===Object.keys(e).length)return new Animation(o[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(s&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),s&&null!=e.renderedPosition){var u=e.renderedPosition,c=i.pan(),g=i.zoom();e.position=renderedToModelPosition(u,g,c)}if(a&&null!=e.panBy){var d=e.panBy,p=i.pan();e.pan={x:p.x+d.x,y:p.y+d.y}}var h=e.center||e.centre;if(a&&null!=h){var f=i.getCenterPan(h.eles,e.zoom);null!=f&&(e.pan=f)}if(a&&null!=e.fit){var y=e.fit,m=i.getFitViewport(y.eles||y.boundingBox,y.padding);null!=m&&(e.pan=m.pan,e.zoom=m.zoom)}if(a&&plainObject(e.zoom)){var b=i.getZoomedViewport(e.zoom);null!=b?(b.zoomed&&(e.zoom=b.zoom),b.panned&&(e.pan=b.pan)):e.zoom=null}return new Animation(o[0],e)}},animate:function(){return function(e,t){var r=this,n=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=extend({},e,t));for(var o=0;o<n.length;o++){var i=n[o],a=i.animated()&&(void 0===e.queue||e.queue);i.animation(e,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var r=this,n=void 0!==r.length?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var a=n[i]._private,s=a.animation.current,l=0;l<s.length;l++){var u=s[l]._private;t&&(u.duration=0)}e&&(a.animation.queue=[]),t||(a.animation.current=[])}return o.notify("draw"),this}}},define$2={data:function(e){return e=extend({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,r){var n=e,o=this,i=void 0!==o.length,a=i?o:[o],s=i?o[0]:o;if(string(t)){var l,u=-1!==t.indexOf(".")&&toPath__default.default(t);if(n.allowGetting&&void 0===r)return s&&(n.beforeGet(s),l=u&&void 0===s._private[n.field][t]?get__default.default(s._private[n.field],u):s._private[n.field][t]),l;if(n.allowSetting&&void 0!==r&&!n.immutableKeys[t]){var c=_defineProperty({},t,r);n.beforeSet(o,c);for(var g=0,d=a.length;g<d;g++){var p=a[g];n.canSet(p)&&(u&&void 0===s._private[n.field][t]?set__default.default(p._private[n.field],u,r):p._private[n.field][t]=r)}n.updateStyle&&o.updateStyle(),n.onSet(o),n.settingTriggersEvent&&o[n.triggerFnName](n.settingEvent)}}else if(n.allowSetting&&plainObject(t)){var h,f,y=t,m=Object.keys(y);n.beforeSet(o,y);for(var b=0;b<m.length;b++){if(f=y[h=m[b]],!n.immutableKeys[h])for(var _=0;_<a.length;_++){var v=a[_];n.canSet(v)&&(v._private[n.field][h]=f)}}n.updateStyle&&o.updateStyle(),n.onSet(o),n.settingTriggersEvent&&o[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&fn$6(t)){var S=t;o.on(n.bindingEvent,S)}else if(n.allowGetting&&void 0===t){var E;return s&&(n.beforeGet(s),E=s._private[n.field]),E}return o}},removeData:function(e){return e=extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var r=e,n=this,o=void 0!==n.length?n:[n];if(string(t)){for(var i=t.split(/\s+/),a=i.length,s=0;s<a;s++){var l=i[s];if(!emptyString(l))if(!r.immutableKeys[l])for(var u=0,c=o.length;u<c;u++)o[u]._private[r.field][l]=void 0}r.triggerEvent&&n[r.triggerFnName](r.event)}else if(void 0===t){for(var g=0,d=o.length;g<d;g++)for(var p=o[g]._private[r.field],h=Object.keys(p),f=0;f<h.length;f++){var y=h[f];!r.immutableKeys[y]&&(p[y]=void 0)}r.triggerEvent&&n[r.triggerFnName](r.event)}return n}}},define$1={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return new Promise$1((function(e,t){var o=n.concat([function(t){r.off.apply(r,i),e(t)}]),i=o.concat([]);r.on.apply(r,o)}))}}},define={};[define$3,define$2,define$1].forEach((function(e){extend(define,e)}));var elesfn$i={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop()},elesfn$h={classes:function(e){var t=this;if(void 0===e){var r=[];return t[0]._private.classes.forEach((function(e){return r.push(e)})),r}array(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],o=new Set$1(e),i=0;i<t.length;i++){for(var a=t[i],s=a._private,l=s.classes,u=!1,c=0;c<e.length;c++){var g=e[c];if(!l.has(g)){u=!0;break}}u||(u=l.size!==e.length),u&&(s.classes=o,n.push(a))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){array(e)||(e=e.match(/\S+/g)||[]);for(var r=this,n=void 0===t,o=[],i=0,a=r.length;i<a;i++)for(var s=r[i],l=s._private.classes,u=!1,c=0;c<e.length;c++){var g=e[c],d=l.has(g),p=!1;t||n&&!d?(l.add(g),p=!0):(!t||n&&d)&&(l.delete(g),p=!0),!u&&p&&(o.push(s),u=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;return r.addClass(e),setTimeout((function(){r.removeClass(e)}),t),r}};elesfn$h.className=elesfn$h.classNames=elesfn$h.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-.]|(?:\\\\"+tokens.metaChar+"))+",tokens.className="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+",tokens.value=tokens.string+"|"+tokens.number,tokens.id=tokens.variable,function(){var e,t,r;for(e=tokens.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],tokens.comparatorOp+="|@"+t;for(e=tokens.comparatorOp.split("|"),r=0;r<e.length;r++)(t=e[r]).indexOf("!")>=0||"="!==t&&(tokens.comparatorOp+="|\\!"+t)}();var newQuery=function(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort((function(e,t){return descending(e.selector,t.selector)})),lookup=function(){for(var e,t={},r=0;r<stateSelectors.length;r++)t[(e=stateSelectors[r]).selector]=e.matches;return t}(),stateSelectorMatches=function(e,t){return lookup[e](t)},stateSelectorRegex="("+stateSelectors.map((function(e){return e.selector})).join("|")+")",cleanMetaChars=function(e){return e.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),(function(e,t){return t}))},replaceLastQuery=function(e,t,r){e[e.length-1]=r},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.GROUP,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.STATE,value:n})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.ID,value:cleanMetaChars(n)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.CLASS,value:cleanMetaChars(n)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(e,t,r){var n=_slicedToArray(r,3),o=n[0],i=n[1],a=n[2];a=null!=new RegExp("^"+tokens.string+"$").exec(a)?a.substring(1,a.length-1):parseFloat(a),t.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(o),operator:i,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(e,t,r){var n=_slicedToArray(r,2),o=n[0],i=n[1];t.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(i),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(e,t,r){var n=_slicedToArray(r,3),o=n[0],i=n[1],a=n[2];t.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(o),operator:i,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function(e,t){var r=e.currentSubject,n=e.edgeCount,o=e.compoundCount,i=e[e.length-1];return null!=r&&(i.subject=r,e.currentSubject=null),i.edgeCount=n,i.compoundCount=o,e.edgeCount=0,e.compoundCount=0,e[e.length++]=newQuery()}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=t,o=newQuery();return r.checks.push({type:Type.DIRECTED_EDGE,source:n,target:o}),replaceLastQuery(e,t,r),e.edgeCount++,o}var i=newQuery(),a=t,s=newQuery();return i.checks.push({type:Type.NODE_SOURCE,source:a,target:s}),replaceLastQuery(e,t,i),e.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=t,o=newQuery();return r.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[n,o]}),replaceLastQuery(e,t,r),e.edgeCount++,o}var i=newQuery(),a=t,s=newQuery();return i.checks.push({type:Type.NODE_NEIGHBOR,node:a,neighbor:s}),replaceLastQuery(e,t,i),s}},{name:"child",separator:!0,regex:tokens.child,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=newQuery(),o=e[e.length-1];return r.checks.push({type:Type.CHILD,parent:o,child:n}),replaceLastQuery(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var i=newQuery(),a=e[e.length-1],s=newQuery(),l=newQuery(),u=newQuery(),c=newQuery();return i.checks.push({type:Type.COMPOUND_SPLIT,left:a,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Type.TRUE}],c.checks.push({type:Type.TRUE}),s.checks.push({type:Type.PARENT,parent:c,child:u}),replaceLastQuery(e,a,i),e.currentSubject=l,e.compoundCount++,u}var g=newQuery(),d=newQuery(),p=[{type:Type.PARENT,parent:g,child:d}];return g.checks=t.checks,t.checks=p,e.compoundCount++,d}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=newQuery(),o=e[e.length-1];return r.checks.push({type:Type.DESCENDANT,ancestor:o,descendant:n}),replaceLastQuery(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var i=newQuery(),a=e[e.length-1],s=newQuery(),l=newQuery(),u=newQuery(),c=newQuery();return i.checks.push({type:Type.COMPOUND_SPLIT,left:a,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Type.TRUE}],c.checks.push({type:Type.TRUE}),s.checks.push({type:Type.ANCESTOR,ancestor:c,descendant:u}),replaceLastQuery(e,a,i),e.currentSubject=l,e.compoundCount++,u}var g=newQuery(),d=newQuery(),p=[{type:Type.ANCESTOR,ancestor:g,descendant:d}];return g.checks=t.checks,t.checks=p,e.compoundCount++,d}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return warn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1].checks[0],n=null==r?null:r.type;n===Type.DIRECTED_EDGE?r.type=Type.NODE_TARGET:n===Type.UNDIRECTED_EDGE&&(r.type=Type.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];exprs.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var consumeExpr=function(e){for(var t,r,n,o=0;o<exprs.length;o++){var i=exprs[o],a=i.name,s=e.match(i.regexObj);if(null!=s){r=s,t=i,n=a;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:r,name:n,remaining:e}},consumeWhitespace=function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e},parse=function(e){var t=this,r=t.inputText=e,n=t[0]=newQuery();for(t.length=1,r=consumeWhitespace(r);;){var o=consumeExpr(r);if(null==o.expr)return warn("The selector `"+e+"`is invalid"),!1;var i=o.match.slice(1),a=o.expr.populate(t,n,i);if(!1===a)return!1;if(null!=a&&(n=a),(r=o.remaining).match(/^\s*$/))break}var s=t[t.length-1];null!=t.currentSubject&&(s.subject=t.currentSubject),s.edgeCount=t.edgeCount,s.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var u=t[l];if(u.compoundCount>0&&u.edgeCount>0)return warn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(u.edgeCount>1)return warn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===u.edgeCount&&warn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString=function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return string(t)?'"'+t+'"':e(t)},r=function(e){return" "+e+" "},n=function(n,i){var a=n.type,s=n.value;switch(a){case Type.GROUP:var l=e(s);return l.substring(0,l.length-1);case Type.DATA_COMPARE:var u=n.field,c=n.operator;return"["+u+r(e(c))+t(s)+"]";case Type.DATA_BOOL:var g=n.operator,d=n.field;return"["+e(g)+d+"]";case Type.DATA_EXIST:return"["+n.field+"]";case Type.META_COMPARE:var p=n.operator;return"[["+n.field+r(e(p))+t(s)+"]]";case Type.STATE:return s;case Type.ID:return"#"+s;case Type.CLASS:return"."+s;case Type.PARENT:case Type.CHILD:return o(n.parent,i)+r(">")+o(n.child,i);case Type.ANCESTOR:case Type.DESCENDANT:return o(n.ancestor,i)+" "+o(n.descendant,i);case Type.COMPOUND_SPLIT:var h=o(n.left,i),f=o(n.subject,i),y=o(n.right,i);return h+(h.length>0?" ":"")+f+y;case Type.TRUE:return""}},o=function(e,t){return e.checks.reduce((function(r,o,i){return r+(t===e&&0===i?"$":"")+n(o,t)}),"")},i="",a=0;a<this.length;a++){var s=this[a];i+=o(s,s.subject),this.length>1&&a<this.length-1&&(i+=", ")}return this.toStringCache=i,i},parse$1={parse:parse,toString:toString},valCmp=function(e,t,r){var n,o,i,a=string(e),s=number$1(e),l=string(r),u=!1,c=!1,g=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(a||l||u)&&(o=a||s?""+e:"",i=""+r),u&&(e=o=o.toLowerCase(),r=i=i.toLowerCase()),t){case"*=":n=o.indexOf(i)>=0;break;case"$=":n=o.indexOf(i,o.length-i.length)>=0;break;case"^=":n=0===o.indexOf(i);break;case"=":n=e===r;break;case">":g=!0,n=e>r;break;case">=":g=!0,n=e>=r;break;case"<":g=!0,n=e<r;break;case"<=":g=!0,n=e<=r;break;default:n=!1}return!c||null==e&&g||(n=!n),n},boolCmp=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}},existCmp=function(e){return void 0!==e},data$1=function(e,t){return e.data(t)},meta=function(e,t){return e[t]()},match=[],matches$1=function(e,t){return e.checks.every((function(e){return match[e.type](e,t)}))};match[Type.GROUP]=function(e,t){var r=e.value;return"*"===r||r===t.group()},match[Type.STATE]=function(e,t){var r=e.value;return stateSelectorMatches(r,t)},match[Type.ID]=function(e,t){var r=e.value;return t.id()===r},match[Type.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)},match[Type.META_COMPARE]=function(e,t){var r=e.field,n=e.operator,o=e.value;return valCmp(meta(t,r),n,o)},match[Type.DATA_COMPARE]=function(e,t){var r=e.field,n=e.operator,o=e.value;return valCmp(data$1(t,r),n,o)},match[Type.DATA_BOOL]=function(e,t){var r=e.field,n=e.operator;return boolCmp(data$1(t,r),n)},match[Type.DATA_EXIST]=function(e,t){var r=e.field;return e.operator,existCmp(data$1(t,r))},match[Type.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0],n=e.nodes[1],o=t.source(),i=t.target();return matches$1(r,o)&&matches$1(n,i)||matches$1(n,o)&&matches$1(r,i)},match[Type.NODE_NEIGHBOR]=function(e,t){return matches$1(e.node,t)&&t.neighborhood().some((function(t){return t.isNode()&&matches$1(e.neighbor,t)}))},match[Type.DIRECTED_EDGE]=function(e,t){return matches$1(e.source,t.source())&&matches$1(e.target,t.target())},match[Type.NODE_SOURCE]=function(e,t){return matches$1(e.source,t)&&t.outgoers().some((function(t){return t.isNode()&&matches$1(e.target,t)}))},match[Type.NODE_TARGET]=function(e,t){return matches$1(e.target,t)&&t.incomers().some((function(t){return t.isNode()&&matches$1(e.source,t)}))},match[Type.CHILD]=function(e,t){return matches$1(e.child,t)&&matches$1(e.parent,t.parent())},match[Type.PARENT]=function(e,t){return matches$1(e.parent,t)&&t.children().some((function(t){return matches$1(e.child,t)}))},match[Type.DESCENDANT]=function(e,t){return matches$1(e.descendant,t)&&t.ancestors().some((function(t){return matches$1(e.ancestor,t)}))},match[Type.ANCESTOR]=function(e,t){return matches$1(e.ancestor,t)&&t.descendants().some((function(t){return matches$1(e.descendant,t)}))},match[Type.COMPOUND_SPLIT]=function(e,t){return matches$1(e.subject,t)&&matches$1(e.left,t)&&matches$1(e.right,t)},match[Type.TRUE]=function(){return!0},match[Type.COLLECTION]=function(e,t){return e.value.has(t)},match[Type.FILTER]=function(e,t){return(0,e.value)(t)};var filter=function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===Type.ID)return e.getElementById(t[0].checks[0].value).collection();var r=function(e){for(var r=0;r<t.length;r++){var n=t[r];if(matches$1(n,e))return!0}return!1};return null==t.text()&&(r=function(){return!0}),e.filter(r)},matches=function(e){for(var t=0;t<this.length;t++){var r=this[t];if(matches$1(r,e))return!0}return!1},matching={matches:matches,filter:filter},Selector=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||string(e)&&e.match(/^\s*$/)||(elementOrCollection(e)?this.addQuery({checks:[{type:Type.COLLECTION,value:e.collection()}]}):fn$6(e)?this.addQuery({checks:[{type:Type.FILTER,value:e}]}):string(e)?this.parse(e)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1,matching].forEach((function(e){return extend(selfn,e)})),selfn.text=function(){return this.inputText},selfn.size=function(){return this.length},selfn.eq=function(e){return this[e]},selfn.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},selfn.addQuery=function(e){this[this.length++]=e},selfn.selector=selfn.toString;var elesfn$g={allAre:function(e){var t=new Selector(e);return this.every((function(e){return t.matches(e)}))},is:function(e){var t=new Selector(e);return this.some((function(e){return t.matches(e)}))},some:function(e,t){for(var r=0;r<this.length;r++){if(t?e.apply(t,[this[r],r,this]):e(this[r],r,this))return!0}return!1},every:function(e,t){for(var r=0;r<this.length;r++){if(!(t?e.apply(t,[this[r],r,this]):e(this[r],r,this)))return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every((function(t){return e.hasElementWithId(t.id())})))},anySame:function(e){return e=this.cy().collection(e),this.some((function(t){return e.hasElementWithId(t.id())}))},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every((function(e){return t.hasElementWithId(e.id())}))},contains:function(e){e=this.cy().collection(e);var t=this;return e.every((function(e){return t.hasElementWithId(e.id())}))}};elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors,elesfn$g.has=elesfn$g.contains,elesfn$g.equal=elesfn$g.equals=elesfn$g.same;var cache=function(e,t){return function(r,n,o,i){var a,s=r,l=this;if(null==s?a="":elementOrCollection(s)&&1===s.length&&(a=s.id()),1===l.length&&a){var u=l[0]._private,c=u.traversalCache=u.traversalCache||{},g=c[t]=c[t]||[],d=hashString(a),p=g[d];return p||(g[d]=e.call(l,r,n,o,i))}return e.call(l,r,n,o,i)}},elesfn$f={parent:function(e){var t=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var n=0;n<this.length;n++){var o=this[n]._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var o=r[n];t.push(o)}r=r.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,r=0;r<this.length;r++){var n=this[r].parents();t=(t=t||n).intersect(n)}return t.filter(e)},orphans:function(e){return this.stdFilter((function(e){return e.isOrphan()})).filter(e)},nonorphans:function(e){return this.stdFilter((function(e){return e.isChild()})).filter(e)},children:cache((function(e){for(var t=[],r=0;r<this.length;r++)for(var n=this[r]._private.children,o=0;o<n.length;o++)t.push(n[o]);return this.spawn(t,!0).filter(e)}),"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(r){for(var n=0;n<r.length;n++){var o=r[n];t.push(o),o.children().nonempty()&&e(o.children())}}(this.children()),this.spawn(t,!0).filter(e)}},fn$5,elesfn$e;function forEachCompound(e,t,r,n){for(var o=[],i=new Set$1,a=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];r?o.push(l):a&&n(o,i,l)}for(;o.length>0;){var u=o.shift();t(u),i.add(u.id()),a&&n(o,i,u)}return e}function addChildren(e,t,r){if(r.isParent())for(var n=r._private.children,o=0;o<n.length;o++){var i=n[o];t.has(i.id())||e.push(i)}}function addParent(e,t,r){if(r.isChild()){var n=r._private.parent;t.has(n.id())||e.push(n)}}function addParentAndChildren(e,t,r){addParent(e,t,r),addChildren(e,t,r)}elesfn$f.forEachDown=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addChildren)},elesfn$f.forEachUp=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParent)},elesfn$f.forEachUpAndDown=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParentAndChildren)},elesfn$f.ancestors=elesfn$f.parents,fn$5=elesfn$e={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},fn$5.attr=fn$5.data,fn$5.removeAttr=fn$5.removeData;var data=elesfn$e,elesfn$d={},fn$4,elesfn$c;function defineDegreeFunction(e){return function(t){var r=this;if(void 0===t&&(t=!0),0!==r.length&&r.isNode()&&!r.removed()){for(var n=0,o=r[0],i=o._private.edges,a=0;a<i.length;a++){var s=i[a];!t&&s.isLoop()||(n+=e(o,s))}return n}}}function defineDegreeBoundsFunction(e,t){return function(r){for(var n,o=this.nodes(),i=0;i<o.length;i++){var a=o[i][e](r);void 0===a||void 0!==n&&!t(a,n)||(n=a)}return n}}extend(elesfn$d,{degree:defineDegreeFunction((function(e,t){return t.source().same(t.target())?2:1})),indegree:defineDegreeFunction((function(e,t){return t.target().same(e)?1:0})),outdegree:defineDegreeFunction((function(e,t){return t.source().same(e)?1:0}))}),extend(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",(function(e,t){return e<t})),maxDegree:defineDegreeBoundsFunction("degree",(function(e,t){return e>t})),minIndegree:defineDegreeBoundsFunction("indegree",(function(e,t){return e<t})),maxIndegree:defineDegreeBoundsFunction("indegree",(function(e,t){return e>t})),minOutdegree:defineDegreeBoundsFunction("outdegree",(function(e,t){return e<t})),maxOutdegree:defineDegreeBoundsFunction("outdegree",(function(e,t){return e>t}))}),extend(elesfn$d,{totalDegree:function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}});var beforePositionSet=function(e,t,r){for(var n=0;n<e.length;n++){var o=e[n];if(!o.locked()){var i=o._private.position,a={x:null!=t.x?t.x-i.x:0,y:null!=t.y?t.y-i.y:0};!o.isParent()||0===a.x&&0===a.y||o.children().shift(a,r),o.dirtyBoundingBoxCache()}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){beforePositionSet(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};fn$4=elesfn$c={position:define.data(positionDef),silentPosition:define.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){beforePositionSet(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(plainObject(e))t?this.silentPosition(e):this.position(e);else if(fn$6(e)){var r=e,n=this.cy();n.startBatch();for(var o=0;o<this.length;o++){var i,a=this[o];(i=r(a,o))&&(t?a.silentPosition(i):a.position(i))}n.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,r){var n;if(plainObject(e)?(n={x:number$1(e.x)?e.x:0,y:number$1(e.y)?e.y:0},r=t):string(e)&&number$1(t)&&((n={x:0,y:0})[e]=t),null!=n){var o=this.cy();o.startBatch();for(var i=0;i<this.length;i++){var a=this[i];if(!(o.hasCompoundNodes()&&a.isChild()&&a.ancestors().anySame(this))){var s=a.position(),l={x:s.x+n.x,y:s.y+n.y};r?a.silentPosition(l):a.position(l)}}o.endBatch()}return this},silentShift:function(e,t){return plainObject(e)?this.shift(e,!0):string(e)&&number$1(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var r=this[0],n=this.cy(),o=n.zoom(),i=n.pan(),a=plainObject(e)?e:void 0,s=void 0!==a||void 0!==t&&string(e);if(r&&r.isNode()){if(!s){var l=r.position();return a=modelToRenderedPosition(l,o,i),void 0===e?a:a[e]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==t?c.position(e,(t-i[e])/o):void 0!==a&&c.position(renderedToModelPosition(a,o,i))}}else if(!s)return;return this},relativePosition:function(e,t){var r=this[0],n=this.cy(),o=plainObject(e)?e:void 0,i=void 0!==o||void 0!==t&&string(e),a=n.hasCompoundNodes();if(r&&r.isNode()){if(!i){var s=r.position(),l=a?r.parent():null,u=l&&l.length>0,c=u;u&&(l=l[0]);var g=c?l.position():{x:0,y:0};return o={x:s.x-g.x,y:s.y-g.y},void 0===e?o:o[e]}for(var d=0;d<this.length;d++){var p=this[d],h=a?p.parent():null,f=h&&h.length>0,y=f;f&&(h=h[0]);var m=y?h.position():{x:0,y:0};void 0!==t?p.position(e,t+m[e]):void 0!==o&&p.position({x:o.x+m.x,y:o.y+m.y})}}else if(!i)return;return this}},fn$4.modelPosition=fn$4.point=fn$4.position,fn$4.modelPositions=fn$4.points=fn$4.positions,fn$4.renderedPoint=fn$4.renderedPosition,fn$4.relativePoint=fn$4.relativePosition;var position=elesfn$c,fn$3,elesfn$b;fn$3=elesfn$b={},elesfn$b.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),o=r.pan(),i=t.x1*n+o.x,a=t.x2*n+o.x,s=t.y1*n+o.y,l=t.y2*n+o.y;return{x1:i,x2:a,y1:s,y2:l,w:a-i,h:l-s}},elesfn$b.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var r=t._private;r.compoundBoundsClean=!1,r.bbCache=null,e||t.emitAndNotify("bounds")}})),this):this},elesfn$b.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(e){if(e.isParent()){var t=e._private,r=e.children(),n="include"===e.pstyle("compound-sizing-wrt-labels").value,o={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},i=r.boundingBox({includeLabels:n,includeOverlays:!1,useCache:!1}),a=t.position;0!==i.w&&0!==i.h||((i={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=a.x-i.w/2,i.x2=a.x+i.w/2,i.y1=a.y-i.h/2,i.y2=a.y+i.h/2);var s=o.width.left.value;"px"===o.width.left.units&&o.width.val>0&&(s=100*s/o.width.val);var l=o.width.right.value;"px"===o.width.right.units&&o.width.val>0&&(l=100*l/o.width.val);var u=o.height.top.value;"px"===o.height.top.units&&o.height.val>0&&(u=100*u/o.height.val);var c=o.height.bottom.value;"px"===o.height.bottom.units&&o.height.val>0&&(c=100*c/o.height.val);var g=m(o.width.val-i.w,s,l),d=g.biasDiff,p=g.biasComplementDiff,h=m(o.height.val-i.h,u,c),f=h.biasDiff,y=h.biasComplementDiff;t.autoPadding=function(e,t,r,n){if("%"!==r.units)return"px"===r.units?r.pfValue:0;switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}}(i.w,i.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(i.w,o.width.val),a.x=(-d+i.x1+i.x2+p)/2,t.autoHeight=Math.max(i.h,o.height.val),a.y=(-f+i.y1+i.y2+y)/2}function m(e,t,r){var n=0,o=0,i=t+r;return e>0&&i>0&&(n=t/i*e,o=r/i*e),{biasDiff:n,biasComplementDiff:o}}}for(var n=0;n<this.length;n++){var o=this[n],i=o._private;i.compoundBoundsClean&&!e||(r(o),t.batching()||(i.compoundBoundsClean=!0))}return this};var noninf=function(e){return e===1/0||e===-1/0?0:e},updateBounds=function(e,t,r,n,o){n-t!=0&&o-r!=0&&null!=t&&null!=r&&null!=n&&null!=o&&(e.x1=t<e.x1?t:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},updateBoundsFromBox=function(e,t){return null==t?e:updateBounds(e,t.x1,t.y1,t.x2,t.y2)},prefixedProperty=function(e,t,r){return getPrefixedProperty(e,t,r)},updateBoundsFromArrow=function(e,t,r){if(!t.cy().headless()){var n,o,i=t._private,a=i.rstyle,s=a.arrowWidth/2;if("none"!==t.pstyle(r+"-arrow-shape").value){"source"===r?(n=a.srcX,o=a.srcY):"target"===r?(n=a.tgtX,o=a.tgtY):(n=a.midX,o=a.midY);var l=i.arrowBounds=i.arrowBounds||{},u=l[r]=l[r]||{};u.x1=n-s,u.y1=o-s,u.x2=n+s,u.y2=o+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,expandBoundingBox(u,1),updateBounds(e,u.x1,u.y1,u.x2,u.y2)}}},updateBoundsFromLabel=function(e,t,r){if(!t.cy().headless()){var n;n=r?r+"-":"";var o=t._private,i=o.rstyle;if(t.pstyle(n+"label").strValue){var a,s,l,u,c=t.pstyle("text-halign"),g=t.pstyle("text-valign"),d=prefixedProperty(i,"labelWidth",r),p=prefixedProperty(i,"labelHeight",r),h=prefixedProperty(i,"labelX",r),f=prefixedProperty(i,"labelY",r),y=t.pstyle(n+"text-margin-x").pfValue,m=t.pstyle(n+"text-margin-y").pfValue,b=t.isEdge(),_=t.pstyle(n+"text-rotation"),v=t.pstyle("text-outline-width").pfValue,S=t.pstyle("text-border-width").pfValue/2,E=t.pstyle("text-background-padding").pfValue,w=p,x=d,T=x/2,R=w/2;if(b)a=h-T,s=h+T,l=f-R,u=f+R;else{switch(c.value){case"left":a=h-x,s=h;break;case"center":a=h-T,s=h+T;break;case"right":a=h,s=h+x}switch(g.value){case"top":l=f-w,u=f;break;case"center":l=f-R,u=f+R;break;case"bottom":l=f,u=f+w}}a+=y-Math.max(v,S)-E-2,s+=y+Math.max(v,S)+E+2,l+=m-Math.max(v,S)-E-2,u+=m+Math.max(v,S)+E+2;var A=r||"main",j=o.labelBounds,C=j[A]=j[A]||{};C.x1=a,C.y1=l,C.x2=s,C.y2=u,C.w=s-a,C.h=u-l;var P=b&&"autorotate"===_.strValue,I=null!=_.pfValue&&0!==_.pfValue;if(P||I){var M=P?prefixedProperty(o.rstyle,"labelAngle",r):_.pfValue,O=Math.cos(M),B=Math.sin(M),N=(a+s)/2,k=(l+u)/2;if(!b){switch(c.value){case"left":N=s;break;case"right":N=a}switch(g.value){case"top":k=u;break;case"bottom":k=l}}var D=function(e,t){return{x:(e-=N)*O-(t-=k)*B+N,y:e*B+t*O+k}},q=D(a,l),$=D(a,u),F=D(s,l),L=D(s,u);a=Math.min(q.x,$.x,F.x,L.x),s=Math.max(q.x,$.x,F.x,L.x),l=Math.min(q.y,$.y,F.y,L.y),u=Math.max(q.y,$.y,F.y,L.y)}var U=A+"Rot",W=j[U]=j[U]||{};W.x1=a,W.y1=l,W.x2=s,W.y2=u,W.w=s-a,W.h=u-l,updateBounds(e,a,l,s,u),updateBounds(o.labelBounds.all,a,l,s,u)}return e}},boundingBoxImpl=function(e,t){var r,n,o,i,a,s,l=e._private.cy,u=l.styleEnabled(),c=l.headless(),g=makeBoundingBox(),d=e._private,p=e.isNode(),h=e.isEdge(),f=d.rstyle,y=p&&u?e.pstyle("bounds-expansion").pfValue:[0],m=function(e){return"none"!==e.pstyle("display").value},b=!u||m(e)&&(!h||m(e.source())&&m(e.target()));if(b){var _=0;u&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(_=e.pstyle("overlay-padding").value);var v=0;u&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(v=e.pstyle("underlay-padding").value);var S=Math.max(_,v),E=0;if(u&&(E=e.pstyle("width").pfValue/2),p&&t.includeNodes){var w=e.position();a=w.x,s=w.y;var x=e.outerWidth()/2,T=e.outerHeight()/2;updateBounds(g,r=a-x,o=s-T,n=a+x,i=s+T)}else if(h&&t.includeEdges)if(u&&!c){var R=e.pstyle("curve-style").strValue;if(r=Math.min(f.srcX,f.midX,f.tgtX),n=Math.max(f.srcX,f.midX,f.tgtX),o=Math.min(f.srcY,f.midY,f.tgtY),i=Math.max(f.srcY,f.midY,f.tgtY),updateBounds(g,r-=E,o-=E,n+=E,i+=E),"haystack"===R){var A=f.haystackPts;if(A&&2===A.length){if(r=A[0].x,o=A[0].y,r>(n=A[1].x)){var j=r;r=n,n=j}if(o>(i=A[1].y)){var C=o;o=i,i=C}updateBounds(g,r-E,o-E,n+E,i+E)}}else if("bezier"===R||"unbundled-bezier"===R||"segments"===R||"taxi"===R){var P;switch(R){case"bezier":case"unbundled-bezier":P=f.bezierPts;break;case"segments":case"taxi":P=f.linePts}if(null!=P)for(var I=0;I<P.length;I++){var M=P[I];r=M.x-E,n=M.x+E,o=M.y-E,i=M.y+E,updateBounds(g,r,o,n,i)}}}else{var O=e.source().position(),B=e.target().position();if((r=O.x)>(n=B.x)){var N=r;r=n,n=N}if((o=O.y)>(i=B.y)){var k=o;o=i,i=k}updateBounds(g,r-=E,o-=E,n+=E,i+=E)}if(u&&t.includeEdges&&h&&(updateBoundsFromArrow(g,e,"mid-source"),updateBoundsFromArrow(g,e,"mid-target"),updateBoundsFromArrow(g,e,"source"),updateBoundsFromArrow(g,e,"target")),u)if("yes"===e.pstyle("ghost").value){var D=e.pstyle("ghost-offset-x").pfValue,q=e.pstyle("ghost-offset-y").pfValue;updateBounds(g,g.x1+D,g.y1+q,g.x2+D,g.y2+q)}var $=d.bodyBounds=d.bodyBounds||{};assignBoundingBox($,g),expandBoundingBoxSides($,y),expandBoundingBox($,1),u&&(r=g.x1,n=g.x2,o=g.y1,i=g.y2,updateBounds(g,r-S,o-S,n+S,i+S));var F=d.overlayBounds=d.overlayBounds||{};assignBoundingBox(F,g),expandBoundingBoxSides(F,y),expandBoundingBox(F,1);var L=d.labelBounds=d.labelBounds||{};null!=L.all?clearBoundingBox(L.all):L.all=makeBoundingBox(),u&&t.includeLabels&&(t.includeMainLabels&&updateBoundsFromLabel(g,e,null),h&&(t.includeSourceLabels&&updateBoundsFromLabel(g,e,"source"),t.includeTargetLabels&&updateBoundsFromLabel(g,e,"target")))}return g.x1=noninf(g.x1),g.y1=noninf(g.y1),g.x2=noninf(g.x2),g.y2=noninf(g.y2),g.w=noninf(g.x2-g.x1),g.h=noninf(g.y2-g.y1),g.w>0&&g.h>0&&b&&(expandBoundingBoxSides(g,y),expandBoundingBox(g,1)),g},getKey=function(e){var t=0,r=function(e){return(e?1:0)<<t++},n=0;return n+=r(e.incudeNodes),n+=r(e.includeEdges),n+=r(e.includeLabels),n+=r(e.includeMainLabels),n+=r(e.includeSourceLabels),n+=r(e.includeTargetLabels),n+=r(e.includeOverlays)},getBoundingBoxPosKey=function(e){if(e.isEdge()){var t=e.source().position(),r=e.target().position(),n=function(e){return Math.round(e)};return hashIntsArray([n(t.x),n(t.y),n(r.x),n(r.y)])}return 0},cachedBoundingBoxImpl=function(e,t){var r,n=e._private,o=e.isEdge(),i=(null==t?defBbOptsKey:getKey(t))===defBbOptsKey,a=getBoundingBoxPosKey(e),s=n.bbCachePosKey===a,l=t.useCache&&s,u=function(e){return null==e._private.bbCache||e._private.styleDirty};if(!l||u(e)||o&&u(e.source())||u(e.target())?(s||e.recalculateRenderedStyle(l),r=boundingBoxImpl(e,defBbOpts),n.bbCache=r,n.bbCachePosKey=a):r=n.bbCache,!i){var c=e.isNode();r=makeBoundingBox(),(t.includeNodes&&c||t.includeEdges&&!c)&&(t.includeOverlays?updateBoundsFromBox(r,n.overlayBounds):updateBoundsFromBox(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!o||t.includeSourceLabels&&t.includeTargetLabels)?updateBoundsFromBox(r,n.labelBounds.all):(t.includeMainLabels&&updateBoundsFromBox(r,n.labelBounds.mainRot),t.includeSourceLabels&&updateBoundsFromBox(r,n.labelBounds.sourceRot),t.includeTargetLabels&&updateBoundsFromBox(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults$g(defBbOpts);elesfn$b.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=makeBoundingBox();var r=filledBbOpts(e=e||defBbOpts),n=this;if(n.cy().styleEnabled())for(var o=0;o<n.length;o++){var i=n[o],a=i._private,s=getBoundingBoxPosKey(i),l=a.bbCachePosKey===s,u=r.useCache&&l&&!a.styleDirty;i.recalculateRenderedStyle(u)}this.updateCompoundBounds(!e.useCache);for(var c=0;c<n.length;c++){var g=n[c];updateBoundsFromBox(t,cachedBoundingBoxImpl(g,r))}}else e=void 0===e?defBbOpts:filledBbOpts(e),t=cachedBoundingBoxImpl(this[0],e);return t.x1=noninf(t.x1),t.y1=noninf(t.y1),t.x2=noninf(t.x2),t.y2=noninf(t.y2),t.w=noninf(t.x2-t.x1),t.h=noninf(t.y2-t.y1),t},elesfn$b.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},elesfn$b.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),o=r.collection();if(n&&(o=t.filter((function(e){return e.isParent()})),t=t.not(o)),plainObject(e)){var i=e;e=function(){return i}}r.startBatch(),t.forEach((function(t,r){return t._private.bbAtOldPos=e(t,r)})).silentPositions(e),n&&(o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),o.updateCompoundBounds(!0));var a=copyBoundingBox(this.boundingBox({useCache:!1}));return t.silentPositions((function(e){return e._private.bbAtOldPos})),n&&(o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),o.updateCompoundBounds(!0)),r.endBatch(),a},fn$3.boundingbox=fn$3.bb=fn$3.boundingBox,fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var bounds=elesfn$b,fn$2,elesfn$a;fn$2=elesfn$a={};var defineDimFns=function(e){e.uppercaseName=capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=capitalize(e.outerName),fn$2[e.name]=function(){var t=this[0],r=t._private,n=r.cy._private.styleEnabled;if(t){if(n){if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var o=t.pstyle(e.name);return"label"===o.strValue?(t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0):o.pfValue}return 1}},fn$2["outer"+e.uppercaseName]=function(){var t=this[0],r=t._private.cy._private.styleEnabled;if(t)return r?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},fn$2["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},fn$2["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};defineDimFns({name:"width"}),defineDimFns({name:"height"}),elesfn$a.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},elesfn$a.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},elesfn$a.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var widthHeight=elesfn$a,ifEdge=function(e,t){if(e.isEdge())return t(e)},ifEdgeRenderedPosition=function(e,t){if(e.isEdge()){var r=e.cy();return modelToRenderedPosition(t(e),r.zoom(),r.pan())}},ifEdgeRenderedPositions=function(e,t){if(e.isEdge()){var r=e.cy(),n=r.pan(),o=r.zoom();return t(e).map((function(e){return modelToRenderedPosition(e,o,n)}))}},controlPoints=function(e){return e.renderer().getControlPoints(e)},segmentPoints=function(e){return e.renderer().getSegmentPoints(e)},sourceEndpoint=function(e){return e.renderer().getSourceEndpoint(e)},targetEndpoint=function(e){return e.renderer().getTargetEndpoint(e)},midpoint=function(e){return e.renderer().getEdgeMidpoint(e)},pts={controlPoints:{get:controlPoints,mult:!0},segmentPoints:{get:segmentPoints,mult:!0},sourceEndpoint:{get:sourceEndpoint},targetEndpoint:{get:targetEndpoint},midpoint:{get:midpoint}},renderedName=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},edgePoints=Object.keys(pts).reduce((function(e,t){var r=pts[t],n=renderedName(t);return e[t]=function(){return ifEdge(this,r.get)},r.mult?e[n]=function(){return ifEdgeRenderedPositions(this,r.get)}:e[n]=function(){return ifEdgeRenderedPosition(this,r.get)},e}),{}),dimensions=extend({},position,bounds,widthHeight,edgePoints),Event=function(e,t){this.recycle(e,t)};function returnFalse(){return!1}function returnTrue(){return!0}Event.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?returnTrue:returnFalse):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,n=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:r.x*n+o.x,y:r.y*n+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:emptyOpts,t=arguments.length>1?arguments[1]:void 0,r=0;r<defaultsKeys.length;r++){var n=defaultsKeys[r];this[n]=e[n]||defaults$8[n]}this.context=t||this.context,this.listeners=[],this.emitting=0}var p=Emitter.prototype,forEachEvent=function(e,t,r,n,o,i,a){fn$6(n)&&(o=n,n=null),a&&(i=null==i?a:extend({},i,a));for(var s=array(r)?r:r.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!emptyString(u)){var c=u.match(eventRegex);if(c)if(!1===t(e,u,c[1],c[2]?c[2]:null,n,o,i))break}}},makeEventObj=function(e,t){return e.addEventFields(e.context,t),new Event(t.type,t)},forEachEventObj=function(e,t,r){if(event(r))t(e,r);else if(plainObject(r))t(e,makeEventObj(e,r));else for(var n=array(r)?r:r.split(/\s+/),o=0;o<n.length;o++){var i=n[o];if(!emptyString(i)){var a=i.match(eventRegex);if(a){var s=a[1],l=a[2]?a[2]:null;t(e,makeEventObj(e,{type:s,namespace:l,target:e.context}))}}}};p.on=p.addListener=function(e,t,r,n,o){return forEachEvent(this,(function(e,t,r,n,o,i,a){fn$6(i)&&e.listeners.push({event:t,callback:i,type:r,namespace:n,qualifier:o,conf:a})}),e,t,r,n,o),this},p.one=function(e,t,r,n){return this.on(e,t,r,n,{one:!0})},p.removeListener=p.off=function(e,t,r,n){var o=this;0!==this.emitting&&(this.listeners=copyArray(this.listeners));for(var i=this.listeners,a=function(a){var s=i[a];forEachEvent(o,(function(t,r,n,o,l,u){if((s.type===n||"*"===e)&&(!o&&".*"!==s.namespace||s.namespace===o)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return i.splice(a,1),!1}),e,t,r,n)},s=i.length-1;s>=0;s--)a(s);return this},p.removeAllListeners=function(){return this.removeListener("*")},p.emit=p.trigger=function(e,t,r){var n=this.listeners,o=n.length;return this.emitting++,array(t)||(t=[t]),forEachEventObj(this,(function(e,i){null!=r&&(n=[{event:i.event,type:i.type,namespace:i.namespace,callback:r}],o=n.length);for(var a=function(r){var o=n[r];if(o.type===i.type&&(!o.namespace||o.namespace===i.namespace||o.namespace===universalNamespace)&&e.eventMatches(e.context,o,i)){var a=[i];null!=t&&push(a,t),e.beforeEmit(e.context,o,i),o.conf&&o.conf.one&&(e.listeners=e.listeners.filter((function(e){return e!==o})));var s=e.callbackContext(e.context,o,i),l=o.callback.apply(s,a);e.afterEmit(e.context,o,i),!1===l&&(i.stopPropagation(),i.preventDefault())}},s=0;s<o;s++)a(s);e.bubble(e.context)&&!i.isPropagationStopped()&&e.parent(e.context).emit(i,t)}),e),this.emitting--,this};var emitterOptions$1={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&element(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},argSelector$1=function(e){return string(e)?new Selector(e):e},elesfn$9={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new Emitter(emitterOptions$1,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,r){for(var n=argSelector$1(t),o=0;o<this.length;o++){this[o].emitter().on(e,n,r)}return this},removeListener:function(e,t,r){for(var n=argSelector$1(t),o=0;o<this.length;o++){this[o].emitter().removeListener(e,n,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function(e,t,r){for(var n=argSelector$1(t),o=0;o<this.length;o++){this[o].emitter().one(e,n,r)}return this},once:function(e,t,r){for(var n=argSelector$1(t),o=0;o<this.length;o++){this[o].emitter().on(e,n,r,{once:!0,onceCollection:this})}},emit:function(e,t){for(var r=0;r<this.length;r++){this[r].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};define.eventAliasesOn(elesfn$9);var elesfn$8={nodes:function(e){return this.filter((function(e){return e.isNode()})).filter(e)},edges:function(e){return this.filter((function(e){return e.isEdge()})).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var n=this[r];n.isNode()?e.push(n):t.push(n)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(string(e)||elementOrCollection(e))return new Selector(e).filter(this);if(fn$6(e)){for(var r=this.spawn(),n=this,o=0;o<n.length;o++){var i=n[o];(t?e.apply(t,[i,o,n]):e(i,o,n))&&r.push(i)}return r}return this.spawn()},not:function(e){if(e){string(e)&&(e=this.filter(e));for(var t=this.spawn(),r=0;r<this.length;r++){var n=this[r];e.has(n)||t.push(n)}return t}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(string(e)){var t=e;return this.filter(t)}for(var r=this.spawn(),n=e,o=this.length<e.length,i=o?this:n,a=o?n:this,s=0;s<i.length;s++){var l=i[s];a.has(l)&&r.push(l)}return r},xor:function(e){var t=this._private.cy;string(e)&&(e=t.$(e));var r=this.spawn(),n=e,o=function(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=o._private.data.id;t.hasElementWithId(i)||r.push(o)}};return o(this,n),o(n,this),r},diff:function(e){var t=this._private.cy;string(e)&&(e=t.$(e));var r=this.spawn(),n=this.spawn(),o=this.spawn(),i=e,a=function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n],a=i._private.data.id;t.hasElementWithId(a)?o.merge(i):r.push(i)}};return a(this,i,r),a(i,this,n),{left:r,right:n,both:o}},add:function(e){var t=this._private.cy;if(!e)return this;if(string(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=this.spawnSelf(),o=0;o<e.length;o++){var i=e[o],a=!this.has(i);a&&n.push(i)}return n},merge:function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&string(e)){var n=e;e=r.mutableElements().filter(n)}for(var o=t.map,i=0;i<e.length;i++){var a=e[i],s=a._private.data.id;if(!o.has(s)){var l=this.length++;this[l]=a,o.set(s,{ele:a,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),r=this._private.map;this[e]=void 0,r.delete(t);var n=e===this.length-1;if(this.length>1&&!n){var o=this.length-1,i=this[o],a=i._private.data.id;this[o]=void 0,this[e]=i,r.set(a,{ele:i,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,r=e._private.data.id,n=t.map.get(r);if(!n)return this;var o=n.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&string(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function(e,t){for(var r=[],n=this,o=0;o<n.length;o++){var i=n[o],a=t?e.apply(t,[i,o,n]):e(i,o,n);r.push(a)}return r},reduce:function(e,t){for(var r=t,n=this,o=0;o<n.length;o++)r=e(r,n[o],o,n);return r},max:function(e,t){for(var r,n=-1/0,o=this,i=0;i<o.length;i++){var a=o[i],s=t?e.apply(t,[a,i,o]):e(a,i,o);s>n&&(n=s,r=a)}return{value:n,ele:r}},min:function(e,t){for(var r,n=1/0,o=this,i=0;i<o.length;i++){var a=o[i],s=t?e.apply(t,[a,i,o]):e(a,i,o);s<n&&(n=s,r=a)}return{value:n,ele:r}}},fn$1=elesfn$8;fn$1.u=fn$1["|"]=fn$1["+"]=fn$1.union=fn$1.or=fn$1.add,fn$1["\\"]=fn$1["!"]=fn$1["-"]=fn$1.difference=fn$1.relativeComplement=fn$1.subtract=fn$1.not,fn$1.n=fn$1["&"]=fn$1["."]=fn$1.and=fn$1.intersection=fn$1.intersect,fn$1["^"]=fn$1["(+)"]=fn$1["(-)"]=fn$1.symmetricDifference=fn$1.symdiff=fn$1.xor,fn$1.fnFilter=fn$1.filterFn=fn$1.stdFilter=fn$1.filter,fn$1.complement=fn$1.abscomp=fn$1.absoluteComplement;var elesfn$7={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},zIndexSort=function(e,t){var r=e.cy().hasCompoundNodes();function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?r?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?MAX_INT$1:0}var o=n(e)-n(t);if(0!==o)return o;function i(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var a=i(e)-i(t);if(0!==a)return a;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},elesfn$6={forEach:function(e,t){if(fn$6(e))for(var r=this.length,n=0;n<r;n++){var o=this[n];if(!1===(t?e.apply(t,[o,n,this]):e(o,n,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var r=[],n=this.length;null==t&&(t=n),null==e&&(e=0),e<0&&(e=n+e),t<0&&(t=n+t);for(var o=e;o>=0&&o<t&&o<n;o++)r.push(this[o]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!fn$6(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:MAX_INT$1-1}var n=t.source,o=t.target,i=n.zDepth(),a=o.zDepth();return Math.max(i,a,0)}}};elesfn$6.each=elesfn$6.forEach;var defineSymbolIterator=function(){var e="undefined";("undefined"==typeof Symbol?"undefined":_typeof(Symbol))!=e&&_typeof(Symbol.iterator)!=e&&(elesfn$6[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},r=0,n=this.length;return _defineProperty({next:function(){return r<n?t.value=e[r++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,(function(){return this}))})};defineSymbolIterator();var getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:function(e){var t;if(e=getLayoutDimensionOptions(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,r){var n=this.nodes().filter((function(e){return!e.isParent()})),o=this.cy(),i=t.eles,a=function(e){return e.id()},s=memoize(r,a);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=t.spacingFactor&&1!==t.spacingFactor,u=function(){if(!l)return null;for(var e=makeBoundingBox(),t=0;t<n.length;t++){var r=n[t],o=s(r,t);expandBoundingBoxByPoint(e,o.x,o.y)}return e}(),c=memoize((function(e,r){var n=s(e,r);l&&(n=function(e,t,r){var n=t.x1+t.w/2,o=t.y1+t.h/2;return{x:n+(r.x-n)*e,y:o+(r.y-o)*e}}(Math.abs(t.spacingFactor),u,n));return null!=t.transform&&(n=t.transform(e,n)),n}),a);if(t.animate){for(var g=0;g<n.length;g++){var d=n[g],p=c(d,g);if(null==t.animateFilter||t.animateFilter(d,g)){var h=d.animation({position:p,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(h)}else d.position(p)}if(t.fit){var f=o.animation({fit:{boundingBox:i.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(f)}else if(void 0!==t.zoom&&void 0!==t.pan){var y=o.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}e.animations.forEach((function(e){return e.play()})),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Promise$1.all(e.animations.map((function(e){return e.promise()}))).then((function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})}))}else n.positions(c),t.fit&&o.fit(t.eles,t.padding),null!=t.zoom&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(extend({},e,{eles:this}))}};function styleCache(e,t,r){var n,o=r._private,i=o.styleCache=o.styleCache||[];return null!=(n=i[e])?n:n=i[e]=t(r)}function cacheStyleFunction(e,t){return e=hashString(e),function(r){return styleCache(e,t,r)}}function cachePrototypeStyleFunction(e,t){e=hashString(e);var r=function(e){return t.call(e)};return function(){var t=this[0];if(t)return styleCache(e,r,t)}}elesfn$5.createLayout=elesfn$5.makeLayout=elesfn$5.layout;var elesfn$4={recalculateRenderedStyle:function(e){var t=this.cy(),r=t.renderer(),n=t.styleEnabled();return r&&n&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),r=function(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(r)):this.forEach((function(e){r(e),e.connectedEdges().forEach(r)}));return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var r=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var n=r;return e?n.emitAndNotify("style"):n.emit("style"),r.forEach((function(e){return e._private.styleDirty=!0})),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var r=this[t];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this[0],n=r.cy();if(n.styleEnabled()&&r){this.cleanStyle();var o=r._private.style[e];return null!=o?o:t?n.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return void 0!==r.pfValue?r.pfValue:r.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];return r?t.style().getRenderedStyle(r,e):void 0},style:function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var n=r.style();if(plainObject(e)){var o=e;n.applyBypass(this,o,false),this.emitAndNotify("style")}else if(string(e)){if(void 0===t){var i=this[0];return i?n.getStylePropertyValue(i,e):void 0}n.applyBypass(this,e,t,false),this.emitAndNotify("style")}else if(void 0===e){var a=this[0];return a?n.getRawStyle(a):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=t.style(),n=this;if(void 0===e)for(var o=0;o<n.length;o++){var i=n[o];r.removeAllBypasses(i,false)}else{e=e.split(/\s+/);for(var a=0;a<n.length;a++){var s=n[a];r.removeBypasses(s,e,false)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var n=r._private,o=r.pstyle("opacity").value;if(!t)return o;var i=n.data.parent?r.parents():null;if(i)for(var a=0;a<i.length;a++){o*=i[a].pstyle("opacity").value}return o}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function checkCompound(e,t){var r=e._private.data.parent?e.parents():null;if(r)for(var n=0;n<r.length;n++){if(!t(r[n]))return!1}return!0}function defineDerivedStateFunction(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,n=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var o=this[0],i=e.hasCompoundNodes();if(o){var a=o._private;if(!t(o))return!1;if(o.isNode())return!i||checkCompound(o,n);var s=a.source,l=a.target;return r(s)&&(!i||checkCompound(s,r))&&(s===l||r(l)&&(!i||checkCompound(l,r)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",(function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())}));elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",(function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&eleTakesUpSpace(e)})),parentInteractive=cacheStyleFunction("parentInteractive",(function(e){return"visible"===e.pstyle("visibility").value&&eleTakesUpSpace(e)}));elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace})),elesfn$4.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var eleVisible=cacheStyleFunction("eleVisible",(function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&eleTakesUpSpace(e)})),edgeVisibleViaNode=eleTakesUpSpace;elesfn$4.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode})),elesfn$4.hidden=function(){var e=this[0];if(e)return!e.visible()},elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),elesfn$4.bypass=elesfn$4.css=elesfn$4.style,elesfn$4.renderedCss=elesfn$4.renderedStyle,elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle,elesfn$4.pstyle=elesfn$4.parsedStyle;var elesfn$3={};function defineSwitchFunction(e){return function(){var t=arguments,r=[];if(2===t.length){var n=t[0],o=t[1];this.on(e.event,n,o)}else if(1===t.length&&fn$6(t[0])){var i=t[0];this.on(e.event,i)}else if(0===t.length||1===t.length&&array(t[0])){for(var a=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var g=e.overrideAble(l);if(void 0!==g&&(u=g,!g))return this}u&&(l._private[e.field]=e.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(e.event),a&&d.emit(a)}return this}}function defineSwitchSet(e){elesfn$3[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},elesfn$3[e.on]=defineSwitchFunction({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),elesfn$3[e.off]=defineSwitchFunction({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),defineSwitchSet({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),defineSwitchSet({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),elesfn$3.deselect=elesfn$3.unselect,elesfn$3.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},defineSwitchSet({field:"active",on:"activate",off:"unactivate"}),defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"}),elesfn$3.inactive=function(){var e=this[0];if(e)return!e._private.active};var elesfn$2={},defineDagExtremity=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var o=this[n];if(o.isNode()){for(var i=!1,a=o.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===o&&u!==o||e.noOutgoingEdges&&u===o&&c!==o){i=!0;break}}i||r.push(o)}}return this.spawn(r,!0).filter(t)}},defineDagOneHop=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var o=this[n];if(o.isNode())for(var i=o.connectedEdges(),a=0;a<i.length;a++){var s=i[a],l=s.source(),u=s.target();e.outgoing&&l===o?(r.push(s),r.push(u)):e.incoming&&u===o&&(r.push(s),r.push(l))}}return this.spawn(r,!0).filter(t)}},defineDagAllHops=function(e){return function(t){for(var r=this,n=[],o={};;){var i=e.outgoing?r.outgoers():r.incomers();if(0===i.length)break;for(var a=!1,s=0;s<i.length;s++){var l=i[s],u=l.id();o[u]||(o[u]=!0,n.push(l),a=!0)}if(!a)break;r=i}return this.spawn(n,!0).filter(t)}};function defineSourceFunction(e){return function(t){for(var r=[],n=0;n<this.length;n++){var o=this[n]._private[e.attr];o&&r.push(o)}return this.spawn(r,!0).filter(t)}}function defineEdgesWithFunction(e){return function(t){var r=[],n=this._private.cy,o=e||{};string(t)&&(t=n.$(t));for(var i=0;i<t.length;i++)for(var a=t[i]._private.edges,s=0;s<a.length;s++){var l=a[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),g=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||g){if(o.thisIsSrc||o.thisIsTgt){if(o.thisIsSrc&&!c)continue;if(o.thisIsTgt&&!g)continue}r.push(l)}}return this.spawn(r,!0)}}function defineParallelEdgesFunction(e){return e=extend({},{codirected:!1},e),function(t){for(var r=[],n=this.edges(),o=e,i=0;i<n.length;i++)for(var a=n[i]._private,s=a.source,l=s._private.data.id,u=a.data.target,c=s._private.edges,g=0;g<c.length;g++){var d=c[g],p=d._private.data,h=p.target,f=p.source,y=h===u&&f===l,m=l===h&&u===f;(o.codirected&&y||!o.codirected&&(y||m))&&r.push(d)}return this.spawn(r,!0).filter(t)}}elesfn$2.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},extend(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({incoming:!0})}),extend(elesfn$2,{neighborhood:cache((function(e){for(var t=[],r=this.nodes(),n=0;n<r.length;n++)for(var o=r[n],i=o.connectedEdges(),a=0;a<i.length;a++){var s=i[a],l=s.source(),u=s.target(),c=o===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,!0).filter(e)}),"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),elesfn$2.neighbourhood=elesfn$2.neighborhood,elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood,elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood,extend(elesfn$2,{source:cache((function(e){var t,r=this[0];return r&&(t=r._private.source||r.cy().collection()),t&&e?t.filter(e):t}),"source"),target:cache((function(e){var t,r=this[0];return r&&(t=r._private.target||r.cy().collection()),t&&e?t.filter(e):t}),"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})}),extend(elesfn$2,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")}),extend(elesfn$2,{connectedEdges:cache((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];if(n.isNode())for(var o=n._private.edges,i=0;i<o.length;i++){var a=o[i];t.push(a)}}return this.spawn(t,!0).filter(e)}),"connectedEdges"),connectedNodes:cache((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,!0).filter(e)}),"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")}),extend(elesfn$2,{components:function(e){var t=this,r=t.cy(),n=r.collection(),o=null==e?t.nodes():e.nodes(),i=[];null!=e&&o.empty()&&(o=e.sources());var a=function(e,t){n.merge(e),o.unmerge(e),t.merge(e)};if(o.empty())return t.spawn();var s=function(){var e=r.collection();i.push(e);var n=o[0];a(n,e),t.bfs({directed:!1,roots:n,visit:function(t){return a(t,e)}}),e.forEach((function(r){r.connectedEdges().forEach((function(r){t.has(r)&&e.has(r.source())&&e.has(r.target())&&e.merge(r)}))}))};do{s()}while(o.length>0);return i},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),elesfn$2.componentsOf=elesfn$2.components;var Collection=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var o=new Map$1,i=!1;if(t){if(t.length>0&&plainObject(t[0])&&!element(t[0])){i=!0;for(var a=[],s=new Set$1,l=0,u=t.length;l<u;l++){var c=t[l];null==c.data&&(c.data={});var g=c.data;if(null==g.id)g.id=uuid();else if(e.hasElementWithId(g.id)||s.has(g.id))continue;var d=new Element(e,c,!1);a.push(d),s.add(g.id)}t=a}}else t=[];this.length=0;for(var p=0,h=t.length;p<h;p++){var f=t[p][0];if(null!=f){var y=f._private.data.id;r&&o.has(y)||(r&&o.set(y,{index:this.length,ele:f}),this[this.length]=f,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:function(){for(var e=this.lazyMap=new Map$1,t=this.eles,r=0;r<t.length;r++){var n=t[r];e.set(n.id(),{index:r,ele:n})}}},r&&(this._private.map=o),i&&!n&&this.restore()}else error("A collection must have a reference to the core")},elesfn$1=Element.prototype=Collection.prototype=Object.create(Array.prototype);elesfn$1.instanceString=function(){return"collection"},elesfn$1.spawn=function(e,t){return new Collection(this.cy(),e,t)},elesfn$1.spawnSelf=function(){return this.spawn(this)},elesfn$1.cy=function(){return this._private.cy},elesfn$1.renderer=function(){return this._private.cy.renderer()},elesfn$1.element=function(){return this[0]},elesfn$1.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])},elesfn$1.unique=function(){return new Collection(this._private.cy,this,!0)},elesfn$1.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},elesfn$1.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new Collection(t)},elesfn$1.$id=elesfn$1.getElementById,elesfn$1.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},elesfn$1.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},elesfn$1.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},elesfn$1.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var n=t._private;if(plainObject(e)){if(r.startBatch(),e.data){t.data(e.data);var o=n.data;if(t.isEdge()){var i=!1,a={},s=e.data.source,l=e.data.target;null!=s&&s!=o.source&&(a.source=""+s,i=!0),null!=l&&l!=o.target&&(a.target=""+l,i=!0),i&&(t=t.move(a))}else{var u="parent"in e.data,c=e.data.parent;!u||null==c&&null==o.parent||c==o.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var g=function(r,o,i){var a=e[r];null!=a&&a!==n[r]&&(a?t[o]():t[i]())};return g("removed","remove","restore"),g("selected","select","unselect"),g("selectable","selectify","unselectify"),g("locked","lock","unlock"),g("grabbable","grabify","ungrabify"),g("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var d={data:copy(n.data),position:copy(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var p=0;return n.classes.forEach((function(e){return d.classes+=0==p++?e:" "+e})),d}}},elesfn$1.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].json();e.push(r)}return e},elesfn$1.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var n=this[r].json(),o=new Element(e,n,!1);t.push(o)}return new Collection(e,t)},elesfn$1.copy=elesfn$1.clone,elesfn$1.restore=function(){for(var e,t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this,i=o.cy(),a=i._private,s=[],l=[],u=0,c=o.length;u<c;u++){var g=o[u];n&&!g.removed()||(g.isNode()?s.push(g):l.push(g))}e=s.concat(l);var d=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var p=e[t],h=p._private,f=h.data;if(p.clearTraversalCache(),n||h.removed)if(void 0===f.id)f.id=uuid();else if(number$1(f.id))f.id=""+f.id;else{if(emptyString(f.id)||!string(f.id)){error("Can not create element with invalid string ID `"+f.id+"`"),d();continue}if(i.hasElementWithId(f.id)){error("Can not create second element with ID `"+f.id+"`"),d();continue}}else;var y=f.id;if(p.isNode()){var m=h.position;null==m.x&&(m.x=0),null==m.y&&(m.y=0)}if(p.isEdge()){for(var b=p,_=["source","target"],v=_.length,S=!1,E=0;E<v;E++){var w=_[E],x=f[w];number$1(x)&&(x=f[w]=""+f[w]),null==x||""===x?(error("Can not create edge `"+y+"` with unspecified "+w),S=!0):i.hasElementWithId(x)||(error("Can not create edge `"+y+"` with nonexistant "+w+" `"+x+"`"),S=!0)}if(S){d();continue}var T=i.getElementById(f.source),R=i.getElementById(f.target);T.same(R)?T._private.edges.push(b):(T._private.edges.push(b),R._private.edges.push(b)),b._private.source=T,b._private.target=R}h.map=new Map$1,h.map.set(y,{ele:p,index:0}),h.removed=!1,n&&i.addToPool(p)}for(var A=0;A<s.length;A++){var j=s[A],C=j._private.data;number$1(C.parent)&&(C.parent=""+C.parent);var P=C.parent;if(null!=P||j._private.parent){var I=j._private.parent?i.collection().merge(j._private.parent):i.getElementById(P);if(I.empty())C.parent=void 0;else if(I[0].removed())warn("Node added with missing parent, reference to parent removed"),C.parent=void 0,j._private.parent=null;else{for(var M=!1,O=I;!O.empty();){if(j.same(O)){M=!0,C.parent=void 0;break}O=O.parent()}M||(I[0]._private.children.push(j),j._private.parent=I[0],a.hasCompoundNodes=!0)}}}if(e.length>0){for(var B=e.length===o.length?o:new Collection(i,e),N=0;N<B.length;N++){var k=B[N];k.isNode()||(k.parallelEdges().clearTraversalCache(),k.source().clearTraversalCache(),k.target().clearTraversalCache())}(a.hasCompoundNodes?i.collection().merge(B).merge(B.connectedNodes()).merge(B.parent()):B).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?B.emitAndNotify("add"):n&&B.emit("add")}return o},elesfn$1.removed=function(){var e=this[0];return e&&e._private.removed},elesfn$1.inside=function(){var e=this[0];return e&&!e._private.removed},elesfn$1.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=[],o={},i=r._private.cy;function a(e){var r=o[e.id()];t&&e.removed()||r||(o[e.id()]=!0,e.isNode()?(n.push(e),function(e){for(var t=e._private.edges,r=0;r<t.length;r++)a(t[r])}(e),function(e){for(var t=e._private.children,r=0;r<t.length;r++)a(t[r])}(e)):n.unshift(e))}for(var s=0,l=r.length;s<l;s++){a(r[s])}function u(e,t){var r=e._private.edges;removeFromArray(r,t),e.clearTraversalCache()}function c(e){e.clearTraversalCache()}var g=[];function d(e,t){t=t[0];var r=(e=e[0])._private.children,n=e.id();removeFromArray(r,t),t._private.parent=null,g.ids[n]||(g.ids[n]=!0,g.push(e))}g.ids={},r.dirtyCompoundBoundsCache(),t&&i.removeFromPool(n);for(var p=0;p<n.length;p++){var h=n[p];if(h.isEdge()){var f=h.source()[0],y=h.target()[0];u(f,h),u(y,h);for(var m=h.parallelEdges(),b=0;b<m.length;b++){var _=m[b];c(_),_.isBundledBezier()&&_.dirtyBoundingBoxCache()}}else{var v=h.parent();0!==v.length&&d(v,h)}t&&(h._private.removed=!0)}var S=i._private.elements;i._private.hasCompoundNodes=!1;for(var E=0;E<S.length;E++){if(S[E].isParent()){i._private.hasCompoundNodes=!0;break}}var w=new Collection(this.cy(),n);w.size()>0&&(e?w.emitAndNotify("remove"):t&&w.emit("remove"));for(var x=0;x<g.length;x++){var T=g[x];t&&T.removed()||T.updateStyle()}return w},elesfn$1.move=function(e){var t=this._private.cy,r=this,n=!1,o=!1,i=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var a=i(e.source),s=i(e.target),l=null!=a&&t.hasElementWithId(a),u=null!=s&&t.hasElementWithId(s);(l||u)&&(t.batch((function(){r.remove(n,o),r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e],i=t._private.data;t.isEdge()&&(l&&(i.source=a),u&&(i.target=s))}r.restore(n,o)})),r.emitAndNotify("move"))}else if(void 0!==e.parent){var c=i(e.parent);if(null===c||t.hasElementWithId(c)){var g=null===c?void 0:c;t.batch((function(){var e=r.remove(n,o);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var i=r[t],a=i._private.data;i.isNode()&&(a.parent=g)}e.restore(n,o)})),r.emitAndNotify("move")}}return this},[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,data,elesfn$d,dimensions,elesfn$9,elesfn$8,elesfn$7,elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach((function(e){extend(elesfn$1,e)}));var corefn$9={add:function(e){var t,r=this;if(elementOrCollection(e)){var n=e;if(n._private.cy===r)t=n.restore();else{for(var o=[],i=0;i<n.length;i++){var a=n[i];o.push(a.json())}t=new Collection(r,o)}}else if(array(e)){t=new Collection(r,e)}else if(plainObject(e)&&(array(e.nodes)||array(e.edges))){for(var s=e,l=[],u=["nodes","edges"],c=0,g=u.length;c<g;c++){var d=u[c],p=s[d];if(array(p))for(var h=0,f=p.length;h<f;h++){var y=extend({group:d},p[h]);l.push(y)}}t=new Collection(r,l)}else{t=new Element(r,e).collection()}return t},remove:function(e){if(elementOrCollection(e));else if(string(e)){var t=e;e=this.$(t)}return e.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function generateCubicBezier(e,t,r,n){var o=4,i=1e-7,a=10,s=11,l=1/(s-1),u="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var c=0;c<4;++c)if("number"!=typeof arguments[c]||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var g=u?new Float32Array(s):new Array(s);function d(e,t){return 1-3*t+3*e}function p(e,t){return 3*t-6*e}function h(e){return 3*e}function f(e,t,r){return((d(t,r)*e+p(t,r))*e+h(t))*e}function y(e,t,r){return 3*d(t,r)*e*e+2*p(t,r)*e+h(t)}function m(t){for(var n=0,u=1,c=s-1;u!==c&&g[u]<=t;++u)n+=l;--u;var d=n+(t-g[u])/(g[u+1]-g[u])*l,p=y(d,e,r);return p>=.001?function(t,n){for(var i=0;i<o;++i){var a=y(n,e,r);if(0===a)return n;n-=(f(n,e,r)-t)/a}return n}(t,d):0===p?d:function(t,n,o){var s,l,u=0;do{(s=f(l=n+(o-n)/2,e,r)-t)>0?o=l:n=l}while(Math.abs(s)>i&&++u<a);return l}(t,n,n+l)}var b=!1;function _(){b=!0,e===t&&r===n||function(){for(var t=0;t<s;++t)g[t]=f(t*l,e,r)}()}var v=function(o){return b||_(),e===t&&r===n?o:0===o?0:1===o?1:f(m(o),t,n)};v.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var S="generateBezier("+[e,t,r,n]+")";return v.toString=function(){return S},v}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var generateSpringRK4=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var o={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:o.v,dv:e(o)}}function r(r,n){var o={dx:r.v,dv:e(r)},i=t(r,.5*n,o),a=t(r,.5*n,i),s=t(r,n,a),l=1/6*(o.dx+2*(i.dx+a.dx)+s.dx),u=1/6*(o.dv+2*(i.dv+a.dv)+s.dv);return r.x=r.x+l*n,r.v=r.v+u*n,r}return function e(t,n,o){var i,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,g=1e-4;for(t=parseFloat(t)||500,n=parseFloat(n)||20,o=o||null,l.tension=t,l.friction=n,a=(i=null!==o)?(c=e(t,n))/o*.016:.016;s=r(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>g&&Math.abs(s.v)>g;);return i?function(e){return u[e*(u.length-1)|0]}:c}}(),cubicBezier=function(e,t,r,n){var o=generateCubicBezier(e,t,r,n);return function(e,t,r){return e+(t-e)*o(r)}},easings={linear:function(e,t,r){return e+(t-e)*r},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(e,t,r){if(0===r)return easings.linear;var n=generateSpringRK4(e,t,r);return function(e,t,r){return e+(t-e)*n(r)}},"cubic-bezier":cubicBezier};function getEasedValue(e,t,r,n,o){if(1===n)return r;if(t===r)return r;var i=o(t,r,n);return null==e||((e.roundValue||e.color)&&(i=Math.round(i)),void 0!==e.min&&(i=Math.max(i,e.min)),void 0!==e.max&&(i=Math.min(i,e.max))),i}function getValue(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function ease(e,t,r,n,o){var i=null!=o?o.type:null;r<0?r=0:r>1&&(r=1);var a=getValue(e,o),s=getValue(t,o);if(number$1(a)&&number$1(s))return getEasedValue(i,a,s,r,n);if(array(a)&&array(s)){for(var l=[],u=0;u<s.length;u++){var c=a[u],g=s[u];if(null!=c&&null!=g){var d=getEasedValue(i,c,g,r,n);l.push(d)}else l.push(g)}return l}}function step$1(e,t,r,n){var o=!n,i=e._private,a=t._private,s=a.easing,l=a.startTime,u=(n?e:e.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=easings.linear;else{var c,g,d;if(string(s))c=u.parse("transition-timing-function",s).value;else c=s;string(c)?(g=c,d=[]):(g=c[1],d=c.slice(2).map((function(e){return+e}))),d.length>0?("spring"===g&&d.push(a.duration),a.easingImpl=easings[g].apply(null,d)):a.easingImpl=easings[g]}var p,h=a.easingImpl;if(p=0===a.duration?1:(r-l)/a.duration,a.applying&&(p=a.progress),p<0?p=0:p>1&&(p=1),null==a.delay){var f=a.startPosition,y=a.position;if(y&&o&&!e.locked()){var m={};valid(f.x,y.x)&&(m.x=ease(f.x,y.x,p,h)),valid(f.y,y.y)&&(m.y=ease(f.y,y.y,p,h)),e.position(m)}var b=a.startPan,_=a.pan,v=i.pan,S=null!=_&&n;S&&(valid(b.x,_.x)&&(v.x=ease(b.x,_.x,p,h)),valid(b.y,_.y)&&(v.y=ease(b.y,_.y,p,h)),e.emit("pan"));var E=a.startZoom,w=a.zoom,x=null!=w&&n;x&&(valid(E,w)&&(i.zoom=bound(i.minZoom,ease(E,w,p,h),i.maxZoom)),e.emit("zoom")),(S||x)&&e.emit("viewport");var T=a.style;if(T&&T.length>0&&o){for(var R=0;R<T.length;R++){var A=T[R],j=A.name,C=A,P=a.startStyle[j],I=ease(P,C,p,h,u.properties[P.name]);u.overrideBypass(e,j,I)}e.emit("style")}}return a.progress=p,p}function valid(e,t){return null!=e&&null!=t&&(!(!number$1(e)||!number$1(t))||!(!e||!t))}function startAnimation(e,t,r,n){var o=t._private;o.started=!0,o.startTime=r-o.progress*o.duration}function stepAll(e,t){var r=t._private.aniEles,n=[];function o(t,r){var o=t._private,i=o.animation.current,a=o.animation.queue,s=!1;if(0===i.length){var l=a.shift();l&&i.push(l)}for(var u=function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},c=i.length-1;c>=0;c--){var g=i[c],d=g._private;d.stopped?(i.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||startAnimation(t,g,e),step$1(t,g,e,r),d.applying&&(d.applying=!1),u(d.frames),null!=d.step&&d.step(e),g.completed()&&(i.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.completes)),s=!0)}return r||0!==i.length||0!==a.length||n.push(t),s}for(var i=!1,a=0;a<r.length;a++){var s=o(r[a]);i=i||s}var l=o(t,!0);(i||l)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(n),t.emit("step")}var corefn$8={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender((function(t,r){stepAll(r,e)}),t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&requestAnimationFrame$1((function(r){stepAll(r,e),t()}))}()}}},emitterOptions={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&element(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e}},argSelector=function(e){return string(e)?new Selector(e):e},elesfn={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Emitter(emitterOptions,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,r){return this.emitter().on(e,argSelector(t),r),this},removeListener:function(e,t,r){return this.emitter().removeListener(e,argSelector(t),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,r){return this.emitter().one(e,argSelector(t),r),this},once:function(e,t,r){return this.emitter().one(e,argSelector(t),r),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};define.eventAliasesOn(elesfn);var corefn$7={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};corefn$7.jpeg=corefn$7.jpg;var corefn$6={layout:function(e){var t=this;if(null!=e)if(null!=e.name){var r=e.name,n=t.extension("layout",r);if(null!=n){var o;o=string(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var i=new n(extend({},e,{cy:t,eles:o}));return i}error("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else error("A `name` must be specified to make a layout");else error("Layout options must be specified to make a layout")}};corefn$6.createLayout=corefn$6.makeLayout=corefn$6.layout;var corefn$5={notify:function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var n=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();null!=t&&n.merge(t)}else if(r.notificationsEnabled){var o=this.renderer();!this.destroyed()&&o&&o.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach((function(r){var n=e.batchNotifications[r];n.empty()?t.notify(r):t.notify(r,n)}))}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch((function(){for(var r=Object.keys(e),n=0;n<r.length;n++){var o=r[n],i=e[o];t.getElementById(o).data(i)}}))}},rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),corefn$4={renderTo:function(e,t,r,n){return this._private.renderer.renderTo(e,t,r,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,r=t.extension("renderer",e.name);if(null!=r){void 0!==e.wheelSensitivity&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=rendererDefaults(e);n.cy=t,t._private.renderer=new r(n),this.notify("init")}else error("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach((function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]}))},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};corefn$4.invalidateDimensions=corefn$4.resize;var corefn$3={collection:function(e,t){return string(e)?this.$(e):elementOrCollection(e)?e.collection():array(e)?(t||(t={}),new Collection(this,e,t.unique,t.removed)):new Collection(this)},nodes:function(e){var t=this.$((function(e){return e.isNode()}));return e?t.filter(e):t},edges:function(e){var t=this.$((function(e){return e.isEdge()}));return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$3.elements=corefn$3.filter=corefn$3.$;var styfn$8={},TRUE="t",FALSE="f";styfn$8.apply=function(e){for(var t=this,r=t._private.cy.collection(),n=0;n<e.length;n++){var o=e[n],i=t.getContextMeta(o);if(!i.empty){var a=t.getContextStyle(i),s=t.applyContextStyle(i,a,o);o._private.appliedInitStyle?t.updateTransitions(o,s.diffProps):o._private.appliedInitStyle=!0,t.updateStyleHints(o)&&r.push(o)}}return r},styfn$8.getPropertiesDiff=function(e,t){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},o=e+"-"+t,i=n[o];if(i)return i;for(var a=[],s={},l=0;l<r.length;l++){var u=r[l],c=e[l]===TRUE,g=t[l]===TRUE,d=c!==g,p=u.mappedProperties.length>0;if(d||g&&p){var h=void 0;d&&p||d?h=u.properties:p&&(h=u.mappedProperties);for(var f=0;f<h.length;f++){for(var y=h[f],m=y.name,b=!1,_=l+1;_<r.length;_++){var v=r[_];if(t[_]===TRUE&&(b=null!=v.properties[y.name]))break}s[m]||b||(s[m]=!0,a.push(m))}}}return n[o]=a,a},styfn$8.getContextMeta=function(e){for(var t,r=this,n="",o=e._private.styleCxtKey||"",i=0;i<r.length;i++){var a=r[i];n+=a.selector&&a.selector.matches(e)?TRUE:FALSE}return t=r.getPropertiesDiff(o,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},styfn$8.getContextStyle=function(e){var t=e.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var n={_private:{key:t}},o=0;o<this.length;o++){var i=this[o];if(t[o]===TRUE)for(var a=0;a<i.properties.length;a++){var s=i.properties[a];n[s.name]=s}}return r[t]=n,n},styfn$8.applyContextStyle=function(e,t,r){for(var n=e.diffPropNames,o={},i=this.types,a=0;a<n.length;a++){var s=n[a],l=t[s],u=r.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===i.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(r))===c.prevFnValue)continue}var g=o[s]={prev:u};this.applyParsedProperty(r,l),g.next=r.pstyle(s),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:o}},styfn$8.updateStyleHints=function(e){var t=e._private,r=this,n=r.propertyGroupNames,o=r.propertyGroupKeys,i=function(e,t,n){return r.getPropertiesHash(e,t,n)},a=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,l=e._private.style;n=Object.keys(l);for(var u=0;u<o.length;u++){var c=o[u];t.styleKeys[c]=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]}for(var g,d=function(e,r){return t.styleKeys[r][0]=hashInt(e,t.styleKeys[r][0])},p=function(e,r){return t.styleKeys[r][1]=hashIntAlt(e,t.styleKeys[r][1])},h=function(e,t){d(e,t),p(e,t)},f=function(e,t){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);d(n,t),p(n,t)}},y=0;y<n.length;y++){var m=n[y],b=l[m];if(null!=b){var _=this.properties[m],v=_.type,S=_.groupKey,E=void 0;null!=_.hashOverride?E=_.hashOverride(e,b):null!=b.pfValue&&(E=b.pfValue);var w=null==_.enums?b.value:null,x=null!=E,T=x||null!=w,R=b.units;if(v.number&&T&&!v.multiple)h(-128<(g=x?E:w)&&g<128&&Math.floor(g)!==g?2e9-(1024*g|0):g,S),x||null==R||f(R,S);else f(b.strValue,S)}}for(var A=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT],j=0;j<o.length;j++){var C=o[j],P=t.styleKeys[C];A[0]=hashInt(P[0],A[0]),A[1]=hashIntAlt(P[1],A[1])}t.styleKey=combineHashes(A[0],A[1]);var I=t.styleKeys;t.labelDimsKey=combineHashesArray(I.labelDimensions);var M=i(e,["label"],I.labelDimensions);if(t.labelKey=combineHashesArray(M),t.labelStyleKey=combineHashesArray(hashArrays(I.commonLabel,M)),!s){var O=i(e,["source-label"],I.labelDimensions);t.sourceLabelKey=combineHashesArray(O),t.sourceLabelStyleKey=combineHashesArray(hashArrays(I.commonLabel,O));var B=i(e,["target-label"],I.labelDimensions);t.targetLabelKey=combineHashesArray(B),t.targetLabelStyleKey=combineHashesArray(hashArrays(I.commonLabel,B))}if(s){var N=t.styleKeys,k=N.nodeBody,D=N.nodeBorder,q=N.backgroundImage,$=N.compound,F=N.pie,L=[k,D,q,$,F].filter((function(e){return null!=e})).reduce(hashArrays,[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]);t.nodeKey=combineHashesArray(L),t.hasPie=null!=F&&F[0]!==DEFAULT_HASH_SEED&&F[1]!==DEFAULT_HASH_SEED_ALT}return a!==t.styleKey},styfn$8.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},styfn$8.applyParsedProperty=function(e,t){var r,n=this,o=t,i=e._private.style,a=n.types,s=n.properties[o.name].type,l=o.bypass,u=i[o.name],c=u&&u.bypass,g=e._private,d="mapping",p=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},h=function(){var t=p(u),r=p(o);n.checkTriggers(e,o.name,t,r)};if(o&&"pie"===o.name.substr(0,3)&&warn("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(o=t=this.parse(t.name,"bezier",l)),o.delete)return i[o.name]=void 0,h(),!0;if(o.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,h(),!0):(h(),!0);if(o.deleteBypass)return u?!!u.bypass&&(i[o.name]=u.bypassed,h(),!0):(h(),!0);var f=function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case a.mapData:for(var y,m=o.field.split("."),b=g.data,_=0;_<m.length&&b;_++){b=b[m[_]]}if(null==b)return f(),!1;if(!number$1(b))return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+o.field+": "+b+"` for `"+e.id()+"` is non-numeric)"),!1;var v=o.fieldMax-o.fieldMin;if((y=0===v?0:(b-o.fieldMin)/v)<0?y=0:y>1&&(y=1),s.color){var S=o.valueMin[0],E=o.valueMax[0],w=o.valueMin[1],x=o.valueMax[1],T=o.valueMin[2],R=o.valueMax[2],A=null==o.valueMin[3]?1:o.valueMin[3],j=null==o.valueMax[3]?1:o.valueMax[3],C=[Math.round(S+(E-S)*y),Math.round(w+(x-w)*y),Math.round(T+(R-T)*y),Math.round(A+(j-A)*y)];r={bypass:o.bypass,name:o.name,value:C,strValue:"rgb("+C[0]+", "+C[1]+", "+C[2]+")"}}else{if(!s.number)return!1;var P=o.valueMin+(o.valueMax-o.valueMin)*y;r=this.parse(o.name,P,o.bypass,d)}if(!r)return f(),!1;r.mapping=o,o=r;break;case a.data:for(var I=o.field.split("."),M=g.data,O=0;O<I.length&&M;O++){M=M[I[O]]}if(null!=M&&(r=this.parse(o.name,M,o.bypass,d)),!r)return f(),!1;r.mapping=o,o=r;break;case a.fn:var B=o.value,N=null!=o.fnValue?o.fnValue:B(e);if(o.prevFnValue=N,null==N)return warn("Custom function mappers may not return null (i.e. `"+o.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(r=this.parse(o.name,N,o.bypass,d)))return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+o.name+"` for ele `"+e.id()+"` is invalid)"),!1;r.mapping=copy(o),o=r;break;case void 0:break;default:return!1}return l?(o.bypassed=c?u.bypassed:u,i[o.name]=o):c?u.bypassed=o:i[o.name]=o,h(),!0},styfn$8.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),t)for(var o=n._private.style,i=Object.keys(o),a=0;a<i.length;a++){var s=i[a],l=o[s];null!=l&&(l.bypass?l.bypassed=null:o[s]=null)}else n._private.style={}}},styfn$8.update=function(){this._private.cy.mutableElements().updateStyle()},styfn$8.updateTransitions=function(e,t){var r=this,n=e._private,o=e.pstyle("transition-property").value,i=e.pstyle("transition-duration").pfValue,a=e.pstyle("transition-delay").pfValue;if(o.length>0&&i>0){for(var s={},l=!1,u=0;u<o.length;u++){var c=o[u],g=e.pstyle(c),d=t[c];if(d){var p=d.prev,h=null!=d.next?d.next:g,f=!1,y=void 0,m=1e-6;p&&(number$1(p.pfValue)&&number$1(h.pfValue)?(f=h.pfValue-p.pfValue,y=p.pfValue+m*f):number$1(p.value)&&number$1(h.value)?(f=h.value-p.value,y=p.value+m*f):array(p.value)&&array(h.value)&&(f=p.value[0]!==h.value[0]||p.value[1]!==h.value[1]||p.value[2]!==h.value[2],y=p.strValue),f&&(s[c]=h.strValue,this.applyBypass(e,c,y),l=!0))}}if(!l)return;n.transitioning=!0,new Promise$1((function(t){a>0?e.delayAnimation(a).play().promise().then(t):t()})).then((function(){return e.animation({style:s,duration:i,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(e,o),e.emitAndNotify("style"),n.transitioning=!1}))}else n.transitioning&&(this.removeBypasses(e,o),e.emitAndNotify("style"),n.transitioning=!1)},styfn$8.checkTrigger=function(e,t,r,n,o,i){var a=this.properties[t],s=o(a);null!=s&&s(r,n)&&i(a)},styfn$8.checkZOrderTrigger=function(e,t,r,n){var o=this;this.checkTrigger(e,t,r,n,(function(e){return e.triggersZOrder}),(function(){o._private.cy.notify("zorder",e)}))},styfn$8.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,(function(e){return e.triggersBounds}),(function(o){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),!o.triggersBoundsOfParallelBeziers||("curve-style"!==t||"bezier"!==r&&"bezier"!==n)&&("display"!==t||"none"!==r&&"none"!==n)||e.parallelEdges().forEach((function(e){e.isBundledBezier()&&e.dirtyBoundingBoxCache()}))}))},styfn$8.checkTriggers=function(e,t,r,n){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,n),this.checkBoundsTrigger(e,t,r,n)};var styfn$7={applyBypass:function(e,t,r,n){var o=[];if("*"===t||"**"===t){if(void 0!==r)for(var i=0;i<this.properties.length;i++){var a=this.properties[i].name,s=this.parse(a,r,!0);s&&o.push(s)}}else if(string(t)){var l=this.parse(t,r,!0);l&&o.push(l)}else{if(!plainObject(t))return!1;var u=t;n=r;for(var c=Object.keys(u),g=0;g<c.length;g++){var d=c[g],p=u[d];if(void 0===p&&(p=u[dash2camel(d)]),void 0!==p){var h=this.parse(d,p,!0);h&&o.push(h)}}}if(0===o.length)return!1;for(var f=!1,y=0;y<e.length;y++){for(var m=e[y],b={},_=void 0,v=0;v<o.length;v++){var S=o[v];if(n){var E=m.pstyle(S.name);_=b[S.name]={prev:E}}f=this.applyParsedProperty(m,copy(S))||f,n&&(_.next=m.pstyle(S.name))}f&&this.updateStyleHints(m),n&&this.updateTransitions(m,b,true)}return f},overrideBypass:function(e,t,r){t=camel2dash(t);for(var n=0;n<e.length;n++){var o=e[n],i=o._private.style[t],a=this.properties[t].type,s=a.color,l=a.mutiple,u=i?null!=i.pfValue?i.pfValue:i.value:null;i&&i.bypass?(i.value=r,null!=i.pfValue&&(i.pfValue=r),i.strValue=s?"rgb("+r.join(",")+")":l?r.join(" "):""+r,this.updateStyleHints(o)):this.applyBypass(o,t,r),this.checkTriggers(o,t,u,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var n=0;n<e.length;n++){for(var o=e[n],i={},a=0;a<t.length;a++){var s=t[a],l=this.properties[s],u=o.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),g=i[l.name]={prev:u};this.applyParsedProperty(o,c),g.next=o.pstyle(l.name)}}this.updateStyleHints(o),r&&this.updateTransitions(o,i,true)}}},styfn$6={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy.container();if(window$1&&t&&window$1.getComputedStyle)return window$1.getComputedStyle(t).getPropertyValue(e)}},styfn$5={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var n={},o=0;o<r.properties.length;o++){var i=r.properties[o],a=r.getStylePropertyValue(e,i.name,t);null!=a&&(n[i.name]=a,n[dash2camel(i.name)]=a)}return n}},getIndexedStyle:function(e,t,r,n){var o=e.pstyle(t)[r][n];return null!=o?o:e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var n=this.properties[t];n.alias&&(n=n.pointsTo);var o=n.type,i=e.pstyle(n.name);if(i){var a=i.value,s=i.units,l=i.strValue;if(r&&o.number&&null!=a&&number$1(a)){var u=e.cy().zoom(),c=function(e){return e*u},g=function(e,t){return c(e)+t},d=array(a);return(d?s.every((function(e){return null!=e})):null!=s)?d?a.map((function(e,t){return g(e,s[t])})).join(" "):g(a,s):d?a.map((function(e){return string(e)?e:""+c(e)})).join(" "):""+c(a)}if(null!=l)return l}return null}},getAnimationStartStyle:function(e,t){for(var r={},n=0;n<t.length;n++){var o=t[n].name,i=e.pstyle(o);void 0!==i&&(i=plainObject(i)?this.parse(o,i.strValue):this.parse(o,i)),i&&(r[o]=i)}return r},getPropsList:function(e){var t=[],r=e,n=this.properties;if(r)for(var o=Object.keys(r),i=0;i<o.length;i++){var a=o[i],s=r[a],l=n[a]||n[camel2dash(a)],u=this.parse(l.name,s);u&&t.push(u)}return t},getNonDefaultPropertiesHash:function(e,t,r){var n,o,i,a,s,l,u=r.slice();for(s=0;s<t.length;s++)if(n=t[s],null!=(o=e.pstyle(n,!1)))if(null!=o.pfValue)u[0]=hashInt(a,u[0]),u[1]=hashIntAlt(a,u[1]);else for(i=o.strValue,l=0;l<i.length;l++)a=i.charCodeAt(l),u[0]=hashInt(a,u[0]),u[1]=hashIntAlt(a,u[1]);return u}};styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash;var styfn$4={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var n=e[r],o=n.selector,i=n.style||n.css,a=Object.keys(i);t.selector(o);for(var s=0;s<a.length;s++){var l=a[s],u=i[l];t.css(l,u)}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,o=r.properties,i={},a=0;a<o.length;a++){var s=o[a];i[s.name]=s.strValue}e.push({selector:n?n.toString():"core",style:i})}return e}},styfn$3={appendFromString:function(e){var t,r,n,o=this,i=""+e;function a(){i=i.length>t.length?i.substr(t.length):""}function s(){r=r.length>n.length?r.substr(n.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(i.match(/^\s*$/))break;var l=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}t=l[0];var u=l[1];if("core"!==u)if(new Selector(u).invalid){warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+u),a();continue}var c=l[2],g=!1;r=c;for(var d=[];;){if(r.match(/^\s*$/))break;var p=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),g=!0;break}n=p[0];var h=p[1],f=p[2];if(this.properties[h])o.parse(h,f)?(d.push({name:h,val:f}),s()):(warn("Skipping property: Invalid property definition in: "+n),s());else warn("Skipping property: Invalid property name in: "+n),s()}if(g){a();break}o.selector(u);for(var y=0;y<d.length;y++){var m=d[y];o.css(m.name,m.val)}a()}return o},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},styfn$2={};!function(){var e=number,t=rgbaNoBackRefs,r=hslaNoBackRefs,n=hex3,o=hex6,i=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(i){var a=e+"|\\w+|"+t+"|"+r+"|"+n+"|"+o;return"^"+i+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+a+")\\s*\\,\\s*("+a+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return string(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var l={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t},emptyNonEmpty:function(e,t){var r=emptyString(e),n=emptyString(t);return r&&!n||!r&&n}},u=styfn$2.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],g=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],p=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],f=[{name:"events",type:u.bool},{name:"text-events",type:u.bool}],y=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.nonNegativeInt,triggersZOrder:l.any}],m=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any}],b=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any}],_=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],v=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},S=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:v},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:v},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],E=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle}],w=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],x=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],T=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],R=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],A=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],j=[];styfn$2.pieBackgroundN=16,j.push({name:"pie-size",type:u.sizeMaybePercent});for(var C=1;C<=styfn$2.pieBackgroundN;C++)j.push({name:"pie-"+C+"-background-color",type:u.color}),j.push({name:"pie-"+C+"-background-size",type:u.percent}),j.push({name:"pie-"+C+"-background-opacity",type:u.zeroOneNumber});var P=[],I=styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill}].forEach((function(e){I.forEach((function(t){var r=t+"-"+e.name,n=e.type,o=e.triggersBounds;P.push({name:r,type:n,triggersBounds:o})}))}),{});var M=styfn$2.properties=[].concat(f,_,y,m,b,R,h,p,c,g,d,S,E,w,j,x,T,P,A),O=styfn$2.propertyGroups={behavior:f,transition:_,visibility:y,overlay:m,underlay:b,ghost:R,commonLabel:h,labelDimensions:p,mainLabel:c,sourceLabel:g,targetLabel:d,nodeBody:S,nodeBorder:E,backgroundImage:w,pie:j,compound:x,edgeLine:T,edgeArrow:P,core:A},B=styfn$2.propertyGroupNames={};(styfn$2.propertyGroupKeys=Object.keys(O)).forEach((function(e){B[e]=O[e].map((function(e){return e.name})),O[e].forEach((function(t){return t.groupKey=e}))}));var N=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$2.propertyNames=M.map((function(e){return e.name}));for(var k=0;k<M.length;k++){var D=M[k];M[D.name]=D}for(var q=0;q<N.length;q++){var $=N[q],F=M[$.pointsTo],L={name:$.name,alias:!0,pointsTo:F};M.push(L),M[$.name]=L}}(),styfn$2.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},styfn$2.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(e,t){for(var r=1;r<=styfn$2.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r),o=t.value;e[n]=o}return e}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(e,t){return styfn$2.arrowPrefixes.forEach((function(r){var n=r+"-"+t.name,o=t.value;e[n]=o})),e}),{})),r={},n=0;n<this.properties.length;n++){var o=this.properties[n];if(!o.pointsTo){var i=o.name,a=t[i],s=this.parse(i,a);r[i]=s}}return e.defaultProperties=r,e.defaultProperties},styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$1={parse:function(e,t,r,n){var o=this;if(fn$6(t))return o.parseImplWarn(e,t,r,n);var i,a=hashStrings(e,""+t,r?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),s=o.propCache=o.propCache||[];return(i=s[a])||(i=s[a]=o.parseImplWarn(e,t,r,n)),(r||"mapping"===n)&&(i=copy(i))&&(i.value=copy(i.value)),i},parseImplWarn:function(e,t,r,n){var o=this.parseImpl(e,t,r,n);return o||null==t||warn("The style property `".concat(e,": ").concat(t,"` is invalid")),!o||"width"!==o.name&&"height"!==o.name||"label"!==t||warn("The style value of `label` is deprecated for `"+o.name+"`"),o},parseImpl:function(e,t,r,n){var o=this;e=camel2dash(e);var i=o.properties[e],a=t,s=o.types;if(!i)return null;if(void 0===t)return null;i.alias&&(i=i.pointsTo,e=i.name);var l=string(t);l&&(t=t.trim());var u,c,g=i.type;if(!g)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(fn$6(t))return{name:e,value:t,strValue:"fn",mapped:s.fn,bypass:r};if(!l||n||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(u=new RegExp(s.data.regex).exec(t))){if(r)return!1;var d=s.data;return{name:e,value:u,strValue:""+t,mapped:d,field:u[1],bypass:r}}if(t.length>=10&&"m"===t[0]&&(c=new RegExp(s.mapData.regex).exec(t))){if(r)return!1;if(g.multiple)return!1;var p=s.mapData;if(!g.color&&!g.number)return!1;var h=this.parse(e,c[4]);if(!h||h.mapped)return!1;var f=this.parse(e,c[5]);if(!f||f.mapped)return!1;if(h.pfValue===f.pfValue||h.strValue===f.strValue)return warn("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+h.strValue+"`"),this.parse(e,h.strValue);if(g.color){var y=h.value,m=f.value;if(!(y[0]!==m[0]||y[1]!==m[1]||y[2]!==m[2]||y[3]!==m[3]&&(null!=y[3]&&1!==y[3]||null!=m[3]&&1!==m[3])))return!1}return{name:e,value:c,strValue:""+t,mapped:p,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:f.value,bypass:r}}}if(g.multiple&&"multiple"!==n){var b;if(b=l?t.split(/\s+/):array(t)?t:[t],g.evenMultiple&&b.length%2!=0)return null;for(var _=[],v=[],S=[],E="",w=!1,x=0;x<b.length;x++){var T=o.parse(e,b[x],r,"multiple");w=w||string(T.value),_.push(T.value),S.push(null!=T.pfValue?T.pfValue:T.value),v.push(T.units),E+=(x>0?" ":"")+T.strValue}return g.validate&&!g.validate(_,v)?null:g.singleEnum&&w?1===_.length&&string(_[0])?{name:e,value:_[0],strValue:_[0],bypass:r}:null:{name:e,value:_,pfValue:S,strValue:E,bypass:r,units:v}}var R=function(){for(var n=0;n<g.enums.length;n++){if(g.enums[n]===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(g.number){var A,j="px";if(g.units&&(A=g.units),g.implicitUnits&&(j=g.implicitUnits),!g.unitless)if(l){var C="px|em"+(g.allowPercent?"|\\%":"");A&&(C=A);var P=t.match("^("+number+")("+C+")?$");P&&(t=P[1],A=P[2]||j)}else A&&!g.implicitUnits||(A=j);if(t=parseFloat(t),isNaN(t)&&void 0===g.enums)return null;if(isNaN(t)&&void 0!==g.enums)return t=a,R();if(g.integer&&!integer(t))return null;if(void 0!==g.min&&(t<g.min||g.strictMin&&t===g.min)||void 0!==g.max&&(t>g.max||g.strictMax&&t===g.max))return null;var I={name:e,value:t,strValue:""+t+(A||""),units:A,bypass:r};return g.unitless||"px"!==A&&"em"!==A?I.pfValue=t:I.pfValue="px"!==A&&A?this.getEmSizeInPixels()*t:t,"ms"!==A&&"s"!==A||(I.pfValue="ms"===A?t:1e3*t),"deg"!==A&&"rad"!==A||(I.pfValue="rad"===A?t:deg2rad(t)),"%"===A&&(I.pfValue=t/100),I}if(g.propList){var M=[],O=""+t;if("none"===O);else{for(var B=O.split(/\s*,\s*|\s+/),N=0;N<B.length;N++){var k=B[N].trim();o.properties[k]?M.push(k):warn("`"+k+"` is not a valid property name")}if(0===M.length)return null}return{name:e,value:M,strValue:0===M.length?"none":M.join(" "),bypass:r}}if(g.color){var D=color2tuple(t);return D?{name:e,value:D,pfValue:D,strValue:"rgb("+D[0]+","+D[1]+","+D[2]+")",bypass:r}:null}if(g.regex||g.regexes){if(g.enums){var q=R();if(q)return q}for(var $=g.regexes?g.regexes:[g.regex],F=0;F<$.length;F++){var L=new RegExp($[F]).exec(t);if(L)return{name:e,value:g.singleRegexMatchValue?L[1]:L,strValue:""+t,bypass:r}}return null}return g.string?{name:e,value:""+t,strValue:""+t,bypass:r}:g.enums?R():null}},Style=function e(t){if(!(this instanceof e))return new e(t);core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):error("A style must have a core reference")},styfn=Style.prototype;styfn.instanceString=function(){return"style"},styfn.clear=function(){for(var e=this._private,t=e.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach((function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1})),this},styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},styfn.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},styfn.selector=function(e){var t="core"===e?null:new Selector(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},styfn.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],r=0;r<this.properties.length;r++){var n=this.properties[r],o=t[n.name];void 0===o&&(o=t[dash2camel(n.name)]),void 0!==o&&this.cssRule(n.name,o)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},styfn.style=styfn.css,styfn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r),!this[n].selector&&(this._private.coreStyle[r.name]=r)}return this},styfn.append=function(e){return stylesheet(e)?e.appendToStyle(this):array(e)?this.appendFromJson(e):string(e)&&this.appendFromString(e),this},Style.fromJson=function(e,t){var r=new Style(e);return r.fromJson(t),r},Style.fromString=function(e,t){return new Style(e).fromString(t)},[styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1].forEach((function(e){extend(styfn,e)})),Style.types=styfn.types,Style.properties=styfn.properties,Style.propertyGroups=styfn.propertyGroups,Style.propertyGroupNames=styfn.propertyGroupNames,Style.propertyGroupKeys=styfn.propertyGroupKeys;var corefn$2={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return stylesheet(e)?t.style=e.generateStyle(this):array(e)?t.style=Style.fromJson(this,e):string(e)?t.style=Style.fromString(this,e):t.style=Style(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},defaultSelectionType="single",corefn$1={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType=defaultSelectionType),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,r,n,o,i=arguments,a=this._private.pan;switch(i.length){case 0:return a;case 1:if(string(i[0]))return a[e=i[0]];if(plainObject(i[0])){if(!this._private.panningEnabled)return this;n=(r=i[0]).x,o=r.y,number$1(n)&&(a.x=n),number$1(o)&&(a.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=i[1],"x"!==(e=i[0])&&"y"!==e||!number$1(t)||(a[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var r,n,o,i,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:plainObject(e)&&(i=(o=s[0]).x,a=o.y,number$1(i)&&(l.x+=i),number$1(a)&&(l.y+=a),this.emit("pan viewport"));break;case 2:n=t,"x"!==(r=e)&&"y"!==r||!number$1(n)||(l[r]+=n),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var r=this.getFitViewport(e,t);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(number$1(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(string(e)){var n=e;e=this.$(n)}else if(boundingBox(e)){var o=e;(r={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else elementOrCollection(e)||(e=this.mutableElements());if(!elementOrCollection(e)||!e.empty()){r=r||e.boundingBox();var i,a=this.width(),s=this.height();if(t=number$1(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:i=(i=(i=Math.min((a-2*t)/r.w,(s-2*t)/r.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i,pan:{x:(a-i*(r.x1+r.x2))/2,y:(s-i*(r.y1+r.y2))/2}}}}},zoomRange:function(e,t){var r=this._private;if(null==t){var n=e;e=n.min,t=n.max}return number$1(e)&&number$1(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):number$1(e)&&void 0===t&&e<=r.maxZoom?r.minZoom=e:number$1(t)&&void 0===e&&t>=r.minZoom&&(r.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,r,n=this._private,o=n.pan,i=n.zoom,a=!1;if(n.zoomingEnabled||(a=!0),number$1(e)?r=e:plainObject(e)&&(r=e.level,null!=e.position?t=modelToRenderedPosition(e.position,i,o):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||n.panningEnabled||(a=!0)),r=(r=r>n.maxZoom?n.maxZoom:r)<n.minZoom?n.minZoom:r,a||!number$1(r)||r===i||null!=t&&(!number$1(t.x)||!number$1(t.y)))return null;if(null!=t){var s=o,l=i,u=r;return{zoomed:!0,panned:!0,zoom:u,pan:{x:-u/l*(t.x-s.x)+t.x,y:-u/l*(t.y-s.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:o}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return null!=t&&t.zoomed?(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,r=!0,n=!0,o=[],i=!1,a=!1;if(!e)return this;if(number$1(e.zoom)||(r=!1),plainObject(e.pan)||(n=!1),!r&&!n)return this;if(r){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?i=!0:(t.zoom=s,o.push("zoom"))}if(n&&(!i||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;number$1(l.x)&&(t.pan.x=l.x,a=!1),number$1(l.y)&&(t.pan.y=l.y,a=!1),a||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(string(e)){var r=e;e=this.mutableElements().filter(r)}else elementOrCollection(e)||(e=this.mutableElements());if(0!==e.length){var n=e.boundingBox(),o=this.width(),i=this.height();return{x:(o-(t=void 0===t?this._private.zoom:t)*(n.x1+n.x2))/2,y:(i-t*(n.y1+n.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,r=this._private,n=r.container;return r.sizeCache=r.sizeCache||(n?(e=window$1.getComputedStyle(n),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:n.clientWidth-t("padding-left")-t("padding-right"),height:n.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};corefn$1.centre=corefn$1.center,corefn$1.autolockNodes=corefn$1.autolock,corefn$1.autoungrabifyNodes=corefn$1.autoungrabify;var fn={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};fn.attr=fn.data,fn.removeAttr=fn.removeData;var Core=function(e){var t=this,r=(e=extend({},e)).container;r&&!htmlElement(r)&&htmlElement(r[0])&&(r=r[0]);var n=r?r._cyreg:null;(n=n||{})&&n.cy&&(n.cy.destroy(),n={});var o=n.readies=n.readies||[];r&&(r._cyreg=n),n.cy=t;var i=void 0!==window$1&&void 0!==r&&!e.headless,a=e;a.layout=extend({name:i?"grid":"null"},a.layout),a.renderer=extend({name:i?"canvas":"null"},a.renderer);var s=function(e,t,r){return void 0!==t?t:void 0!==r?r:e},l=this._private={container:r,ready:!1,options:a,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:a.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?i:a.styleEnabled,zoom:number$1(a.zoom)?a.zoom:1,pan:{x:plainObject(a.pan)&&number$1(a.pan.x)?a.pan.x:0,y:plainObject(a.pan)&&number$1(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:s(250,a.multiClickDebounceTime)};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom});l.styleEnabled&&t.setStyle([]);var u=extend({},a,a.renderer);t.initRenderer(u);!function(e,t){if(e.some(promise))return Promise$1.all(e).then(t);t(e)}([a.style,a.elements],(function(e){var r=e[0],i=e[1];l.styleEnabled&&t.style().append(r),function(e,r,n){t.notifications(!1);var o=t.mutableElements();o.length>0&&o.remove(),null!=e&&(plainObject(e)||array(e))&&t.add(e),t.one("layoutready",(function(e){t.notifications(!0),t.emit(e),t.one("load",r),t.emitAndNotify("load")})).one("layoutstop",(function(){t.one("done",n),t.emit("done")}));var i=extend({},t._private.options.layout);i.eles=t.elements(),t.layout(i).run()}(i,(function(){t.startAnimationLoop(),l.ready=!0,fn$6(a.ready)&&t.on("ready",a.ready);for(var e=0;e<o.length;e++){var r=o[e];t.on("ready",r)}n&&(n.readies=[]),t.emit("ready")}),a.done)}))},corefn=Core.prototype;extend(corefn,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(null!=e){var t=this,r=t._private,n=r.options;return!htmlElement(e)&&htmlElement(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),r.container=e,r.styleEnabled=!0,t.invalidateSize(),t.initRenderer(extend({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),t.startAnimationLoop(),t.style(n.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return copy(this._private.options)},json:function(e){var t=this,r=t._private,n=t.mutableElements();if(plainObject(e)){if(t.startBatch(),e.elements){var o={},i=function(e,r){for(var n=[],i=[],a=0;a<e.length;a++){var s=e[a];if(s.data.id){var l=""+s.data.id,u=t.getElementById(l);o[l]=!0,0!==u.length?i.push({ele:u,json:s}):r?(s.group=r,n.push(s)):n.push(s)}else warn("cy.json() cannot handle elements without an ID attribute")}t.add(n);for(var c=0;c<i.length;c++){var g=i[c],d=g.ele,p=g.json;d.json(p)}};if(array(e.elements))i(e.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var l=a[s],u=e.elements[l];array(u)&&i(u,l)}var c=t.collection();n.filter((function(e){return!o[e.id()]})).forEach((function(e){e.isParent()?c.merge(e):e.remove()})),c.forEach((function(e){return e.children().move({parent:null})})),c.forEach((function(e){return function(e){return t.getElementById(e.id())}(e).remove()}))}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===r.pan.x&&e.pan.y===r.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<g.length;d++){var p=g[d];null!=e[p]&&t[p](e[p])}return t.endBatch(),this}var h={};!!e?h.elements=this.elements().map((function(e){return e.json()})):(h.elements={},n.forEach((function(e){var t=e.group();h.elements[t]||(h.elements[t]=[]),h.elements[t].push(e.json())}))),this._private.styleEnabled&&(h.style=t.style().json()),h.data=copy(t.data());var f=r.options;return h.zoomingEnabled=r.zoomingEnabled,h.userZoomingEnabled=r.userZoomingEnabled,h.zoom=r.zoom,h.minZoom=r.minZoom,h.maxZoom=r.maxZoom,h.panningEnabled=r.panningEnabled,h.userPanningEnabled=r.userPanningEnabled,h.pan=copy(r.pan),h.boxSelectionEnabled=r.boxSelectionEnabled,h.renderer=copy(f.renderer),h.hideEdgesOnViewport=f.hideEdgesOnViewport,h.textureOnViewport=f.textureOnViewport,h.wheelSensitivity=f.wheelSensitivity,h.motionBlur=f.motionBlur,h.multiClickDebounceTime=f.multiClickDebounceTime,h}}),corefn.$id=corefn.getElementById,[corefn$9,corefn$8,elesfn,corefn$7,corefn$6,corefn$5,corefn$4,corefn$3,corefn$2,corefn$1,fn].forEach((function(e){extend(corefn,e)}));var defaults$7={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=function(e){return e.scratch("breadthfirst")},setInfo=function(e,t){return e.scratch("breadthfirst",t)};function BreadthFirstLayout(e){this.options=extend({},defaults$7,deprecatedOptionDefaults,e)}BreadthFirstLayout.prototype.run=function(){var e,t=this.options,r=t,n=t.cy,o=r.eles,i=o.nodes().filter((function(e){return!e.isParent()})),a=o,s=r.directed,l=r.acyclic||r.maximal||r.maximalAdjustments>0,u=makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(elementOrCollection(r.roots))e=r.roots;else if(array(r.roots)){for(var c=[],g=0;g<r.roots.length;g++){var d=r.roots[g],p=n.getElementById(d);c.push(p)}e=n.collection(c)}else if(string(r.roots))e=n.$(r.roots);else if(s)e=i.roots();else{var h=o.components();e=n.collection();for(var f=function(t){var r=h[t],n=r.maxDegree(!1),o=r.filter((function(e){return e.degree(!1)===n}));e=e.add(o)},y=0;y<h.length;y++)f(y)}var m=[],b={},_=function(e,t){null==m[t]&&(m[t]=[]);var r=m[t].length;m[t].push(e),setInfo(e,{index:r,depth:t})};a.bfs({roots:e,directed:r.directed,visit:function(e,t,r,n,o){var i=e[0],a=i.id();_(i,o),b[a]=!0}});for(var v=[],S=0;S<i.length;S++){var E=i[S];b[E.id()]||v.push(E)}var w=function(e){for(var t=m[e],r=0;r<t.length;r++){var n=t[r];null!=n?setInfo(n,{depth:e,index:r}):(t.splice(r,1),r--)}},x=function(){for(var e=0;e<m.length;e++)w(e)},T=function(e,t){for(var n=getInfo(e),i=e.incomers().filter((function(e){return e.isNode()&&o.has(e)})),a=-1,s=e.id(),l=0;l<i.length;l++){var u=i[l],c=getInfo(u);a=Math.max(a,c.depth)}if(n.depth<=a){if(!r.acyclic&&t[s])return null;var g=a+1;return function(e,t){var r=getInfo(e),n=r.depth,o=r.index;m[n][o]=null,_(e,t)}(e,g),t[s]=g,!0}return!1};if(s&&l){var R=[],A={},j=function(e){return R.push(e)};for(i.forEach((function(e){return R.push(e)}));R.length>0;){var C=R.shift(),P=T(C,A);if(P)C.outgoers().filter((function(e){return e.isNode()&&o.has(e)})).forEach(j);else if(null===P){warn("Detected double maximal shift for node `"+C.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}x();var I=0;if(r.avoidOverlap)for(var M=0;M<i.length;M++){var O=i[M].layoutDimensions(r),B=O.w,N=O.h;I=Math.max(I,B,N)}var k={},D=function(e){if(k[e.id()])return k[e.id()];for(var t=getInfo(e).depth,r=e.neighborhood(),n=0,o=0,a=0;a<r.length;a++){var s=r[a];if(!s.isEdge()&&!s.isParent()&&i.has(s)){var l=getInfo(s);if(null!=l){var u=l.index,c=l.depth;if(null!=u&&null!=c){var g=m[c].length;c<t&&(n+=u/g,o++)}}}}return n/=o=Math.max(1,o),0===o&&(n=0),k[e.id()]=n,n},q=function(e,t){var r=D(e)-D(t);return 0===r?ascending(e.id(),t.id()):r};void 0!==r.depthSort&&(q=r.depthSort);for(var $=0;$<m.length;$++)m[$].sort(q),w($);for(var F=[],L=0;L<v.length;L++)F.push(v[L]);m.unshift(F),x();for(var U=0,W=0;W<m.length;W++)U=Math.max(m[W].length,U);var z=u.x1+u.w/2,V=u.x1+u.h/2,H=m.reduce((function(e,t){return Math.max(e,t.length)}),0);return o.nodes().layoutPositions(this,r,(function(e){var t=getInfo(e),n=t.depth,o=t.index,i=m[n].length,a=Math.max(u.w/((r.grid?H:i)+1),I),s=Math.max(u.h/(m.length+1),I),l=Math.min(u.w/2/m.length,u.h/2/m.length);if(l=Math.max(l,I),r.circle){var c=l*n+l-(m.length>0&&m[0].length<=3?l/2:0),g=2*Math.PI/m[n].length*o;return 0===n&&1===m[0].length&&(c=1),{x:z+c*Math.cos(g),y:V+c*Math.sin(g)}}return{x:z+(o+1-(i+1)/2)*a,y:(n+1)*s}})),this};var defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function CircleLayout(e){this.options=extend({},defaults$6,e)}CircleLayout.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,o=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,i=n.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));for(var a,s=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=s.x1+s.w/2,u=s.y1+s.h/2,c=(void 0===t.sweep?2*Math.PI-2*Math.PI/i.length:t.sweep)/Math.max(1,i.length-1),g=0,d=0;d<i.length;d++){var p=i[d].layoutDimensions(t),h=p.w,f=p.h;g=Math.max(g,h,f)}if(a=number$1(t.radius)?t.radius:i.length<=1?0:Math.min(s.h,s.w)/2-g,i.length>1&&t.avoidOverlap){g*=1.75;var y=Math.cos(c)-Math.cos(0),m=Math.sin(c)-Math.sin(0),b=Math.sqrt(g*g/(y*y+m*m));a=Math.max(b,a)}return n.nodes().layoutPositions(this,t,(function(e,r){var n=t.startAngle+r*c*(o?1:-1),i=a*Math.cos(n),s=a*Math.sin(n);return{x:l+i,y:u+s}})),this};var defaults$5={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},DEBUG;function ConcentricLayout(e){this.options=extend({},defaults$5,e)}ConcentricLayout.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=e.cy,o=t.eles,i=o.nodes().not(":parent"),a=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s=a.x1+a.w/2,l=a.y1+a.h/2,u=[],c=0,g=0;g<i.length;g++){var d,p=i[g];d=t.concentric(p),u.push({value:d,node:p}),p._private.scratch.concentric=d}i.updateStyle();for(var h=0;h<i.length;h++){var f=i[h].layoutDimensions(t);c=Math.max(c,f.w,f.h)}u.sort((function(e,t){return t.value-e.value}));for(var y=t.levelWidth(i),m=[[]],b=m[0],_=0;_<u.length;_++){var v=u[_];if(b.length>0)Math.abs(b[0].value-v.value)>=y&&(b=[],m.push(b));b.push(v)}var S=c+t.minNodeSpacing;if(!t.avoidOverlap){var E=m.length>0&&m[0].length>1,w=(Math.min(a.w,a.h)/2-S)/(m.length+E?1:0);S=Math.min(S,w)}for(var x=0,T=0;T<m.length;T++){var R=m[T],A=void 0===t.sweep?2*Math.PI-2*Math.PI/R.length:t.sweep,j=R.dTheta=A/Math.max(1,R.length-1);if(R.length>1&&t.avoidOverlap){var C=Math.cos(j)-Math.cos(0),P=Math.sin(j)-Math.sin(0),I=Math.sqrt(S*S/(C*C+P*P));x=Math.max(I,x)}R.r=x,x+=S}if(t.equidistant){for(var M=0,O=0,B=0;B<m.length;B++){var N=m[B].r-O;M=Math.max(M,N)}O=0;for(var k=0;k<m.length;k++){var D=m[k];0===k&&(O=D.r),D.r=O,O+=M}}for(var q={},$=0;$<m.length;$++)for(var F=m[$],L=F.dTheta,U=F.r,W=0;W<F.length;W++){var z=F[W],V=t.startAngle+(r?1:-1)*L*W,H={x:s+U*Math.cos(V),y:l+U*Math.sin(V)};q[z.node.id()]=H}return o.nodes().layoutPositions(this,t,(function(e){var t=e.id();return q[t]})),this};var defaults$4={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(e){this.options=extend({},defaults$4,e),this.options.layout=this}CoseLayout.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,!0!==e.animate&&!1!==e.animate||r.emit({type:"layoutstart",layout:r}),DEBUG=!0===e.debug;var n=createLayoutInfo(t,r,e);DEBUG&&printLayoutInfo(n),e.randomize&&randomizePositions(n);var o=performanceNow(),i=function(){refreshPositions(n,t,e),!0===e.fit&&t.fit(e.padding)},a=function(t){return!(r.stopped||t>=e.numIter)&&(step(n,e),n.temperature=n.temperature*e.coolingFactor,!(n.temperature<e.minTemp))},s=function(){if(!0===e.animate||!1===e.animate)i(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var t=e.eles.nodes(),o=getScaleInBoundsFn(n,e,t);t.layoutPositions(r,e,o)}},l=0,u=!0;if(!0===e.animate){!function t(){for(var r=0;u&&r<e.refresh;)u=a(l),l++,r++;u?(performanceNow()-o>=e.animationThreshold&&i(),requestAnimationFrame$1(t)):(separateComponents(n,e),s())}()}else{for(;u;)u=a(l),l++;separateComponents(n,e),s()}return this},CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var createLayoutInfo=function(e,t,r){for(var n=r.eles.edges(),o=r.eles.nodes(),i=makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:i.w,clientHeight:i.h,boundingBox:i},s=r.eles.components(),l={},u=0;u<s.length;u++)for(var c=s[u],g=0;g<c.length;g++){l[c[g].id()]=u}for(u=0;u<a.nodeSize;u++){var d=(m=o[u]).layoutDimensions(r);(O={}).isLocked=m.locked(),O.id=m.data("id"),O.parentId=m.data("parent"),O.cmptId=l[m.id()],O.children=[],O.positionX=m.position("x"),O.positionY=m.position("y"),O.offsetX=0,O.offsetY=0,O.height=d.w,O.width=d.h,O.maxX=O.positionX+O.width/2,O.minX=O.positionX-O.width/2,O.maxY=O.positionY+O.height/2,O.minY=O.positionY-O.height/2,O.padLeft=parseFloat(m.style("padding")),O.padRight=parseFloat(m.style("padding")),O.padTop=parseFloat(m.style("padding")),O.padBottom=parseFloat(m.style("padding")),O.nodeRepulsion=fn$6(r.nodeRepulsion)?r.nodeRepulsion(m):r.nodeRepulsion,a.layoutNodes.push(O),a.idToIndex[O.id]=u}var p=[],h=0,f=-1,y=[];for(u=0;u<a.nodeSize;u++){var m,b=(m=a.layoutNodes[u]).parentId;null!=b?a.layoutNodes[a.idToIndex[b]].children.push(m.id):(p[++f]=m.id,y.push(m.id))}for(a.graphSet.push(y);h<=f;){var _=p[h++],v=a.idToIndex[_],S=a.layoutNodes[v].children;if(S.length>0){a.graphSet.push(S);for(u=0;u<S.length;u++)p[++f]=S[u]}}for(u=0;u<a.graphSet.length;u++){var E=a.graphSet[u];for(g=0;g<E.length;g++){var w=a.idToIndex[E[g]];a.indexToGraph[w]=u}}for(u=0;u<a.edgeSize;u++){var x=n[u],T={};T.id=x.data("id"),T.sourceId=x.data("source"),T.targetId=x.data("target");var R=fn$6(r.idealEdgeLength)?r.idealEdgeLength(x):r.idealEdgeLength,A=fn$6(r.edgeElasticity)?r.edgeElasticity(x):r.edgeElasticity,j=a.idToIndex[T.sourceId],C=a.idToIndex[T.targetId];if(a.indexToGraph[j]!=a.indexToGraph[C]){for(var P=findLCA(T.sourceId,T.targetId,a),I=a.graphSet[P],M=0,O=a.layoutNodes[j];-1===I.indexOf(O.id);)O=a.layoutNodes[a.idToIndex[O.parentId]],M++;for(O=a.layoutNodes[C];-1===I.indexOf(O.id);)O=a.layoutNodes[a.idToIndex[O.parentId]],M++;R*=M*r.nestingFactor}T.idealLength=R,T.elasticity=A,a.layoutEdges.push(T)}return a},findLCA=function(e,t,r){var n=findLCA_aux(e,t,0,r);return 2>n.count?0:n.graph},findLCA_aux=function e(t,r,n,o){var i=o.graphSet[n];if(-1<i.indexOf(t)&&-1<i.indexOf(r))return{count:2,graph:n};for(var a=0,s=0;s<i.length;s++){var l=i[s],u=o.idToIndex[l],c=o.layoutNodes[u].children;if(0!==c.length){var g=e(t,r,o.indexToGraph[o.idToIndex[c[0]]],o);if(0!==g.count){if(1!==g.count)return g;if(2===++a)break}}}return{count:a,graph:n}},printLayoutInfo,randomizePositions=function(e,t){for(var r=e.clientWidth,n=e.clientHeight,o=0;o<e.nodeSize;o++){var i=e.layoutNodes[o];0!==i.children.length||i.isLocked||(i.positionX=Math.random()*r,i.positionY=Math.random()*n)}},getScaleInBoundsFn=function(e,t,r){var n=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach((function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];o.x1=Math.min(o.x1,r.positionX),o.x2=Math.max(o.x2,r.positionX),o.y1=Math.min(o.y1,r.positionY),o.y2=Math.max(o.y2,r.positionY)})),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(r,i){var a=e.layoutNodes[e.idToIndex[r.data("id")]];if(t.boundingBox){var s=(a.positionX-o.x1)/o.w,l=(a.positionY-o.y1)/o.h;return{x:n.x1+s*n.w,y:n.y1+l*n.h}}return{x:a.positionX,y:a.positionY}}},refreshPositions=function(e,t,r){var n=r.layout,o=r.eles.nodes(),i=getScaleInBoundsFn(e,r,o);o.positions(i),!0!==e.ready&&(e.ready=!0,n.one("layoutready",r.ready),n.emit({type:"layoutready",layout:this}))},step=function(e,t,r){calculateNodeForces(e,t),calculateEdgeForces(e),calculateGravityForces(e,t),propagateForces(e),updatePositions(e)},calculateNodeForces=function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var n=e.graphSet[r],o=n.length,i=0;i<o;i++)for(var a=e.layoutNodes[e.idToIndex[n[i]]],s=i+1;s<o;s++){var l=e.layoutNodes[e.idToIndex[n[s]]];nodeRepulsion(a,l,e,t)}},randomDistance=function(e){return-e+2*e*Math.random()},nodeRepulsion=function(e,t,r,n){if(e.cmptId===t.cmptId||r.isCompound){var o=t.positionX-e.positionX,i=t.positionY-e.positionY;0===o&&0===i&&(o=randomDistance(1),i=randomDistance(1));var a=nodesOverlap(e,t,o,i);if(a>0)var s=(u=n.nodeOverlap*a)*o/(f=Math.sqrt(o*o+i*i)),l=u*i/f;else{var u,c=findClippingPoint(e,o,i),g=findClippingPoint(t,-1*o,-1*i),d=g.x-c.x,p=g.y-c.y,h=d*d+p*p,f=Math.sqrt(h);s=(u=(e.nodeRepulsion+t.nodeRepulsion)/h)*d/f,l=u*p/f}e.isLocked||(e.offsetX-=s,e.offsetY-=l),t.isLocked||(t.offsetX+=s,t.offsetY+=l)}},nodesOverlap=function(e,t,r,n){if(r>0)var o=e.maxX-t.minX;else o=t.maxX-e.minX;if(n>0)var i=e.maxY-t.minY;else i=t.maxY-e.minY;return o>=0&&i>=0?Math.sqrt(o*o+i*i):0},findClippingPoint=function(e,t,r){var n=e.positionX,o=e.positionY,i=e.height||1,a=e.width||1,s=r/t,l=i/a,u={};return 0===t&&0<r||0===t&&0>r?(u.x=n,u.y=o+i/2,u):0<t&&-1*l<=s&&s<=l?(u.x=n+a/2,u.y=o+a*r/2/t,u):0>t&&-1*l<=s&&s<=l?(u.x=n-a/2,u.y=o-a*r/2/t,u):0<r&&(s<=-1*l||s>=l)?(u.x=n+i*t/2/r,u.y=o+i/2,u):0>r&&(s<=-1*l||s>=l)?(u.x=n-i*t/2/r,u.y=o-i/2,u):u},calculateEdgeForces=function(e,t){for(var r=0;r<e.edgeSize;r++){var n=e.layoutEdges[r],o=e.idToIndex[n.sourceId],i=e.layoutNodes[o],a=e.idToIndex[n.targetId],s=e.layoutNodes[a],l=s.positionX-i.positionX,u=s.positionY-i.positionY;if(0!==l||0!==u){var c=findClippingPoint(i,l,u),g=findClippingPoint(s,-1*l,-1*u),d=g.x-c.x,p=g.y-c.y,h=Math.sqrt(d*d+p*p),f=Math.pow(n.idealLength-h,2)/n.elasticity;if(0!==h)var y=f*d/h,m=f*p/h;else y=0,m=0;i.isLocked||(i.offsetX+=y,i.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}}},calculateGravityForces=function(e,t){if(0!==t.gravity)for(var r=0;r<e.graphSet.length;r++){var n=e.graphSet[r],o=n.length;if(0===r)var i=e.clientHeight/2,a=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[n[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]];i=l.positionX,a=l.positionY}for(var u=0;u<o;u++){var c=e.layoutNodes[e.idToIndex[n[u]]];if(!c.isLocked){var g=i-c.positionX,d=a-c.positionY,p=Math.sqrt(g*g+d*d);if(p>1){var h=t.gravity*g/p,f=t.gravity*d/p;c.offsetX+=h,c.offsetY+=f}}}}},propagateForces=function(e,t){var r=[],n=0,o=-1;for(r.push.apply(r,e.graphSet[0]),o+=e.graphSet[0].length;n<=o;){var i=r[n++],a=e.idToIndex[i],s=e.layoutNodes[a],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,g=0;g<l.length;g++){var d=e.layoutNodes[e.idToIndex[l[g]]];d.offsetX+=u,d.offsetY+=c,r[++o]=l[g]}s.offsetX=0,s.offsetY=0}}},updatePositions=function(e,t){for(var r=0;r<e.nodeSize;r++){0<(o=e.layoutNodes[r]).children.length&&(o.maxX=void 0,o.minX=void 0,o.maxY=void 0,o.minY=void 0)}for(r=0;r<e.nodeSize;r++){if(!(0<(o=e.layoutNodes[r]).children.length||o.isLocked)){var n=limitForce(o.offsetX,o.offsetY,e.temperature);o.positionX+=n.x,o.positionY+=n.y,o.offsetX=0,o.offsetY=0,o.minX=o.positionX-o.width,o.maxX=o.positionX+o.width,o.minY=o.positionY-o.height,o.maxY=o.positionY+o.height,updateAncestryBoundaries(o,e)}}for(r=0;r<e.nodeSize;r++){var o;0<(o=e.layoutNodes[r]).children.length&&!o.isLocked&&(o.positionX=(o.maxX+o.minX)/2,o.positionY=(o.maxY+o.minY)/2,o.width=o.maxX-o.minX,o.height=o.maxY-o.minY)}},limitForce=function(e,t,r){var n=Math.sqrt(e*e+t*t);if(n>r)var o={x:r*e/n,y:r*t/n};else o={x:e,y:t};return o},updateAncestryBoundaries=function e(t,r){var n=t.parentId;if(null!=n){var o=r.layoutNodes[r.idToIndex[n]],i=!1;return(null==o.maxX||t.maxX+o.padRight>o.maxX)&&(o.maxX=t.maxX+o.padRight,i=!0),(null==o.minX||t.minX-o.padLeft<o.minX)&&(o.minX=t.minX-o.padLeft,i=!0),(null==o.maxY||t.maxY+o.padBottom>o.maxY)&&(o.maxY=t.maxY+o.padBottom,i=!0),(null==o.minY||t.minY-o.padTop<o.minY)&&(o.minY=t.minY-o.padTop,i=!0),i?e(o,r):void 0}},separateComponents=function(e,t){for(var r=e.layoutNodes,n=[],o=0;o<r.length;o++){var i=r[o],a=i.cmptId;(n[a]=n[a]||[]).push(i)}var s=0;for(o=0;o<n.length;o++){if(f=n[o]){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var l=0;l<f.length;l++){var u=f[l];f.x1=Math.min(f.x1,u.positionX-u.width/2),f.x2=Math.max(f.x2,u.positionX+u.width/2),f.y1=Math.min(f.y1,u.positionY-u.height/2),f.y2=Math.max(f.y2,u.positionY+u.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,s+=f.w*f.h}}n.sort((function(e,t){return t.w*t.h-e.w*e.h}));var c=0,g=0,d=0,p=0,h=Math.sqrt(s)*e.clientWidth/e.clientHeight;for(o=0;o<n.length;o++){var f;if(f=n[o]){for(l=0;l<f.length;l++){(u=f[l]).isLocked||(u.positionX+=c-f.x1,u.positionY+=g-f.y1)}c+=f.w+t.componentSpacing,d+=f.w+t.componentSpacing,p=Math.max(p,f.h),d>h&&(g+=p+t.componentSpacing,c=0,d=0,p=0)}}},defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function GridLayout(e){this.options=extend({},defaults$3,e)}GridLayout.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,o=n.nodes().not(":parent");t.sort&&(o=o.sort(t.sort));var i=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===i.h||0===i.w)n.nodes().layoutPositions(this,t,(function(e){return{x:i.x1,y:i.y1}}));else{var a=o.size(),s=Math.sqrt(a*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),c=function(e){if(null==e)return Math.min(l,u);Math.min(l,u)==l?l=e:u=e},g=function(e){if(null==e)return Math.max(l,u);Math.max(l,u)==l?l=e:u=e},d=t.rows,p=null!=t.cols?t.cols:t.columns;if(null!=d&&null!=p)l=d,u=p;else if(null!=d&&null==p)l=d,u=Math.ceil(a/l);else if(null==d&&null!=p)u=p,l=Math.ceil(a/u);else if(u*l>a){var h=c(),f=g();(h-1)*f>=a?c(h-1):(f-1)*h>=a&&g(f-1)}else for(;u*l<a;){var y=c(),m=g();(m+1)*y>=a?g(m+1):c(y+1)}var b=i.w/u,_=i.h/l;if(t.condense&&(b=0,_=0),t.avoidOverlap)for(var v=0;v<o.length;v++){var S=o[v],E=S._private.position;null!=E.x&&null!=E.y||(E.x=0,E.y=0);var w=S.layoutDimensions(t),x=t.avoidOverlapPadding,T=w.w+x,R=w.h+x;b=Math.max(b,T),_=Math.max(_,R)}for(var A={},j=function(e,t){return!!A["c-"+e+"-"+t]},C=function(e,t){A["c-"+e+"-"+t]=!0},P=0,I=0,M=function(){++I>=u&&(I=0,P++)},O={},B=0;B<o.length;B++){var N=o[B],k=t.position(N);if(k&&(void 0!==k.row||void 0!==k.col)){var D={row:k.row,col:k.col};if(void 0===D.col)for(D.col=0;j(D.row,D.col);)D.col++;else if(void 0===D.row)for(D.row=0;j(D.row,D.col);)D.row++;O[N.id()]=D,C(D.row,D.col)}}o.layoutPositions(this,t,(function(e,t){var r,n;if(e.locked()||e.isParent())return!1;var o=O[e.id()];if(o)r=o.col*b+b/2+i.x1,n=o.row*_+_/2+i.y1;else{for(;j(P,I);)M();r=I*b+b/2+i.x1,n=P*_+_/2+i.y1,C(P,I),M()}return{x:r,y:n}}))}return this};var defaults$2={ready:function(){},stop:function(){}};function NullLayout(e){this.options=extend({},defaults$2,e)}NullLayout.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions((function(){return{x:0,y:0}})),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},NullLayout.prototype.stop=function(){return this};var defaults$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function PresetLayout(e){this.options=extend({},defaults$1,e)}PresetLayout.prototype.run=function(){var e=this.options,t=e.eles.nodes(),r=fn$6(e.positions);return t.layoutPositions(this,e,(function(t,n){var o=function(t){if(null==e.positions)return copyPosition(t.position());if(r)return e.positions(t);var n=e.positions[t._private.data.id];return null==n?null:n}(t);return!t.locked()&&null!=o&&o})),this};var defaults={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function RandomLayout(e){this.options=extend({},defaults,e)}RandomLayout.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.nodes().layoutPositions(this,e,(function(e,t){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}})),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(e){this.options=e,this.notifications=0}var noop=function(){},throwImgErr=function(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:noop,notify:function(){this.notifications++},init:noop,isHeadless:function(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp$f={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=function(e,t,r,n,o,i,a){var s=o.x-r/2-a,l=o.x+r/2+a,u=o.y-r/2-a,c=o.y+r/2+a;return s<=e&&e<=l&&u<=t&&t<=c},n=function(e,t,r,n,o){var i=e*Math.cos(n)-t*Math.sin(n),a=(e*Math.sin(n)+t*Math.cos(n))*r;return{x:i*r+o.x,y:a+o.y}},o=function(e,t,r,o){for(var i=[],a=0;a<e.length;a+=2){var s=e[a],l=e[a+1];i.push(n(s,l,t,r,o))}return i},i=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n.x,n.y)}return t},a=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(n,s){string(s)&&(s=e[s]),e[n]=extend({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,r,n,a,s){var l=i(o(this.points,r+2*s,n,a));return pointInsidePolygonPoints(e,t,l)},roughCollide:r,draw:function(e,r,n,i){var a=o(this.points,r,n,i);t.arrowShapeImpl("polygon")(e,a)},spacing:function(e){return 0},gap:a},s)};s("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(e,r,i,a,s){var l=o(this.points,r,i,a),u=this.controlPoint,c=n(u[0],u[1],r,i,a);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return.8*a(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,r,n,a,s,l){var u=i(o(this.points,r+2*l,n,a)),c=i(o(this.pointsTee,r+2*l,n,a));return pointInsidePolygonPoints(e,t,u)||pointInsidePolygonPoints(e,t,c)},draw:function(e,r,n,i,a){var s=o(this.points,r,n,i),l=o(this.pointsTee,r,n,i);t.arrowShapeImpl(this.name)(e,s,l)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(e,t,r,n,a,s,l){var u=a,c=Math.pow(u.x-e,2)+Math.pow(u.y-t,2)<=Math.pow((r+2*l)*this.radius,2),g=i(o(this.points,r+2*l,n,a));return pointInsidePolygonPoints(e,t,g)||c},draw:function(e,r,n,i,a){var s=o(this.pointsTr,r,n,i);t.arrowShapeImpl(this.name)(e,s,i.x,i.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var r=this.baseCrossLinePts.slice(),n=t/e;return r[3]=r[3]-n,r[5]=r[5]-n,r},collide:function(e,t,r,n,a,s,l){var u=i(o(this.points,r+2*l,n,a)),c=i(o(this.crossLinePts(r,s),r+2*l,n,a));return pointInsidePolygonPoints(e,t,u)||pointInsidePolygonPoints(e,t,c)},draw:function(e,r,n,i,a){var s=o(this.points,r,n,i),l=o(this.crossLinePts(r,a),r,n,i);t.arrowShapeImpl(this.name)(e,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*a(e)}}),s("circle",{radius:.15,collide:function(e,t,r,n,o,i,a){var s=o;return Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((r+2*a)*this.radius,2)},draw:function(e,r,n,o,i){t.arrowShapeImpl(this.name)(e,o.x,o.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},BRp$e={projectIntoViewport:function(e,t){var r=this.cy,n=this.findContainerClientCoords(),o=n[0],i=n[1],a=n[4],s=r.pan(),l=r.zoom();return[((e-o)/a-s.x)/l,((t-i)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=window$1.getComputedStyle(e),n=function(e){return parseFloat(r.getPropertyValue(e))},o=n("padding-left"),i=n("padding-right"),a=n("padding-top"),s=n("padding-bottom"),l=n("border-left-width"),u=n("border-right-width"),c=n("border-top-width"),g=(n("border-bottom-width"),e.clientWidth),d=e.clientHeight,p=o+i,h=a+s,f=l+u,y=t.width/(g+f),m=g-p,b=d-h,_=t.left+o+l,v=t.top+a+c;return this.containerBB=[_,v,m,b,y]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]},findNearestElements:function(e,t,r,n){var o,i,a=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),g=s.cy.hasCompoundNodes(),d=(n?24:8)/c,p=(n?8:2)/c,h=(n?8:2)/c,f=1/0;function y(e,t){if(e.isNode()){if(i)return;i=e,u.push(e)}if(e.isEdge()&&(null==t||t<f))if(o){if(o.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&o.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var r=0;r<u.length;r++)if(u[r].isEdge()){u[r]=e,o=e,f=null!=t?t:f;break}}else u.push(e),o=e,f=null!=t?t:f}function m(r){var n=r.outerWidth()+2*p,o=r.outerHeight()+2*p,i=n/2,l=o/2,u=r.position();if(u.x-i<=e&&e<=u.x+i&&u.y-l<=t&&t<=u.y+l&&s.nodeShapes[a.getNodeShape(r)].checkPoint(e,t,0,n,o,u.x,u.y))return y(r,0),!0}function b(r){var n,o=r._private,i=o.rscratch,l=r.pstyle("width").pfValue,c=r.pstyle("arrow-scale").value,p=l/2+d,h=p*p,f=2*p,b=o.source,_=o.target;if("segments"===i.edgeType||"straight"===i.edgeType||"haystack"===i.edgeType){for(var v=i.allpts,S=0;S+3<v.length;S+=2)if(inLineVicinity(e,t,v[S],v[S+1],v[S+2],v[S+3],f)&&h>(n=sqdistToFiniteLine(e,t,v[S],v[S+1],v[S+2],v[S+3])))return y(r,n),!0}else if("bezier"===i.edgeType||"multibezier"===i.edgeType||"self"===i.edgeType||"compound"===i.edgeType)for(v=i.allpts,S=0;S+5<i.allpts.length;S+=4)if(inBezierVicinity(e,t,v[S],v[S+1],v[S+2],v[S+3],v[S+4],v[S+5],f)&&h>(n=sqdistToQuadraticBezier(e,t,v[S],v[S+1],v[S+2],v[S+3],v[S+4],v[S+5])))return y(r,n),!0;b=b||o.source,_=_||o.target;var E=a.getArrowWidth(l,c),w=[{name:"source",x:i.arrowStartX,y:i.arrowStartY,angle:i.srcArrowAngle},{name:"target",x:i.arrowEndX,y:i.arrowEndY,angle:i.tgtArrowAngle},{name:"mid-source",x:i.midX,y:i.midY,angle:i.midsrcArrowAngle},{name:"mid-target",x:i.midX,y:i.midY,angle:i.midtgtArrowAngle}];for(S=0;S<w.length;S++){var x=w[S],T=s.arrowShapes[r.pstyle(x.name+"-arrow-shape").value],R=r.pstyle("width").pfValue;if(T.roughCollide(e,t,E,x.angle,{x:x.x,y:x.y},R,d)&&T.collide(e,t,E,x.angle,{x:x.x,y:x.y},R,d))return y(r),!0}g&&u.length>0&&(m(b),m(_))}function _(e,t,r){return getPrefixedProperty(e,t,r)}function v(r,n){var o,i=r._private,a=h;o=n?n+"-":"",r.boundingBox();var s=i.labelBounds[n||"main"],l=r.pstyle(o+"label").value;if("yes"===r.pstyle("text-events").strValue&&l){var u=_(i.rscratch,"labelX",n),c=_(i.rscratch,"labelY",n),g=_(i.rscratch,"labelAngle",n),d=r.pstyle(o+"text-margin-x").pfValue,p=r.pstyle(o+"text-margin-y").pfValue,f=s.x1-a-d,m=s.x2+a-d,b=s.y1-a-p,v=s.y2+a-p;if(g){var S=Math.cos(g),E=Math.sin(g),w=function(e,t){return{x:(e-=u)*S-(t-=c)*E+u,y:e*E+t*S+c}},x=w(f,b),T=w(f,v),R=w(m,b),A=w(m,v),j=[x.x+d,x.y+p,R.x+d,R.y+p,A.x+d,A.y+p,T.x+d,T.y+p];if(pointInsidePolygonPoints(e,t,j))return y(r),!0}else if(inBoundingBox(s,e,t))return y(r),!0}}r&&(l=l.interactive);for(var S=l.length-1;S>=0;S--){var E=l[S];E.isNode()?m(E)||v(E):b(E)||v(E)||v(E,"source")||v(E,"target")}return u},getAllInBox:function(e,t,r,n){for(var o=this.getCachedZSortedEles().interactive,i=[],a=Math.min(e,r),s=Math.max(e,r),l=Math.min(t,n),u=Math.max(t,n),c=makeBoundingBox({x1:e=a,y1:t=l,x2:r=s,y2:n=u}),g=0;g<o.length;g++){var d=o[g];if(d.isNode()){var p=d,h=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});boundingBoxesIntersect(c,h)&&!boundingBoxInBoundingBox(h,c)&&i.push(p)}else{var f=d,y=f._private,m=y.rscratch;if(null!=m.startX&&null!=m.startY&&!inBoundingBox(c,m.startX,m.startY))continue;if(null!=m.endX&&null!=m.endY&&!inBoundingBox(c,m.endX,m.endY))continue;if("bezier"===m.edgeType||"multibezier"===m.edgeType||"self"===m.edgeType||"compound"===m.edgeType||"segments"===m.edgeType||"haystack"===m.edgeType){for(var b=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,_=!0,v=0;v<b.length;v++)if(!pointInBoundingBox(c,b[v])){_=!1;break}_&&i.push(f)}else"haystack"!==m.edgeType&&"straight"!==m.edgeType||i.push(f)}}return i}},BRp$d={calculateArrowAngles:function(e){var t,r,n,o,i,a,s=e._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,g="segments"===s.edgeType,d="compound"===s.edgeType,p="self"===s.edgeType;if(l?(n=s.haystackPts[0],o=s.haystackPts[1],i=s.haystackPts[2],a=s.haystackPts[3]):(n=s.arrowStartX,o=s.arrowStartY,i=s.arrowEndX,a=s.arrowEndY),f=s.midX,y=s.midY,g)t=n-s.segpts[0],r=o-s.segpts[1];else if(c||d||p||u){var h=s.allpts;t=n-qbezierAt(h[0],h[2],h[4],.1),r=o-qbezierAt(h[1],h[3],h[5],.1)}else t=n-f,r=o-y;s.srcArrowAngle=getAngleFromDisp(t,r);var f=s.midX,y=s.midY;if(l&&(f=(n+i)/2,y=(o+a)/2),t=i-n,r=a-o,g)if((h=s.allpts).length/2%2==0){var m=(b=h.length/2)-2;t=h[b]-h[m],r=h[b+1]-h[m+1]}else{m=(b=h.length/2-1)-2;var b,_=b+2;t=h[b]-h[m],r=h[b+1]-h[m+1]}else if(c||d||p){var v,S,E,w,h=s.allpts;if(s.ctrlpts.length/2%2==0){var x=(T=(R=h.length/2-1)+2)+2;v=qbezierAt(h[R],h[T],h[x],0),S=qbezierAt(h[R+1],h[T+1],h[x+1],0),E=qbezierAt(h[R],h[T],h[x],1e-4),w=qbezierAt(h[R+1],h[T+1],h[x+1],1e-4)}else{var T,R;x=(T=h.length/2-1)+2;v=qbezierAt(h[R=T-2],h[T],h[x],.4999),S=qbezierAt(h[R+1],h[T+1],h[x+1],.4999),E=qbezierAt(h[R],h[T],h[x],.5),w=qbezierAt(h[R+1],h[T+1],h[x+1],.5)}t=E-v,r=w-S}(s.midtgtArrowAngle=getAngleFromDisp(t,r),s.midDispX=t,s.midDispY=r,t*=-1,r*=-1,g)&&((h=s.allpts).length/2%2==0||(t=-(h[_=(b=h.length/2-1)+2]-h[b]),r=-(h[_+1]-h[b+1])));if(s.midsrcArrowAngle=getAngleFromDisp(t,r),g)t=i-s.segpts[s.segpts.length-2],r=a-s.segpts[s.segpts.length-1];else if(c||d||p||u){var A=(h=s.allpts).length;t=i-qbezierAt(h[A-6],h[A-4],h[A-2],.9),r=a-qbezierAt(h[A-5],h[A-3],h[A-1],.9)}else t=i-f,r=a-y;s.tgtArrowAngle=getAngleFromDisp(t,r)}};BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[e+", "+t];return n||(n=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=n,n)};var BRp$c={};function getPts(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];t.push({x:n,y:o})}return t}}BRp$c.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r._private,o=n.rscratch;if(!o.haystack){var i=2*Math.random()*Math.PI;o.source={x:Math.cos(i),y:Math.sin(i)},i=2*Math.random()*Math.PI,o.target={x:Math.cos(i),y:Math.sin(i)}}var a=n.source,s=n.target,l=a.position(),u=s.position(),c=a.width(),g=s.width(),d=a.height(),p=s.height(),h=r.pstyle("haystack-radius").value/2;o.haystackPts=o.allpts=[o.source.x*c*h+l.x,o.source.y*d*h+l.y,o.target.x*g*h+u.x,o.target.y*p*h+u.y],o.midX=(o.allpts[0]+o.allpts[2])/2,o.midY=(o.allpts[1]+o.allpts[3])/2,o.edgeType="haystack",o.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},BRp$c.findSegmentsPoints=function(e,t){var r=e._private.rscratch,n=t.posPts,o=t.intersectionPts,i=t.vectorNormInverse,a=e.pstyle("edge-distances").value,s=e.pstyle("segment-weights"),l=e.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);r.edgeType="segments",r.segpts=[];for(var c=0;c<u;c++){var g=s.pfValue[c],d=l.pfValue[c],p=1-g,h=g,f="node-position"===a?n:o,y={x:f.x1*p+f.x2*h,y:f.y1*p+f.y2*h};r.segpts.push(y.x+i.x*d,y.y+i.y*d)}},BRp$c.findLoopPoints=function(e,t,r,n){var o=e._private.rscratch,i=t.dirCounts,a=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,g=e.pstyle("control-point-step-size").pfValue;o.edgeType="self";var d=r,p=g;n&&(d=0,p=l);var h=u-Math.PI/2,f=h-c/2,y=h+c/2,m=String(u+"_"+c);d=void 0===i[m]?i[m]=0:++i[m],o.ctrlpts=[a.x+1.4*Math.cos(f)*p*(d/3+1),a.y+1.4*Math.sin(f)*p*(d/3+1),a.x+1.4*Math.cos(y)*p*(d/3+1),a.y+1.4*Math.sin(y)*p*(d/3+1)]},BRp$c.findCompoundLoopPoints=function(e,t,r,n){var o=e._private.rscratch;o.edgeType="compound";var i=t.srcPos,a=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,g=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),p=d?d.pfValue[0]:void 0,h=r,f=g;n&&(h=0,f=p);var y={x:i.x-s/2,y:i.y-l/2},m={x:a.x-u/2,y:a.y-c/2},b={x:Math.min(y.x,m.x),y:Math.min(y.y,m.y)},_=Math.max(.5,Math.log(.01*s)),v=Math.max(.5,Math.log(.01*u));o.ctrlpts=[b.x,b.y-(1+Math.pow(50,1.12)/100)*f*(h/3+1)*_,b.x-(1+Math.pow(50,1.12)/100)*f*(h/3+1)*v,b.y]},BRp$c.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},BRp$c.findBezierPoints=function(e,t,r,n,o){var i=e._private.rscratch,a=t.vectorNormInverse,s=t.posPts,l=t.intersectionPts,u=e.pstyle("edge-distances").value,c=e.pstyle("control-point-step-size").pfValue,g=e.pstyle("control-point-distances"),d=e.pstyle("control-point-weights"),p=g&&d?Math.min(g.value.length,d.value.length):1,h=g?g.pfValue[0]:void 0,f=d.value[0],y=n;i.edgeType=y?"multibezier":"bezier",i.ctrlpts=[];for(var m=0;m<p;m++){var b=(.5-t.eles.length/2+r)*c*(o?-1:1),_=void 0,v=signum(b);y&&(h=g?g.pfValue[m]:c,f=d.value[m]);var S=void 0!==(_=n?h:void 0!==h?v*h:void 0)?_:b,E=1-f,w=f,x="node-position"===u?s:l,T={x:x.x1*E+x.x2*w,y:x.y1*E+x.y2*w};i.ctrlpts.push(T.x+a.x*S,T.y+a.y*S)}},BRp$c.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n="vertical",o="horizontal",i="leftward",a="rightward",s="downward",l="upward",u=t.posPts,c=t.srcW,g=t.srcH,d=t.tgtW,p=t.tgtH,h="node-position"!==e.pstyle("edge-distances").value,f=e.pstyle("taxi-direction").value,y=f,m=e.pstyle("taxi-turn"),b="%"===m.units,_=m.pfValue,v=_<0,S=e.pstyle("taxi-turn-min-distance").pfValue,E=h?(c+d)/2:0,w=h?(g+p)/2:0,x=u.x2-u.x1,T=u.y2-u.y1,R=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},A=R(x,E),j=R(T,w),C=!1;"auto"===y?f=Math.abs(A)>Math.abs(j)?o:n:y===l||y===s?(f=n,C=!0):y!==i&&y!==a||(f=o,C=!0);var P,I=f===n,M=I?j:A,O=I?T:x,B=signum(O),N=!1;(C&&(b||v)||!(y===s&&O<0||y===l&&O>0||y===i&&O>0||y===a&&O<0)||(M=(B*=-1)*Math.abs(M),N=!0),b)?P=(_<0?1+_:_)*M:P=(_<0?M:0)+_*B;var k=function(e){return Math.abs(e)<S||Math.abs(e)>=Math.abs(M)},D=k(P),q=k(Math.abs(M)-Math.abs(P));if((D||q)&&!N)if(I){var $=Math.abs(O)<=g/2,F=Math.abs(x)<=d/2;if($){var L=(u.x1+u.x2)/2,U=u.y1,W=u.y2;r.segpts=[L,U,L,W]}else if(F){var z=(u.y1+u.y2)/2,V=u.x1,H=u.x2;r.segpts=[V,z,H,z]}else r.segpts=[u.x1,u.y2]}else{var G=Math.abs(O)<=c/2,K=Math.abs(T)<=p/2;if(G){var Y=(u.y1+u.y2)/2,X=u.x1,Z=u.x2;r.segpts=[X,Y,Z,Y]}else if(K){var Q=(u.x1+u.x2)/2,J=u.y1,ee=u.y2;r.segpts=[Q,J,Q,ee]}else r.segpts=[u.x2,u.y1]}else if(I){var te=u.y1+P+(h?g/2*B:0),re=u.x1,ne=u.x2;r.segpts=[re,te,ne,te]}else{var oe=u.x1+P+(h?c/2*B:0),ie=u.y1,ae=u.y2;r.segpts=[oe,ie,oe,ae]}},BRp$c.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var n=t.srcPos,o=t.tgtPos,i=t.srcW,a=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,g=!number$1(r.startX)||!number$1(r.startY),d=!number$1(r.arrowStartX)||!number$1(r.arrowStartY),p=!number$1(r.endX)||!number$1(r.endY),h=!number$1(r.arrowEndX)||!number$1(r.arrowEndY),f=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),y=dist({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),m=y<f,b=dist({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),_=b<f,v=!1;if(g||d||m){v=!0;var S={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},E=Math.sqrt(S.x*S.x+S.y*S.y),w={x:S.x/E,y:S.y/E},x=Math.max(i,a),T={x:r.ctrlpts[0]+2*w.x*x,y:r.ctrlpts[1]+2*w.y*x},R=u.intersectLine(n.x,n.y,i,a,T.x,T.y,0);m?(r.ctrlpts[0]=r.ctrlpts[0]+w.x*(f-y),r.ctrlpts[1]=r.ctrlpts[1]+w.y*(f-y)):(r.ctrlpts[0]=R[0]+w.x*f,r.ctrlpts[1]=R[1]+w.y*f)}if(p||h||_){v=!0;var A={x:r.ctrlpts[0]-o.x,y:r.ctrlpts[1]-o.y},j=Math.sqrt(A.x*A.x+A.y*A.y),C={x:A.x/j,y:A.y/j},P=Math.max(i,a),I={x:r.ctrlpts[0]+2*C.x*P,y:r.ctrlpts[1]+2*C.y*P},M=c.intersectLine(o.x,o.y,s,l,I.x,I.y,0);_?(r.ctrlpts[0]=r.ctrlpts[0]+C.x*(f-b),r.ctrlpts[1]=r.ctrlpts[1]+C.y*(f-b)):(r.ctrlpts[0]=M[0]+C.x*f,r.ctrlpts[1]=M[1]+C.y*f)}v&&this.findEndpoints(e)}},BRp$c.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var n;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,.5,t.midX=qbezierAt(t.allpts[n],t.allpts[n+2],t.allpts[n+4],.5),t.midY=qbezierAt(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType)if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0){var o=t.segpts.length/2,i=o-2;t.midX=(t.segpts[i]+t.segpts[o])/2,t.midY=(t.segpts[i+1]+t.segpts[o+1])/2}else{var a=t.segpts.length/2-1;t.midX=t.segpts[a],t.midY=t.segpts[a+1]}},BRp$c.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||number$1(t.startX)&&number$1(t.startY)&&number$1(t.endX)&&number$1(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,warn("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},BRp$c.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,n=r.cy.hasCompoundNodes(),o={map:new Map$1,get:function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null},set:function(e,t){var r=this.map.get(e[0]);null==r&&(r=new Map$1,this.map.set(e[0],r)),r.set(e[1],t)}},i=[],a=[],s=0;s<e.length;s++){var l=e[s],u=l._private,c=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==c){var g="unbundled-bezier"===c||"segments"===c||"straight"===c||"straight-triangle"===c||"taxi"===c,d="unbundled-bezier"===c||"bezier"===c,p=u.source,h=u.target,f=[p.poolIndex(),h.poolIndex()].sort(),y=o.get(f);null==y&&(y={eles:[]},o.set(f,y),i.push(f)),y.eles.push(l),g&&(y.hasUnbundled=!0),d&&(y.hasBezier=!0)}else a.push(l)}for(var m=function(e){var a=i[e],s=o.get(a),l=void 0;if(!s.hasUnbundled){var u=s.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));clearArray(s.eles),u.forEach((function(e){return s.eles.push(e)})),s.eles.sort((function(e,t){return e.poolIndex()-t.poolIndex()}))}var c=s.eles[0],g=c.source(),d=c.target();if(g.poolIndex()>d.poolIndex()){var p=g;g=d,d=p}var h=s.srcPos=g.position(),f=s.tgtPos=d.position(),y=s.srcW=g.outerWidth(),m=s.srcH=g.outerHeight(),b=s.tgtW=d.outerWidth(),_=s.tgtH=d.outerHeight(),v=s.srcShape=r.nodeShapes[t.getNodeShape(g)],S=s.tgtShape=r.nodeShapes[t.getNodeShape(d)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var E=0;E<s.eles.length;E++){var w=s.eles[E],x=w[0]._private.rscratch,T=w.pstyle("curve-style").value,R="unbundled-bezier"===T||"segments"===T||"taxi"===T,A=!g.same(w.source());if(!s.calculatedIntersection&&g!==d&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var j=v.intersectLine(h.x,h.y,y,m,f.x,f.y,0),C=s.srcIntn=j,P=S.intersectLine(f.x,f.y,b,_,h.x,h.y,0),I=s.tgtIntn=P,M=s.intersectionPts={x1:j[0],x2:P[0],y1:j[1],y2:P[1]},O=s.posPts={x1:h.x,x2:f.x,y1:h.y,y2:f.y},B=P[1]-j[1],N=P[0]-j[0],k=Math.sqrt(N*N+B*B),D=s.vector={x:N,y:B},q=s.vectorNorm={x:D.x/k,y:D.y/k},$={x:-q.y,y:q.x};s.nodesOverlap=!number$1(k)||S.checkPoint(j[0],j[1],0,b,_,f.x,f.y)||v.checkPoint(P[0],P[1],0,y,m,h.x,h.y),s.vectorNormInverse=$,l={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:f,tgtPos:h,srcW:b,srcH:_,tgtW:y,tgtH:m,srcIntn:I,tgtIntn:C,srcShape:S,tgtShape:v,posPts:{x1:O.x2,y1:O.y2,x2:O.x1,y2:O.y1},intersectionPts:{x1:M.x2,y1:M.y2,x2:M.x1,y2:M.y1},vector:{x:-D.x,y:-D.y},vectorNorm:{x:-q.x,y:-q.y},vectorNormInverse:{x:-$.x,y:-$.y}}}var F=A?l:s;x.nodesOverlap=F.nodesOverlap,x.srcIntn=F.srcIntn,x.tgtIntn=F.tgtIntn,n&&(g.isParent()||g.isChild()||d.isParent()||d.isChild())&&(g.parents().anySame(d)||d.parents().anySame(g)||g.same(d)&&g.isParent())?t.findCompoundLoopPoints(w,F,E,R):g===d?t.findLoopPoints(w,F,E,R):"segments"===T?t.findSegmentsPoints(w,F):"taxi"===T?t.findTaxiPoints(w,F):"straight"===T||!R&&s.eles.length%2==1&&E===Math.floor(s.eles.length/2)?t.findStraightEdgePoints(w):t.findBezierPoints(w,F,E,R,A),t.findEndpoints(w),t.tryToCorrectInvalidPoints(w,F),t.checkForInvalidEdgeWarning(w),t.storeAllpts(w),t.storeEdgeProjections(w),t.calculateArrowAngles(w),t.recalculateEdgeLabelProjections(w),t.calculateLabelAngles(w)}},b=0;b<i.length;b++)m(b);this.findHaystackPoints(a)}},BRp$c.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),getPts(t.segpts)},BRp$c.getControlPoints=function(e){var t=e[0]._private.rscratch,r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return this.recalculateRenderedStyle(e),getPts(t.ctrlpts)},BRp$c.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var BRp$b={manualEndptToPx:function(e,t){var r=e.position(),n=e.outerWidth(),o=e.outerHeight();if(2===t.value.length){var i=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(i[0]=i[0]*n),"%"===t.units[1]&&(i[1]=i[1]*o),i[0]+=r.x,i[1]+=r.y,i}var a=t.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(n,o),l=[r.x+Math.cos(a)*s,r.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,n,o,l[0],l[1],0)},findEndpoints:function(e){var t,r,n,o,i,a=this,s=e.source()[0],l=e.target()[0],u=s.position(),c=l.position(),g=e.pstyle("target-arrow-shape").value,d=e.pstyle("source-arrow-shape").value,p=e.pstyle("target-distance-from-node").pfValue,h=e.pstyle("source-distance-from-node").pfValue,f=e.pstyle("curve-style").value,y=e._private.rscratch,m=y.edgeType,b="self"===m||"compound"===m,_="bezier"===m||"multibezier"===m||b,v="bezier"!==m,S="straight"===m||"segments"===m,E="segments"===m,w=_||v||S,x=b||"taxi"===f,T=e.pstyle("source-endpoint"),R=x?"outside-to-node":T.value,A=e.pstyle("target-endpoint"),j=x?"outside-to-node":A.value;if(y.srcManEndpt=T,y.tgtManEndpt=A,_){var C=[y.ctrlpts[0],y.ctrlpts[1]];r=v?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:C,n=C}else if(S){var P=E?y.segpts.slice(0,2):[c.x,c.y];r=E?y.segpts.slice(y.segpts.length-2):[u.x,u.y],n=P}if("inside-to-node"===j)t=[c.x,c.y];else if(A.units)t=this.manualEndptToPx(l,A);else if("outside-to-line"===j)t=y.tgtIntn;else if("outside-to-node"===j||"outside-to-node-or-label"===j?o=r:"outside-to-line"!==j&&"outside-to-line-or-label"!==j||(o=[u.x,u.y]),t=a.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===j||"outside-to-line-or-label"===j){var I=l._private.rscratch,M=I.labelWidth,O=I.labelHeight,B=I.labelX,N=I.labelY,k=M/2,D=O/2,q=l.pstyle("text-valign").value;"top"===q?N-=D:"bottom"===q&&(N+=D);var $=l.pstyle("text-halign").value;"left"===$?B-=k:"right"===$&&(B+=k);var F=polygonIntersectLine(o[0],o[1],[B-k,N-D,B+k,N-D,B+k,N+D,B-k,N+D],c.x,c.y);if(F.length>0){var L=u,U=sqdist(L,array2point(t)),W=sqdist(L,array2point(F)),z=U;if(W<U&&(t=F,z=W),F.length>2)sqdist(L,{x:F[2],y:F[3]})<z&&(t=[F[2],F[3]])}}var V=shortenIntersection(t,r,a.arrowShapes[g].spacing(e)+p),H=shortenIntersection(t,r,a.arrowShapes[g].gap(e)+p);if(y.endX=H[0],y.endY=H[1],y.arrowEndX=V[0],y.arrowEndY=V[1],"inside-to-node"===R)t=[u.x,u.y];else if(T.units)t=this.manualEndptToPx(s,T);else if("outside-to-line"===R)t=y.srcIntn;else if("outside-to-node"===R||"outside-to-node-or-label"===R?i=n:"outside-to-line"!==R&&"outside-to-line-or-label"!==R||(i=[c.x,c.y]),t=a.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===R||"outside-to-line-or-label"===R){var G=s._private.rscratch,K=G.labelWidth,Y=G.labelHeight,X=G.labelX,Z=G.labelY,Q=K/2,J=Y/2,ee=s.pstyle("text-valign").value;"top"===ee?Z-=J:"bottom"===ee&&(Z+=J);var te=s.pstyle("text-halign").value;"left"===te?X-=Q:"right"===te&&(X+=Q);var re=polygonIntersectLine(i[0],i[1],[X-Q,Z-J,X+Q,Z-J,X+Q,Z+J,X-Q,Z+J],u.x,u.y);if(re.length>0){var ne=c,oe=sqdist(ne,array2point(t)),ie=sqdist(ne,array2point(re)),ae=oe;if(ie<oe&&(t=[re[0],re[1]],ae=ie),re.length>2)sqdist(ne,{x:re[2],y:re[3]})<ae&&(t=[re[2],re[3]])}}var se=shortenIntersection(t,n,a.arrowShapes[d].spacing(e)+h),le=shortenIntersection(t,n,a.arrowShapes[d].gap(e)+h);y.startX=le[0],y.startY=le[1],y.arrowStartX=se[0],y.arrowStartY=se[1],w&&(number$1(y.startX)&&number$1(y.startY)&&number$1(y.endX)&&number$1(y.endY)?y.badLine=!1:y.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},BRp$a={};function pushBezierPts(e,t,r){for(var n=function(e,t,r,n){return qbezierAt(e,t,r,n)},o=t._private.rstyle.bezierPts,i=0;i<e.bezierProjPcts.length;i++){var a=e.bezierProjPcts[i];o.push({x:n(r[0],r[2],r[4],a),y:n(r[1],r[3],r[5],a)})}}BRp$a.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,n=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){t.rstyle.bezierPts=[];for(var o=0;o+5<r.allpts.length;o+=4)pushBezierPts(this,e,r.allpts.slice(o,o+6))}else if("segments"===n){var i=t.rstyle.linePts=[];for(o=0;o+1<r.allpts.length;o+=2)i.push({x:r.allpts[o],y:r.allpts[o+1]})}else if("haystack"===n){var a=r.haystackPts;t.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},BRp$a.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var BRp$9={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!emptyString(t)){var r,n,o=e._private,i=e.width(),a=e.height(),s=e.padding(),l=e.position(),u=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,g=o.rscratch,d=o.rstyle;switch(u){case"left":r=l.x-i/2-s;break;case"right":r=l.x+i/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-a/2-s;break;case"bottom":n=l.y+a/2+s;break;default:n=l.y}g.labelX=r,g.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},lineAngleFromDelta=function(e,t){var r=Math.atan(t/e);return 0===e&&r<0&&(r*=-1),r},lineAngle=function(e,t){var r=t.x-e.x,n=t.y-e.y;return lineAngleFromDelta(r,n)},bezierAngle=function(e,t,r,n){var o=bound(0,n-.001,1),i=bound(0,n+.001,1),a=qbezierPtAt(e,t,r,o),s=qbezierPtAt(e,t,r,i);return lineAngle(a,s)};BRp$9.recalculateEdgeLabelProjections=function(e){var t,r=e._private,n=r.rscratch,o=this,i={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(i.mid||i.source||i.target){t={x:n.midX,y:n.midY};var a=function(e,t,n){setPrefixedProperty(r.rscratch,e,t,n),setPrefixedProperty(r.rstyle,e,t,n)};a("labelX",null,t.x),a("labelY",null,t.y);var s=lineAngleFromDelta(n.midDispX,n.midDispY);a("labelAutoAngle",null,s);var l=function e(){if(e.cache)return e.cache;for(var t=[],i=0;i+5<n.allpts.length;i+=4){var a={x:n.allpts[i],y:n.allpts[i+1]},s={x:n.allpts[i+2],y:n.allpts[i+3]},l={x:n.allpts[i+4],y:n.allpts[i+5]};t.push({p0:a,p1:s,p2:l,startDist:0,length:0,segments:[]})}var u=r.rstyle.bezierPts,c=o.bezierProjPcts.length;function g(e,t,r,n,o){var i=dist(t,r),a=e.segments[e.segments.length-1],s={p0:t,p1:r,t0:n,t1:o,startDist:a?a.startDist+a.length:0,length:i};e.segments.push(s),e.length+=i}for(var d=0;d<t.length;d++){var p=t[d],h=t[d-1];h&&(p.startDist=h.startDist+h.length),g(p,p.p0,u[d*c],0,o.bezierProjPcts[0]);for(var f=0;f<c-1;f++)g(p,u[d*c+f],u[d*c+f+1],o.bezierProjPcts[f],o.bezierProjPcts[f+1]);g(p,u[d*c+c-1],p.p2,o.bezierProjPcts[c-1],1)}return e.cache=t},u=function(r){var o,s="source"===r;if(i[r]){var u=e.pstyle(r+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,g=l(),d=0,p=0,h=0;h<g.length;h++){for(var f=g[s?h:g.length-1-h],y=0;y<f.segments.length;y++){var m=f.segments[s?y:f.segments.length-1-y],b=h===g.length-1&&y===f.segments.length-1;if(d=p,(p+=m.length)>=u||b){c={cp:f,segment:m};break}}if(c)break}var _=c.cp,v=c.segment,S=(u-d)/v.length,E=v.t1-v.t0,w=s?v.t0+E*S:v.t1-E*S;w=bound(0,w,1),t=qbezierPtAt(_.p0,_.p1,_.p2,w),o=bezierAngle(_.p0,_.p1,_.p2,w);break;case"straight":case"segments":case"haystack":for(var x,T,R,A,j=0,C=n.allpts.length,P=0;P+3<C&&(s?(R={x:n.allpts[P],y:n.allpts[P+1]},A={x:n.allpts[P+2],y:n.allpts[P+3]}):(R={x:n.allpts[C-2-P],y:n.allpts[C-1-P]},A={x:n.allpts[C-4-P],y:n.allpts[C-3-P]}),T=j,!((j+=x=dist(R,A))>=u));P+=2);var I=(u-T)/x;I=bound(0,I,1),t=lineAt(R,A,I),o=lineAngle(R,A)}a("labelX",r,t.x),a("labelY",r,t.y),a("labelAutoAngle",r,o)}};u("source"),u("target"),this.applyLabelDimensions(e)}},BRp$9.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},BRp$9.applyPrefixedLabelDimensions=function(e,t){var r=e._private,n=this.getLabelText(e,t),o=this.calculateLabelDimensions(e,n),i=e.pstyle("line-height").pfValue,a=e.pstyle("text-wrap").strValue,s=getPrefixedProperty(r.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==a?1:Math.max(s.length,1),u=o.height/l,c=u*i,g=o.width,d=o.height+(l-1)*(i-1)*u;setPrefixedProperty(r.rstyle,"labelWidth",t,g),setPrefixedProperty(r.rscratch,"labelWidth",t,g),setPrefixedProperty(r.rstyle,"labelHeight",t,d),setPrefixedProperty(r.rscratch,"labelHeight",t,d),setPrefixedProperty(r.rscratch,"labelLineHeight",t,c)},BRp$9.getLabelText=function(e,t){var r=e._private,n=t?t+"-":"",o=e.pstyle(n+"label").strValue,i=e.pstyle("text-transform").value,a=function(e,n){return n?(setPrefixedProperty(r.rscratch,e,t,n),n):getPrefixedProperty(r.rscratch,e,t)};if(!o)return"";"none"==i||("uppercase"==i?o=o.toUpperCase():"lowercase"==i&&(o=o.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var l=a("labelKey");if(null!=l&&a("labelWrapKey")===l)return a("labelWrapCachedText");for(var u=o.split("\n"),c=e.pstyle("text-max-width").pfValue,g="anywhere"===e.pstyle("text-overflow-wrap").value,d=[],p=/[\s\u200b]+/,h=g?"":" ",f=0;f<u.length;f++){var y=u[f],m=this.calculateLabelDimensions(e,y).width;if(g){var b=y.split("").join("​");y=b}if(m>c){for(var _=y.split(p),v="",S=0;S<_.length;S++){var E=_[S],w=0===v.length?E:v+h+E;this.calculateLabelDimensions(e,w).width<=c?v+=E+h:(v&&d.push(v),v=E+h)}v.match(/^[\s\u200b]+$/)||d.push(v)}else d.push(y)}a("labelWrapCachedLines",d),o=a("labelWrapCachedText",d.join("\n")),a("labelWrapKey",l)}else if("ellipsis"===s){var x=e.pstyle("text-max-width").pfValue,T="",R=!1;if(this.calculateLabelDimensions(e,o).width<x)return o;for(var A=0;A<o.length;A++){if(this.calculateLabelDimensions(e,T+o[A]+"…").width>x)break;T+=o[A],A===o.length-1&&(R=!0)}return R||(T+="…"),T}return o},BRp$9.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},BRp$9.calculateLabelDimensions=function(e,t){var r=hashString(t,e._private.labelDimsKey),n=this.labelDimCache||(this.labelDimCache=[]),o=n[r];if(null!=o)return o;var i=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue,s=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,u=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=document.createElement("canvas"),c=this.labelCalcCanvasContext=u.getContext("2d");var g=u.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}c.font="".concat(i," ").concat(l," ").concat(a,"px ").concat(s);for(var d=0,p=0,h=t.split("\n"),f=0;f<h.length;f++){var y=h[f],m=c.measureText(y),b=Math.ceil(m.width),_=a;d=Math.max(b,d),p+=_}return d+=0,p+=0,n[r]={width:d,height:p}},BRp$9.calculateLabelAngle=function(e,t){var r=e._private.rscratch,n=e.isEdge(),o=t?t+"-":"",i=e.pstyle(o+"text-rotation"),a=i.strValue;return"none"===a?0:n&&"autorotate"===a?r.labelAutoAngle:"autorotate"===a?0:i.pfValue},BRp$9.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),n=e._private.rscratch;n.labelAngle=t.calculateLabelAngle(e),r&&(n.sourceLabelAngle=t.calculateLabelAngle(e,"source"),n.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var BRp$8={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$8.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<TOO_SMALL_CUT_RECT||e.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var r=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return t};var BRp$7={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,n=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),r)for(var n=0;n<e.length;n++){var o=e[n]._private.rstyle;o.clean=!1,o.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",(function(e){var t=e.target;n(t)})).on("style.* background.*",(function(e){var t=e.target;n(t,!1)}));var o=function(o){if(o){var i=r.onUpdateEleCalcsFns;t.cleanStyle();for(var a=0;a<t.length;a++){var s=t[a],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(n(s.connectedEdges()),l.cleanConnected=!0)}if(i)for(var u=0;u<i.length;u++){(0,i[u])(o,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){o(!0)},r.beforeRender(o,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=function(e){return e._private.rstyle.cleanConnected},n=[],o=[];if(!this.destroyed){void 0===t&&(t=!0);for(var i=0;i<e.length;i++){var a=e[i],s=a._private,l=s.rstyle;!a.isEdge()||r(a.source())&&r(a.target())||(l.clean=!1),t&&l.clean||a.removed()||"none"!==a.pstyle("display").value&&("nodes"===s.group?o.push(a):n.push(a),l.clean=!0)}for(var u=0;u<o.length;u++){var c=o[u],g=c._private.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),g.nodeX=d.x,g.nodeY=d.y,g.nodeW=c.pstyle("width").pfValue,g.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var h=n[p]._private,f=h.rstyle,y=h.rscratch;f.srcX=y.arrowStartX,f.srcY=y.arrowStartY,f.tgtX=y.arrowEndX,f.tgtY=y.arrowEndY,f.midX=y.midX,f.midY=y.midY,f.labelAngle=y.labelAngle,f.sourceLabelAngle=y.sourceLabelAngle,f.targetLabelAngle=y.targetLabelAngle}}}},BRp$6={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var n=(o=e[r])._private.rscratch;o.grabbed()&&!o.isParent()?t.push(o):n.inDragLayer?e.drag.push(o):e.nondrag.push(o)}for(r=0;r<t.length;r++){var o=t[r];e.drag.push(o)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(zIndexSort),t.interactive=t.filter((function(e){return e.interactive()})),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},BRp$5={};[BRp$e,BRp$d,BRp$c,BRp$b,BRp$a,BRp$9,BRp$8,BRp$7,BRp$6].forEach((function(e){extend(BRp$5,e)}));var BRp$4={getCachedImage:function(e,t,r){var n=this.imageCache=this.imageCache||{},o=n[e];if(o)return o.image.complete||o.image.addEventListener("load",r),o.image;var i=(o=n[e]=n[e]||{}).image=new Image;i.addEventListener("load",r),i.addEventListener("error",(function(){i.error=!0}));var a="data:";return e.substring(0,a.length).toLowerCase()===a||(t="null"===t?null:t,i.crossOrigin=t),i.src=e,i}},BRp$3={registerBinding:function(e,t,r,n){var o=Array.prototype.slice.apply(arguments,[1]),i=this.binder(e);return i.on.apply(i,o)},binder:function(e){var t=this,r=e===window||e===document||e===document.body||domElement(e);if(null==t.supportsPassiveEvents){var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,o)}catch(e){}t.supportsPassiveEvents=n}var i=function(n,o,i){var a=Array.prototype.slice.call(arguments);return r&&t.supportsPassiveEvents&&(a[2]={capture:null!=i&&i,passive:!1,once:!1}),t.bindings.push({target:e,args:a}),(e.addEventListener||e.on).apply(e,a),this};return{on:i,addEventListener:i,addListener:i,bind:i}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()}};BRp$3.load=function(){var e=this,t=function(e){return e.selected()},r=function(t,r,n,o){null==t&&(t=e.cy);for(var i=0;i<r.length;i++){var a=r[i];t.emit({originalEvent:n,type:a,position:o})}},n=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},o=function(t,r){var n=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var o=0;r&&o<r.length;o++){if((t=r[o]).isNode()&&t.isParent()&&!t.pannable()){n=!1;break}}else n=!0;return n},i=function(e){e[0]._private.rscratch.inDragLayer=!0},a=function(e){e[0]._private.rscratch.isGrabTarget=!0},s=function(e,t){var r=t.addToList;r.has(e)||!e.grabbable()||e.locked()||(r.merge(e),function(e){e[0]._private.grabbed=!0}(e))},l=function(t,r){r=r||{};var n=t.cy().hasCompoundNodes();r.inDragLayer&&(t.forEach(i),t.neighborhood().stdFilter((function(e){return!n||e.isEdge()})).forEach(i)),r.addToList&&t.forEach((function(e){s(e,r)})),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var r=e.descendants();t.inDragLayer&&(r.forEach(i),r.connectedEdges().forEach(i)),t.addToList&&s(r,t)}}(t,r),g(t,{inDragLayer:r.inDragLayer}),e.updateCachedGrabbedEles()},u=l,c=function(t){t&&(e.getCachedZSortedEles().forEach((function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)})),e.updateCachedGrabbedEles())},g=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var r=e.ancestors().orphans();if(!r.same(e)){var n=r.descendants().spawnSelf().merge(r).unmerge(e).unmerge(e.descendants()),o=n.connectedEdges();t.inDragLayer&&(o.forEach(i),n.forEach(i)),t.addToList&&n.forEach((function(e){s(e,t)}))}}},d=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},p="undefined"!=typeof MutationObserver,h="undefined"!=typeof ResizeObserver;p?(e.removeObserver=new MutationObserver((function(t){for(var r=0;r<t.length;r++){var n=t[r].removedNodes;if(n)for(var o=0;o<n.length;o++){if(n[o]===e.container){e.destroy();break}}}})),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",(function(t){e.destroy()}));var f=debounce__default.default((function(){e.cy.resize()}),100);p&&(e.styleObserver=new MutationObserver(f),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",f),h&&(e.resizeObserver=new ResizeObserver(f),e.resizeObserver.observe(e.container));var y=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,(function(t){e.registerBinding(t,"transitionend",y),e.registerBinding(t,"animationend",y),e.registerBinding(t,"scroll",y)})),e.registerBinding(e.container,"contextmenu",(function(e){e.preventDefault()}));var m,b,_,v=function(t){for(var r=e.findContainerClientCoords(),n=r[0],o=r[1],i=r[2],a=r[3],s=t.touches?t.touches:[t],l=!1,u=0;u<s.length;u++){var c=s[u];if(n<=c.clientX&&c.clientX<=n+i&&o<=c.clientY&&c.clientY<=o+a){l=!0;break}}if(!l)return!1;for(var g=e.container,d=t.target.parentNode,p=!1;d;){if(d===g){p=!0;break}d=d.parentNode}return!!p};e.registerBinding(e.container,"mousedown",(function(t){if(v(t)){t.preventDefault(),d(),e.hoverData.capture=!0,e.hoverData.which=t.which;var n=e.cy,o=[t.clientX,t.clientY],i=e.projectIntoViewport(o[0],o[1]),s=e.selection,c=e.findNearestElements(i[0],i[1],!0,!1),g=c[0],p=e.dragData.possibleDragElements;e.hoverData.mdownPos=i,e.hoverData.mdownGPos=o;if(3==t.which){e.hoverData.cxtStarted=!0;var h={originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}};g?(g.activate(),g.emit(h),e.hoverData.down=g):n.emit(h),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(g&&g.activate(),null!=g&&e.nodeIsGrabbable(g)){var f=function(e){return{originalEvent:t,type:e,position:{x:i[0],y:i[1]}}};if(a(g),g.selected()){p=e.dragData.possibleDragElements=n.collection();var y=n.$((function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)}));l(y,{addToList:p}),g.emit(f("grabon")),y.forEach((function(e){e.emit(f("grab"))}))}else p=e.dragData.possibleDragElements=n.collection(),u(g,{addToList:p}),g.emit(f("grabon")).emit(f("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=g,e.hoverData.downs=c,e.hoverData.downTime=(new Date).getTime(),r(g,["mousedown","tapstart","vmousedown"],t,{x:i[0],y:i[1]}),null==g?(s[4]=1,e.data.bgActivePosistion={x:i[0],y:i[1]},e.redrawHint("select",!0),e.redraw()):g.pannable()&&(s[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout((function(){if(!e.hoverData.tapholdCancelled){var r=e.hoverData.down;r?r.emit({originalEvent:t,type:"taphold",position:{x:i[0],y:i[1]}}):n.emit({originalEvent:t,type:"taphold",position:{x:i[0],y:i[1]}})}}),e.tapholdDuration)}s[0]=s[2]=i[0],s[1]=s[3]=i[1]}}),!1),e.registerBinding(window,"mousemove",(function(t){if(e.hoverData.capture||v(t)){var i=!1,a=e.cy,s=a.zoom(),u=[t.clientX,t.clientY],g=e.projectIntoViewport(u[0],u[1]),d=e.hoverData.mdownPos,p=e.hoverData.mdownGPos,h=e.selection,f=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(f=e.findNearestElement(g[0],g[1],!0,!1));var y,m=e.hoverData.last,b=e.hoverData.down,_=[g[0]-h[2],g[1]-h[3]],S=e.dragData.possibleDragElements;if(p){var E=u[0]-p[0],w=E*E,x=u[1]-p[1],T=w+x*x;e.hoverData.isOverThresholdDrag=y=T>=e.desktopTapThreshold2}var R=n(t);y&&(e.hoverData.tapholdCancelled=!0);i=!0,r(f,["mousemove","vmousemove","tapdrag"],t,{x:g[0],y:g[1]});var A=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||a.emit({originalEvent:t,type:"boxstart",position:{x:g[0],y:g[1]}}),h[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(y){var j={originalEvent:t,type:"cxtdrag",position:{x:g[0],y:g[1]}};b?b.emit(j):a.emit(j),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&f===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:g[0],y:g[1]}}),e.hoverData.cxtOver=f,f&&f.emit({originalEvent:t,type:"cxtdragover",position:{x:g[0],y:g[1]}}))}}else if(e.hoverData.dragging){if(i=!0,a.panningEnabled()&&a.userPanningEnabled()){var C;if(e.hoverData.justStartedPan){var P=e.hoverData.mdownPos;C={x:(g[0]-P[0])*s,y:(g[1]-P[1])*s},e.hoverData.justStartedPan=!1}else C={x:_[0]*s,y:_[1]*s};a.panBy(C),a.emit("dragpan"),e.hoverData.dragged=!0}g=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=h[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||f==m||(m&&r(m,["mouseout","tapdragout"],t,{x:g[0],y:g[1]}),f&&r(f,["mouseover","tapdragover"],t,{x:g[0],y:g[1]}),e.hoverData.last=f),b)if(y){if(a.boxSelectionEnabled()&&R)b&&b.grabbed()&&(c(S),b.emit("freeon"),S.emit("free"),e.dragData.didDrag&&(b.emit("dragfreeon"),S.emit("dragfree"))),A();else if(b&&b.grabbed()&&e.nodeIsDraggable(b)){var I=!e.dragData.didDrag;I&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||l(S,{inDragLayer:!0});var M={x:0,y:0};if(number$1(_[0])&&number$1(_[1])&&(M.x+=_[0],M.y+=_[1],I)){var O=e.hoverData.dragDelta;O&&number$1(O[0])&&number$1(O[1])&&(M.x+=O[0],M.y+=O[1])}e.hoverData.draggingEles=!0,S.silentShift(M).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else!function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(_[0]),t.push(_[1])):(t[0]+=_[0],t[1]+=_[1])}();i=!0}else if(y){if(e.hoverData.dragging||!a.boxSelectionEnabled()||!R&&a.panningEnabled()&&a.userPanningEnabled()){if(!e.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()){o(b,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,h[4]=0,e.data.bgActivePosistion=array2point(d),e.redrawHint("select",!0),e.redraw())}}else A();b&&b.pannable()&&b.active()&&b.unactivate()}return h[2]=g[0],h[3]=g[1],i?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}}),!1),e.registerBinding(window,"mouseup",(function(o){if(e.hoverData.capture){e.hoverData.capture=!1;var i=e.cy,a=e.projectIntoViewport(o.clientX,o.clientY),s=e.selection,l=e.findNearestElement(a[0],a[1],!0,!1),u=e.dragData.possibleDragElements,g=e.hoverData.down,d=n(o);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,g&&g.unactivate(),3===e.hoverData.which){var p={originalEvent:o,type:"cxttapend",position:{x:a[0],y:a[1]}};if(g?g.emit(p):i.emit(p),!e.hoverData.cxtDragged){var h={originalEvent:o,type:"cxttap",position:{x:a[0],y:a[1]}};g?g.emit(h):i.emit(h)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(r(l,["mouseup","tapend","vmouseup"],o,{x:a[0],y:a[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||(r(g,["click","tap","vclick"],o,{x:a[0],y:a[1]}),b=!1,o.timeStamp-_<=i.multiClickDebounceTime()?(m&&clearTimeout(m),b=!0,_=null,r(g,["dblclick","dbltap","vdblclick"],o,{x:a[0],y:a[1]})):(m=setTimeout((function(){b||r(g,["oneclick","onetap","voneclick"],o,{x:a[0],y:a[1]})}),i.multiClickDebounceTime()),_=o.timeStamp)),null!=g||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||n(o)||(i.$(t).unselect(["tapunselect"]),u.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=u=i.collection()),l!=g||e.dragData.didDrag||e.hoverData.selecting||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===i.selectionType()||d?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):d||(i.$(t).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var f=i.collection(e.getAllInBox(s[0],s[1],s[2],s[3]));e.redrawHint("select",!0),f.length>0&&e.redrawHint("eles",!0),i.emit({type:"boxend",originalEvent:o,position:{x:a[0],y:a[1]}});var y=function(e){return e.selectable()&&!e.selected()};"additive"===i.selectionType()||d||i.$(t).unmerge(f).unselect(),f.emit("box").stdFilter(y).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!s[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var v=g&&g.grabbed();c(u),v&&(g.emit("freeon"),u.emit("free"),e.dragData.didDrag&&(g.emit("dragfreeon"),u.emit("dragfree")))}}s[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}}),!1);var S,E,w,x,T,R,A,j,C,P,I,M,O,B=function(t){if(!e.scrollingPage){var r=e.cy,n=r.zoom(),o=r.pan(),i=e.projectIntoViewport(t.clientX,t.clientY),a=[i[0]*n+o.x,i[1]*n+o.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])t.preventDefault();else if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){var s;t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout((function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()}),150),s=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,s*=e.wheelSensitivity,1===t.deltaMode&&(s*=33);var l=r.zoom()*Math.pow(10,s);"gesturechange"===t.type&&(l=e.gestureStartZoom*t.scale),r.zoom({level:l,renderedPosition:{x:a[0],y:a[1]}}),r.emit("gesturechange"===t.type?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",B,!0),e.registerBinding(window,"scroll",(function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout((function(){e.scrollingPage=!1}),250)}),!0),e.registerBinding(e.container,"gesturestart",(function(t){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||t.preventDefault()}),!0),e.registerBinding(e.container,"gesturechange",(function(t){e.hasTouchStarted||B(t)}),!0),e.registerBinding(e.container,"mouseout",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:r[0],y:r[1]}})}),!1),e.registerBinding(e.container,"mouseover",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:r[0],y:r[1]}})}),!1);var N,k,D,q,$,F,L,U=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},W=function(e,t,r,n){return(r-e)*(r-e)+(n-t)*(n-t)};if(e.registerBinding(e.container,"touchstart",N=function(t){if(e.hasTouchStarted=!0,v(t)){d(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var n=e.cy,o=e.touchData.now,i=e.touchData.earlier;if(t.touches[0]){var s=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=s[0],o[1]=s[1]}if(t.touches[1]){s=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);o[2]=s[0],o[3]=s[1]}if(t.touches[2]){s=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);o[4]=s[0],o[5]=s[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,c(e.dragData.touchDragEles);var g=e.findContainerClientCoords();C=g[0],P=g[1],I=g[2],M=g[3],S=t.touches[0].clientX-C,E=t.touches[0].clientY-P,w=t.touches[1].clientX-C,x=t.touches[1].clientY-P,O=0<=S&&S<=I&&0<=w&&w<=I&&0<=E&&E<=M&&0<=x&&x<=M;var p=n.pan(),h=n.zoom();T=U(S,E,w,x),R=W(S,E,w,x),j=[((A=[(S+w)/2,(E+x)/2])[0]-p.x)/h,(A[1]-p.y)/h];if(R<4e4&&!t.touches[2]){var f=e.findNearestElement(o[0],o[1],!0,!0),y=e.findNearestElement(o[2],o[3],!0,!0);return f&&f.isNode()?(f.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}}),e.touchData.start=f):y&&y.isNode()?(y.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}}),e.touchData.start=y):n.emit({originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])n.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var m=e.findNearestElements(o[0],o[1],!0,!0),b=m[0];if(null!=b&&(b.activate(),e.touchData.start=b,e.touchData.starts=m,e.nodeIsGrabbable(b))){var _=e.dragData.touchDragEles=n.collection(),B=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),b.selected()?(B=n.$((function(t){return t.selected()&&e.nodeIsGrabbable(t)})),l(B,{addToList:_})):u(b,{addToList:_}),a(b);var N=function(e){return{originalEvent:t,type:e,position:{x:o[0],y:o[1]}}};b.emit(N("grabon")),B?B.forEach((function(e){e.emit(N("grab"))})):b.emit(N("grab"))}r(b,["touchstart","tapstart","vmousedown"],t,{x:o[0],y:o[1]}),null==b&&(e.data.bgActivePosistion={x:s[0],y:s[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout((function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||r(e.touchData.start,["taphold"],t,{x:o[0],y:o[1]})}),e.tapholdDuration)}if(t.touches.length>=1){for(var k=e.touchData.startPosition=[],D=0;D<o.length;D++)k[D]=i[D]=o[D];var q=t.touches[0];e.touchData.startGPosition=[q.clientX,q.clientY]}}},!1),e.registerBinding(window,"touchmove",k=function(t){var n=e.touchData.capture;if(n||v(t)){var i=e.selection,a=e.cy,s=e.touchData.now,u=e.touchData.earlier,g=a.zoom();if(t.touches[0]){var d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=d[0],s[5]=d[1]}var p,h=e.touchData.startGPosition;if(n&&t.touches[0]&&h){for(var f=[],y=0;y<s.length;y++)f[y]=s[y]-u[y];var m=t.touches[0].clientX-h[0],b=m*m,_=t.touches[0].clientY-h[1];p=b+_*_>=e.touchTapThreshold2}if(n&&e.touchData.cxt){t.preventDefault();var A=t.touches[0].clientX-C,I=t.touches[0].clientY-P,M=t.touches[1].clientX-C,B=t.touches[1].clientY-P,N=W(A,I,M,B);if(N/R>=2.25||N>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var k={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(k),e.touchData.start=null):a.emit(k)}}if(n&&e.touchData.cxt){k={originalEvent:t,type:"cxtdrag",position:{x:s[0],y:s[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(k):a.emit(k),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var D=e.findNearestElement(s[0],s[1],!0,!0);e.touchData.cxtOver&&D===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:s[0],y:s[1]}}),e.touchData.cxtOver=D,D&&D.emit({originalEvent:t,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(n&&t.touches[2]&&a.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||a.emit({originalEvent:t,type:"boxstart",position:{x:s[0],y:s[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(s[0]+s[2]+s[4])/3,i[3]=(s[1]+s[3]+s[5])/3):(i[0]=(s[0]+s[2]+s[4])/3,i[1]=(s[1]+s[3]+s[5])/3,i[2]=(s[0]+s[2]+s[4])/3+1,i[3]=(s[1]+s[3]+s[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(n&&t.touches[1]&&!e.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),J=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var q=0;q<J.length;q++){var $=J[q]._private;$.grabbed=!1,$.rscratch.inDragLayer=!1}}var F=e.touchData.start,L=(A=t.touches[0].clientX-C,I=t.touches[0].clientY-P,M=t.touches[1].clientX-C,B=t.touches[1].clientY-P,U(A,I,M,B)),z=L/T;if(O){var V=(A-S+(M-w))/2,H=(I-E+(B-x))/2,G=a.zoom(),K=G*z,Y=a.pan(),X=j[0]*G+Y.x,Z=j[1]*G+Y.y,Q={x:-K/G*(X-Y.x-V)+X,y:-K/G*(Z-Y.y-H)+Z};if(F&&F.active()){var J=e.dragData.touchDragEles;c(J),e.redrawHint("drag",!0),e.redrawHint("eles",!0),F.unactivate().emit("freeon"),J.emit("free"),e.dragData.didDrag&&(F.emit("dragfreeon"),J.emit("dragfree"))}a.viewport({zoom:K,pan:Q,cancelOnFailedZoom:!0}),a.emit("pinchzoom"),T=L,S=A,E=I,w=M,x=B,e.pinching=!0}if(t.touches[0]){d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=d[0],s[5]=d[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var ee=e.touchData.start,te=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(D=e.findNearestElement(s[0],s[1],!0,!0)),n&&null!=ee&&t.preventDefault(),n&&null!=ee&&e.nodeIsDraggable(ee))if(p){J=e.dragData.touchDragEles;var re=!e.dragData.didDrag;re&&l(J,{inDragLayer:!0}),e.dragData.didDrag=!0;var ne={x:0,y:0};if(number$1(f[0])&&number$1(f[1]))if(ne.x+=f[0],ne.y+=f[1],re)e.redrawHint("eles",!0),(oe=e.touchData.dragDelta)&&number$1(oe[0])&&number$1(oe[1])&&(ne.x+=oe[0],ne.y+=oe[1]);e.hoverData.draggingEles=!0,J.silentShift(ne).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==u[0]&&e.touchData.startPosition[1]==u[1]&&e.redrawHint("eles",!0),e.redraw()}else{var oe;0===(oe=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(oe.push(f[0]),oe.push(f[1])):(oe[0]+=f[0],oe[1]+=f[1])}if(r(ee||D,["touchmove","tapdrag","vmousemove"],t,{x:s[0],y:s[1]}),ee&&ee.grabbed()||D==te||(te&&te.emit({originalEvent:t,type:"tapdragout",position:{x:s[0],y:s[1]}}),D&&D.emit({originalEvent:t,type:"tapdragover",position:{x:s[0],y:s[1]}})),e.touchData.last=D,n)for(q=0;q<s.length;q++)s[q]&&e.touchData.startPosition[q]&&p&&(e.touchData.singleTouchMoved=!0);if(n&&(null==ee||ee.pannable())&&a.panningEnabled()&&a.userPanningEnabled()){o(ee,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=array2point(e.touchData.startPosition)),e.swipePanning?(a.panBy({x:f[0]*g,y:f[1]*g}),a.emit("dragpan")):p&&(e.swipePanning=!0,a.panBy({x:m*g,y:_*g}),a.emit("dragpan"),ee&&(ee.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}}for(y=0;y<s.length;y++)u[y]=s[y];n&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(window,"touchcancel",D=function(t){var r=e.touchData.start;e.touchData.capture=!1,r&&r.unactivate()}),e.registerBinding(window,"touchend",q=function(n){var o=e.touchData.start;if(e.touchData.capture){0===n.touches.length&&(e.touchData.capture=!1),n.preventDefault();var i=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var a,s=e.cy,l=s.zoom(),u=e.touchData.now,g=e.touchData.earlier;if(n.touches[0]){var d=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=d[0],u[1]=d[1]}if(n.touches[1]){d=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=d[0],u[3]=d[1]}if(n.touches[2]){d=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=d[0],u[5]=d[1]}if(o&&o.unactivate(),e.touchData.cxt){if(a={originalEvent:n,type:"cxttapend",position:{x:u[0],y:u[1]}},o?o.emit(a):s.emit(a),!e.touchData.cxtDragged){var p={originalEvent:n,type:"cxttap",position:{x:u[0],y:u[1]}};o?o.emit(p):s.emit(p)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!n.touches[2]&&s.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var h=s.collection(e.getAllInBox(i[0],i[1],i[2],i[3]));i[0]=void 0,i[1]=void 0,i[2]=void 0,i[3]=void 0,i[4]=0,e.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:n,position:{x:u[0],y:u[1]}});h.emit("box").stdFilter((function(e){return e.selectable()&&!e.selected()})).select().emit("boxselect"),h.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=o&&o.unactivate(),n.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var f=e.dragData.touchDragEles;if(null!=o){var y=o._private.grabbed;c(f),e.redrawHint("drag",!0),e.redrawHint("eles",!0),y&&(o.emit("freeon"),f.emit("free"),e.dragData.didDrag&&(o.emit("dragfreeon"),f.emit("dragfree"))),r(o,["touchend","tapend","vmouseup","tapdragout"],n,{x:u[0],y:u[1]}),o.unactivate(),e.touchData.start=null}else{var m=e.findNearestElement(u[0],u[1],!0,!0);r(m,["touchend","tapend","vmouseup","tapdragout"],n,{x:u[0],y:u[1]})}var b=e.touchData.startPosition[0]-u[0],_=b*b,v=e.touchData.startPosition[1]-u[1],S=(_+v*v)*l*l;e.touchData.singleTouchMoved||(o||s.$(":selected").unselect(["tapunselect"]),r(o,["tap","vclick"],n,{x:u[0],y:u[1]}),$=!1,n.timeStamp-L<=s.multiClickDebounceTime()?(F&&clearTimeout(F),$=!0,L=null,r(o,["dbltap","vdblclick"],n,{x:u[0],y:u[1]})):(F=setTimeout((function(){$||r(o,["onetap","voneclick"],n,{x:u[0],y:u[1]})}),s.multiClickDebounceTime()),L=n.timeStamp)),null!=o&&!e.dragData.didDrag&&o._private.selectable&&S<e.touchTapThreshold2&&!e.pinching&&("single"===s.selectionType()?(s.$(t).unmerge(o).unselect(["tapunselect"]),o.select(["tapselect"])):o.selected()?o.unselect(["tapunselect"]):o.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var E=0;E<u.length;E++)g[E]=u[E];e.dragData.didDrag=!1,0===n.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null,e.touchData.didSelect=!1),n.touches.length<2&&(1===n.touches.length&&(e.touchData.startGPosition=[n.touches[0].clientX,n.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var z=[],V=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},H=function(e){z.push(function(e){return{event:e,touch:V(e)}}(e))},G=function(e){for(var t=0;t<z.length;t++){if(z[t].event.pointerId===e.pointerId)return void z.splice(t,1)}},K=function(e){e.touches=z.map((function(e){return e.touch}))},Y=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",(function(e){Y(e)||(e.preventDefault(),H(e),K(e),N(e))})),e.registerBinding(e.container,"pointerup",(function(e){Y(e)||(G(e),K(e),q(e))})),e.registerBinding(e.container,"pointercancel",(function(e){Y(e)||(G(e),K(e),D())})),e.registerBinding(e.container,"pointermove",(function(e){Y(e)||(e.preventDefault(),function(e){var t=z.filter((function(t){return t.event.pointerId===e.pointerId}))[0];t.event=e,t.touch=V(e)}(e),K(e),k(e))}))}};var BRp$2={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,r,n,o){this.renderer.nodeShapeImpl("polygon",e,t,r,n,o,this.points)},intersectLine:function(e,t,r,n,o,i,a){return polygonIntersectLine(o,i,this.points,e,t,r/2,n/2,a)},checkPoint:function(e,t,r,n,o,i,a){return pointInsidePolygon(e,t,this.points,i,a,n,o,[0,-1],r)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,r,n,o){this.renderer.nodeShapeImpl(this.name,e,t,r,n,o)},intersectLine:function(e,t,r,n,o,i,a){return intersectLineEllipse(o,i,e,t,r/2+a,n/2+a)},checkPoint:function(e,t,r,n,o,i,a){return checkInEllipse(e,t,n,o,i,a,r)}}},generateRoundPolygon:function(e,t){for(var r=new Array(2*t.length),n=0;n<t.length/2;n++){var o=2*n,i=void 0;i=n<t.length/2-1?2*(n+1):0,r[4*n]=t[o],r[4*n+1]=t[o+1];var a=t[i]-t[o],s=t[i+1]-t[o+1],l=Math.sqrt(a*a+s*s);r[4*n+2]=a/l,r[4*n+3]=s/l}return this.nodeShapes[e]={renderer:this,name:e,points:r,draw:function(e,t,r,n,o){this.renderer.nodeShapeImpl("round-polygon",e,t,r,n,o,this.points)},intersectLine:function(e,t,r,n,o,i,a){return roundPolygonIntersectLine(o,i,this.points,e,t,r,n)},checkPoint:function(e,t,r,n,o,i,a){return pointInsideRoundPolygon(e,t,this.points,i,a,n,o)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,o){this.renderer.nodeShapeImpl(this.name,e,t,r,n,o)},intersectLine:function(e,t,r,n,o,i,a){return roundRectangleIntersectLine(o,i,e,t,r,n,a)},checkPoint:function(e,t,r,n,o,i,a){var s=getRoundRectangleRadius(n,o),l=2*s;return!!pointInsidePolygon(e,t,this.points,i,a,n,o-l,[0,-1],r)||(!!pointInsidePolygon(e,t,this.points,i,a,n-l,o,[0,-1],r)||(!!checkInEllipse(e,t,l,l,i-n/2+s,a-o/2+s,r)||(!!checkInEllipse(e,t,l,l,i+n/2-s,a-o/2+s,r)||(!!checkInEllipse(e,t,l,l,i+n/2-s,a+o/2-s,r)||!!checkInEllipse(e,t,l,l,i-n/2+s,a+o/2-s,r)))))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,o){this.renderer.nodeShapeImpl(this.name,e,t,r,n,o)},generateCutTrianglePts:function(e,t,r,n){var o=this.cornerLength,i=t/2,a=e/2,s=r-a,l=r+a,u=n-i,c=n+i;return{topLeft:[s,u+o,s+o,u,s+o,u+o],topRight:[l-o,u,l,u+o,l-o,u+o],bottomRight:[l,c-o,l-o,c,l-o,c-o],bottomLeft:[s+o,c,s,c-o,s+o,c-o]}},intersectLine:function(e,t,r,n,o,i,a){var s=this.generateCutTrianglePts(r+2*a,n+2*a,e,t),l=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return polygonIntersectLine(o,i,l,e,t)},checkPoint:function(e,t,r,n,o,i,a){if(pointInsidePolygon(e,t,this.points,i,a,n,o-2*this.cornerLength,[0,-1],r))return!0;if(pointInsidePolygon(e,t,this.points,i,a,n-2*this.cornerLength,o,[0,-1],r))return!0;var s=this.generateCutTrianglePts(n,o,i,a);return pointInsidePolygonPoints(e,t,s.topLeft)||pointInsidePolygonPoints(e,t,s.topRight)||pointInsidePolygonPoints(e,t,s.bottomRight)||pointInsidePolygonPoints(e,t,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,o){this.renderer.nodeShapeImpl(this.name,e,t,r,n,o)},intersectLine:function(e,t,r,n,o,i,a){var s=this.generateBarrelBezierPts(r+2*a,n+2*a,e,t),l=function(e){var t=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),r=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),n=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,r.x,r.y,n.x,n.y,e[4],e[5]]},u=[].concat(l(s.topLeft),l(s.topRight),l(s.bottomRight),l(s.bottomLeft));return polygonIntersectLine(o,i,u,e,t)},generateBarrelBezierPts:function(e,t,r,n){var o=t/2,i=e/2,a=r-i,s=r+i,l=n-o,u=n+o,c=getBarrelCurveConstants(e,t),g=c.heightOffset,d=c.widthOffset,p=c.ctrlPtOffsetPct*e,h={topLeft:[a,l+g,a+p,l,a+d,l],topRight:[s-d,l,s-p,l,s,l+g],bottomRight:[s,u-g,s-p,u,s-d,u],bottomLeft:[a+d,u,a+p,u,a,u-g]};return h.topLeft.isTop=!0,h.topRight.isTop=!0,h.bottomLeft.isBottom=!0,h.bottomRight.isBottom=!0,h},checkPoint:function(e,t,r,n,o,i,a){var s=getBarrelCurveConstants(n,o),l=s.heightOffset,u=s.widthOffset;if(pointInsidePolygon(e,t,this.points,i,a,n,o-2*l,[0,-1],r))return!0;if(pointInsidePolygon(e,t,this.points,i,a,n-2*u,o,[0,-1],r))return!0;for(var c=this.generateBarrelBezierPts(n,o,i,a),g=function(e,t,r){var n=r[4],o=r[2],i=r[0],a=r[5],s=r[1],l=Math.min(n,i),u=Math.max(n,i),c=Math.min(a,s),g=Math.max(a,s);if(l<=e&&e<=u&&c<=t&&t<=g){var d=bezierPtsToQuadCoeff(n,o,i),p=solveQuadratic(d[0],d[1],d[2],e).filter((function(e){return 0<=e&&e<=1}));if(p.length>0)return p[0]}return null},d=Object.keys(c),p=0;p<d.length;p++){var h=c[d[p]],f=g(e,t,h);if(null!=f){var y=h[5],m=h[3],b=h[1],_=qbezierAt(y,m,b,f);if(h.isTop&&_<=t)return!0;if(h.isBottom&&t<=_)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,o){this.renderer.nodeShapeImpl(this.name,e,t,r,n,o)},intersectLine:function(e,t,r,n,o,i,a){var s=t-(n/2+a),l=finiteLinesIntersect(o,i,e,t,e-(r/2+a),s,e+(r/2+a),s,!1);return l.length>0?l:roundRectangleIntersectLine(o,i,e,t,r,n,a)},checkPoint:function(e,t,r,n,o,i,a){var s=getRoundRectangleRadius(n,o),l=2*s;if(pointInsidePolygon(e,t,this.points,i,a,n,o-l,[0,-1],r))return!0;if(pointInsidePolygon(e,t,this.points,i,a,n-l,o,[0,-1],r))return!0;var u=n/2+2*r,c=o/2+2*r;return!!pointInsidePolygonPoints(e,t,[i-u,a-c,i-u,a,i+u,a,i+u,a-c])||(!!checkInEllipse(e,t,l,l,i+n/2-s,a+o/2-s,r)||!!checkInEllipse(e,t,l,l,i-n/2+s,a+o/2-s,r))}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),o=generateUnitNgonPoints(5,0),i=generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<i.length/2;s++)i[2*s]*=a,i[2*s+1]*=a;for(s=0;s<5;s++)n[4*s]=o[2*s],n[4*s+1]=o[2*s+1],n[4*s+2]=i[2*s],n[4*s+3]=i[2*s+1];n=fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var r,n="polygon-"+e.join("$");return(r=this[n])?r:t.generatePolygon(n,e)}}},BRp$1={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||staticEmptyObject();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&error("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort((function(e,t){return t.priority-e.priority}))}}},beforeRenderCallbacks=function(e,t,r){for(var n=e.beforeRenderCallbacks,o=0;o<n.length;o++)n[o].fn(t,r)};BRp$1.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;requestAnimationFrame$1((function r(n){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){beforeRenderCallbacks(e,!0,n);var o=performanceNow();e.render(e.renderOptions);var i=e.lastDrawTime=performanceNow();void 0===e.averageRedrawTime&&(e.averageRedrawTime=i-o),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var a=i-o;e.redrawTotalTime+=a,e.lastRedrawTime=a,e.averageRedrawTime=e.averageRedrawTime/2+a/2,e.requestedFrame=!1}else beforeRenderCallbacks(e,!1,n);e.skipFrame=!1,requestAnimationFrame$1(r)}}))}};var BaseRenderer=function(e){this.init(e)},BR=BaseRenderer,BRp=BR.prototype;BRp.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],BRp.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container();if(window$1){var n=window$1.document,o=n.head,i="__________cytoscape_stylesheet",a="__________cytoscape_container",s=null!=n.getElementById(i);if(r.className.indexOf(a)<0&&(r.className=(r.className||"")+" "+a),!s){var l=n.createElement("style");l.id=i,l.textContent="."+a+" { position: relative; }",o.insertBefore(l,o.children[0])}"static"===window$1.getComputedStyle(r).getPropertyValue("position")&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=number$1(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},BRp.notify=function(e,t){var r=this,n=r.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&n.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r.destroy():r.load())},BRp.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],n=r.target;(n.off||n.removeEventListener).apply(n,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},BRp.isHeadless=function(){return!1},[BRp$f,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1].forEach((function(e){extend(BRp,e)}));var fullFpsTime=1e3/60,defs={setupDequeueing:function(e){return function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var n=debounce__default.default((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),e.deqRedrawThreshold),o=e.priority||noop$1;r.beforeRender((function(o,i){var a=performanceNow(),s=r.averageRedrawTime,l=r.lastRedrawTime,u=[],c=r.cy.extent(),g=r.getPixelRatio();for(o||r.flushRenderedStyleQueue();;){var d=performanceNow(),p=d-a,h=d-i;if(l<fullFpsTime){var f=fullFpsTime-(o?s:0);if(h>=e.deqFastCost*f)break}else if(o){if(p>=e.deqCost*l||p>=e.deqAvgCost*s)break}else if(h>=e.deqNoDrawCost*fullFpsTime)break;var y=e.deq(t,g,c);if(!(y.length>0))break;for(var m=0;m<y.length;m++)u.push(y[m])}u.length>0&&(e.onDeqd(t,u),!o&&e.shouldRedraw(t,u,g,c)&&n())}),o(t))}}}},ElementTextureCacheLookup=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:falsify;_classCallCheck(this,e),this.idsByKey=new Map$1,this.keyForId=new Map$1,this.cachesByLvl=new Map$1,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return _createClass(e,[{key:"getIdsFor",value:function(e){null==e&&error("Can not get id list for null key");var t=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new Set$1,t.set(e,r)),r}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t),n=this.getKey(e);this.deleteIdForKey(r,t),this.addIdForKey(n,t),this.keyForId.set(t,n)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteIdForKey(r,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,r=this.lvls,n=t.get(e);return n||(n=new Map$1,t.set(e,n),r.push(e)),n}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var r=this.getKey(e),n=this.getCache(r,t);return null!=n&&this.updateKeyMappingFor(e),n}},{key:"getForCachedKey",value:function(e,t){var r=this.keyForId.get(e.id());return this.getCache(r,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var r=this.getKey(e);return this.hasCache(r,t)}},{key:"setCache",value:function(e,t,r){r.key=e,this.getCachesAt(t).set(e,r)}},{key:"set",value:function(e,t,r){var n=this.getKey(e);this.setCache(n,t,r),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var r=this.getKey(e);this.deleteCache(r,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach((function(r){return t.deleteCache(e,r)}))}},{key:"invalidate",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteKeyMappingFor(e);var n=this.doesEleInvalidateKey(e);return n&&this.invalidateKey(r),n||0===this.getNumberOfIdsForKey(r)}}]),e}(),minTxrH=25,txrStepH=50,minLvl$1=-4,maxLvl$1=3,maxZoom$1=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,deqRedrawThreshold$1=100,maxDeqSize$1=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(e,t){var r=this;r.renderer=e,r.onDequeues=[];var n=initDefaults(t);extend(r,n),r.lookup=new ElementTextureCacheLookup(n.getKey,n.doesEleInvalidateKey),r.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons,ETCp.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},ETCp.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},ETCp.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Heap__default.default((function(e,t){return t.reqs-e.reqs}))},ETCp.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ETCp.getElement=function(e,t,r,n,o){var i=this,a=this.renderer,s=a.cy.zoom(),l=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed())return null;if(!i.allowEdgeTxrCaching&&e.isEdge()||!i.allowParentTxrCaching&&e.isParent())return null;if(null==n&&(n=Math.ceil(log2(s*r))),n<minLvl$1)n=minLvl$1;else if(s>=maxZoom$1||n>maxLvl$1)return null;var u=Math.pow(2,n),c=t.h*u,g=t.w*u,d=a.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,d))return null;var p,h=l.get(e,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;if(p=c<=minTxrH?minTxrH:c<=txrStepH?txrStepH:Math.ceil(c/txrStepH)*txrStepH,c>maxTxrH||g>maxTxrW)return null;var f=i.getTextureQueue(p),y=f[f.length-2],m=function(){return i.recycleTexture(p,g)||i.addTexture(p,g)};y||(y=f[f.length-1]),y||(y=m()),y.width-y.usedWidth<g&&(y=m());for(var b,_=function(e){return e&&e.scaledLabelShown===d},v=o&&o===getTxrReasons.dequeue,S=o&&o===getTxrReasons.highQuality,E=o&&o===getTxrReasons.downscale,w=n+1;w<=maxLvl$1;w++){var x=l.get(e,w);if(x){b=x;break}}var T=b&&b.level===n+1?b:null,R=function(){y.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,y.usedWidth,0,g,c)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,g,p),_(T))R();else if(_(b)){if(!S)return i.queueElement(e,b.level-1),b;for(var A=b.level;A>n;A--)T=i.getElement(e,t,r,A,getTxrReasons.downscale);R()}else{var j;if(!v&&!S&&!E)for(var C=n-1;C>=minLvl$1;C--){var P=l.get(e,C);if(P){j=P;break}}if(_(j))return i.queueElement(e,n),j;y.context.translate(y.usedWidth,0),y.context.scale(u,u),this.drawElement(y.context,e,t,d,!1),y.context.scale(1/u,1/u),y.context.translate(-y.usedWidth,0)}return h={x:y.usedWidth,texture:y,level:n,scale:u,width:g,height:c,scaledLabelShown:d},y.usedWidth+=Math.ceil(g+eleTxrSpacing),y.eleCaches.push(h),l.set(e,n,h),i.checkTextureFullness(y),h},ETCp.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},ETCp.invalidateElement=function(e){var t=this,r=t.lookup,n=[];if(r.isInvalid(e)){for(var o=minLvl$1;o<=maxLvl$1;o++){var i=r.getForCachedKey(e,o);i&&n.push(i)}if(r.invalidate(e))for(var a=0;a<n.length;a++){var s=n[a],l=s.texture;l.invalidatedWidth+=s.width,s.invalidated=!0,t.checkTextureUtility(l)}t.removeFromQueue(e)}},ETCp.checkTextureUtility=function(e){e.invalidatedWidth>=minUtility*e.width&&this.retireTexture(e)},ETCp.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>maxFullness&&e.fullnessChecks>=maxFullnessChecks?removeFromArray(t,e):e.fullnessChecks++},ETCp.retireTexture=function(e){var t=e.height,r=this.getTextureQueue(t),n=this.lookup;removeFromArray(r,e),e.retired=!0;for(var o=e.eleCaches,i=0;i<o.length;i++){var a=o[i];n.deleteCache(a.key,a.level)}clearArray(o),this.getRetiredTextureQueue(t).push(e)},ETCp.addTexture=function(e,t){var r={};return this.getTextureQueue(e).push(r),r.eleCaches=[],r.height=e,r.width=Math.max(defTxrWidth,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},ETCp.recycleTexture=function(e,t){for(var r=this.getTextureQueue(e),n=this.getRetiredTextureQueue(e),o=0;o<n.length;o++){var i=n[o];if(i.width>=t)return i.retired=!1,i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,clearArray(i.eleCaches),i.context.setTransform(1,0,0,1,0,0),i.context.clearRect(0,0,i.width,i.height),removeFromArray(n,i),r.push(i),i}},ETCp.queueElement=function(e,t){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),o=this.getKey(e),i=n[o];if(i)i.level=Math.max(i.level,t),i.eles.merge(e),i.reqs++,r.updateItem(i);else{var a={eles:e.spawn().merge(e),level:t,reqs:1,key:o};r.push(a),n[o]=a}},ETCp.dequeue=function(e){for(var t=this,r=t.getElementQueue(),n=t.getElementKeyToQueue(),o=[],i=t.lookup,a=0;a<maxDeqSize$1&&r.size()>0;a++){var s=r.pop(),l=s.key,u=s.eles[0],c=i.hasCache(u,s.level);if(n[l]=null,!c){o.push(s);var g=t.getBoundingBox(u);t.getElement(u,g,e,s.level,getTxrReasons.dequeue)}}return o},ETCp.removeFromQueue=function(e){var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=this.getKey(e),o=r[n];null!=o&&(1===o.eles.length?(o.reqs=MAX_INT$1,t.updateItem(o),t.pop(),r[n]=null):o.eles.unmerge(e))},ETCp.onDequeue=function(e){this.onDequeues.push(e)},ETCp.offDequeue=function(e){removeFromArray(this.onDequeues,e)},ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function(e,t,r){return e.dequeue(t,r)},onDeqd:function(e,t){for(var r=0;r<e.onDequeues.length;r++){(0,e.onDequeues[r])(t)}},shouldRedraw:function(e,t,r,n){for(var o=0;o<t.length;o++)for(var i=t[o].eles,a=0;a<i.length;a++){var s=i[a].boundingBox();if(boundingBoxesIntersect(s,n))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl=-4,maxLvl=2,maxZoom=3.99,deqRedrawThreshold=50,refineEleDebounceTime=50,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,maxDeqSize=1,invalidThreshold=250,maxLayerArea=16e6,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function(e){var t=this,r=t.renderer=e,n=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=performanceNow()-2*invalidThreshold,t.skipping=!1,t.eleTxrDeqs=n.collection(),t.scheduleElementRefinement=debounce__default.default((function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)}),refineEleDebounceTime),r.beforeRender((function(e,r){r-t.lastInvalidationTime<=invalidThreshold?t.skipping=!0:t.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new Heap__default.default((function(e,t){return t.reqs-e.reqs})),t.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1;LTCp.makeLayer=function(e,t){var r=Math.pow(2,t),n=Math.ceil(e.w*r),o=Math.ceil(e.h*r),i=this.renderer.makeOffscreenCanvas(n,o),a={id:layerIdPool=++layerIdPool%MAX_INT,bb:e,level:t,width:n,height:o,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,u=-a.bb.y1;return s.scale(r,r),s.translate(l,u),a},LTCp.getLayers=function(e,t,r){var n=this,o=n.renderer.cy.zoom(),i=n.firstGet;if(n.firstGet=!1,null==r)if((r=Math.ceil(log2(o*t)))<minLvl)r=minLvl;else if(o>=maxZoom||r>maxLvl)return null;n.validateLayersElesOrdering(r,e);var a,s,l=n.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[];if(n.levelIsComplete(r,e))return c;!function(){var t=function(t){if(n.validateLayersElesOrdering(t,e),n.levelIsComplete(t,e))return s=l[t],!0},o=function(e){if(!s)for(var n=r+e;minLvl<=n&&n<=maxLvl&&!t(n);n+=e);};o(1),o(-1);for(var i=c.length-1;i>=0;i--){var a=c[i];a.invalid&&removeFromArray(c,a)}}();var g=function(t){var o=(t=t||{}).after;if(function(){if(!a){a=makeBoundingBox();for(var t=0;t<e.length;t++)updateBoundingBox(a,e[t].boundingBox())}}(),a.w*u*(a.h*u)>maxLayerArea)return null;var i=n.makeLayer(a,r);if(null!=o){var s=c.indexOf(o)+1;c.splice(s,0,i)}else(void 0===t.insert||t.insert)&&c.unshift(i);return i};if(n.skipping&&!i)return null;for(var d=null,p=e.length/defNumLayers,h=!i,f=0;f<e.length;f++){var y=e[f],m=y._private.rscratch,b=m.imgLayerCaches=m.imgLayerCaches||{},_=b[r];if(_)d=_;else{if((!d||d.eles.length>=p||!boundingBoxInBoundingBox(d.bb,y.boundingBox()))&&!(d=g({insert:!0,after:d})))return null;s||h?n.queueLayer(d,y):n.drawEleInLayer(d,y,r,t),d.eles.push(y),b[r]=d}}return s||(h?null:c)},LTCp.getEleLevelForLayerLevel=function(e,t){return e},LTCp.drawEleInLayer=function(e,t,r,n){var o=this.renderer,i=e.context,a=t.boundingBox();0!==a.w&&0!==a.h&&t.visible()&&(r=this.getEleLevelForLayerLevel(r,n),o.setImgSmoothing(i,!1),o.drawCachedElement(i,t,null,null,r,useHighQualityEleTxrReqs),o.setImgSmoothing(i,!0))},LTCp.levelIsComplete=function(e,t){var r=this.layersByLevel[e];if(!r||0===r.length)return!1;for(var n=0,o=0;o<r.length;o++){var i=r[o];if(i.reqs>0)return!1;if(i.invalid)return!1;n+=i.eles.length}return n===t.length},LTCp.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var n=0;n<r.length;n++){for(var o=r[n],i=-1,a=0;a<t.length;a++)if(o.eles[0]===t[a]){i=a;break}if(i<0)this.invalidateLayer(o);else{var s=i;for(a=0;a<o.eles.length;a++)if(o.eles[a]!==t[s+a]){this.invalidateLayer(o);break}}}},LTCp.updateElementsInLayers=function(e,t){for(var r=element(e[0]),n=0;n<e.length;n++)for(var o=r?null:e[n],i=r?e[n]:e[n].ele,a=i._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},l=minLvl;l<=maxLvl;l++){var u=s[l];u&&(o&&this.getEleLevelForLayerLevel(u.level)!==o.level||t(u,i,o))}},LTCp.haveLayers=function(){for(var e=!1,t=minLvl;t<=maxLvl;t++){var r=this.layersByLevel[t];if(r&&r.length>0){e=!0;break}}return e},LTCp.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=performanceNow(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,(function(e,r,n){t.invalidateLayer(e)})))},LTCp.invalidateLayer=function(e){if(this.lastInvalidationTime=performanceNow(),!e.invalid){var t=e.level,r=e.eles,n=this.layersByLevel[t];removeFromArray(n,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var o=0;o<r.length;o++){var i=r[o]._private.rscratch.imgLayerCaches;i&&(i[t]=null)}}},LTCp.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,(function(e,r,n){var o=e.replacement;if(o||((o=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,o.eles=e.eles),!o.reqs)for(var i=0;i<o.eles.length;i++)t.queueLayer(o,o.eles[i])}))},LTCp.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},LTCp.queueLayer=function(e,t){var r=this.layersQueue,n=e.elesQueue,o=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(o[t.id()])return;n.push(t),o[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},LTCp.dequeue=function(e){for(var t=this,r=t.layersQueue,n=[],o=0;o<maxDeqSize&&0!==r.size();){var i=r.peek();if(i.replacement)r.pop();else if(i.replaces&&i!==i.replaces.replacement)r.pop();else if(i.invalid)r.pop();else{var a=i.elesQueue.shift();a&&(t.drawEleInLayer(i,a,i.level,e),o++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(r.pop(),i.reqs=0,i.replaces&&t.applyLayerReplacement(i),t.requestRedraw())}}return n},LTCp.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],r=e.replaces,n=t.indexOf(r);if(!(n<0||r.invalid)){t[n]=e;for(var o=0;o<e.eles.length;o++){var i=e.eles[o]._private,a=i.imgLayerCaches=i.imgLayerCaches||{};a&&(a[e.level]=e)}this.requestRedraw()}},LTCp.requestRedraw=debounce__default.default((function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()}),100),LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold,deqCost:deqCost,deqAvgCost:deqAvgCost,deqNoDrawCost:deqNoDrawCost,deqFastCost:deqFastCost,deq:function(e,t){return e.dequeue(t)},onDeqd:noop$1,shouldRedraw:trueify,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp$a={},impl;function polygon(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function triangleBackcurve(e,t,r){for(var n,o=0;o<t.length;o++){var i=t[o];0===o&&(n=i),e.lineTo(i.x,i.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function triangleTee(e,t,r){e.beginPath&&e.beginPath();for(var n=t,o=0;o<n.length;o++){var i=n[o];e.lineTo(i.x,i.y)}var a=r,s=r[0];e.moveTo(s.x,s.y);for(o=1;o<a.length;o++){i=a[o];e.lineTo(i.x,i.y)}e.closePath&&e.closePath()}function circleTriangle(e,t,r,n,o){e.beginPath&&e.beginPath(),e.arc(r,n,o,0,2*Math.PI,!1);var i=t,a=i[0];e.moveTo(a.x,a.y);for(var s=0;s<i.length;s++){var l=i[s];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function circle(e,t,r,n){e.arc(t,r,n,0,2*Math.PI,!1)}CRp$a.arrowShapeImpl=function(e){return(impl||(impl={polygon:polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle}))[e]};var CRp$9={drawElement:function(e,t,r,n,o,i){t.isNode()?this.drawNode(e,t,r,n,o,i):this.drawEdge(e,t,r,n,o,i)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,n,o,i,a,s){var l=this,u=r.getBoundingBox(t);if(0!==u.w&&0!==u.h){var c=r.getElement(t,u,n,o,i);if(null!=c){var g=s(l,t);if(0===g)return;var d,p,h,f,y,m,b=a(l,t),_=u.x1,v=u.y1,S=u.w,E=u.h;if(0!==b){var w=r.getRotationPoint(t);h=w.x,f=w.y,e.translate(h,f),e.rotate(b),(y=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var x=r.getRotationOffset(t);d=x.x,p=x.y}else d=_,p=v;1!==g&&(m=e.globalAlpha,e.globalAlpha=m*g),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,p,S,E),1!==g&&(e.globalAlpha=m),0!==b&&(e.rotate(-b),e.translate(-h,-f),y||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},getZeroRotation=function(){return 0},getLabelRotation=function(e,t){return e.getTextAngle(t,null)},getSourceLabelRotation=function(e,t){return e.getTextAngle(t,"source")},getTargetLabelRotation=function(e,t){return e.getTextAngle(t,"target")},getOpacity=function(e,t){return t.effectiveOpacity()},getTextOpacity=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};CRp$9.drawCachedElement=function(e,t,r,n,o,i){var a=this,s=a.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,g=s.tlbTxrCache,d=t.boundingBox(),p=!0===i?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&t.visible()&&(!n||boundingBoxesIntersect(d,n))){var h=t.isEdge(),f=t.element()._private.rscratch.badLine;a.drawElementUnderlay(e,t),a.drawCachedElementPortion(e,t,l,r,o,p,getZeroRotation,getOpacity),h&&f||a.drawCachedElementPortion(e,t,u,r,o,p,getLabelRotation,getTextOpacity),h&&!f&&(a.drawCachedElementPortion(e,t,c,r,o,p,getSourceLabelRotation,getTextOpacity),a.drawCachedElementPortion(e,t,g,r,o,p,getTargetLabelRotation,getTextOpacity)),a.drawElementOverlay(e,t)}},CRp$9.drawElements=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];this.drawElement(e,n)}},CRp$9.drawCachedElements=function(e,t,r,n){for(var o=0;o<t.length;o++){var i=t[o];this.drawCachedElement(e,i,r,n)}},CRp$9.drawCachedNodes=function(e,t,r,n){for(var o=0;o<t.length;o++){var i=t[o];i.isNode()&&this.drawCachedElement(e,i,r,n)}},CRp$9.drawLayeredElements=function(e,t,r,n){var o=this.data.lyrTxrCache.getLayers(t,r);if(o)for(var i=0;i<o.length;i++){var a=o[i],s=a.bb;0!==s.w&&0!==s.h&&e.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,r,n)};var CRp$8={drawEdge:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=t._private.rscratch;if((!i||t.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;r&&(l=r,e.translate(-l.x1,-l.y1));var u=i?t.pstyle("opacity").value:1,c=i?t.pstyle("line-opacity").value:1,g=t.pstyle("curve-style").value,d=t.pstyle("line-style").value,p=t.pstyle("width").pfValue,h=t.pstyle("line-cap").value,f=u*c,y=u*c,m=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;"straight-triangle"===g?(a.eleStrokeStyle(e,t,r),a.drawEdgeTrianglePath(t,e,s.allpts)):(e.lineWidth=p,e.lineCap=h,a.eleStrokeStyle(e,t,r),a.drawEdgePath(t,e,s.allpts,d),e.lineCap="butt")},b=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;a.drawArrowheads(e,t,r)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var _=t.pstyle("ghost-offset-x").pfValue,v=t.pstyle("ghost-offset-y").pfValue,S=t.pstyle("ghost-opacity").value,E=f*S;e.translate(_,v),m(E),b(E),e.translate(-_,-v)}o&&a.drawEdgeUnderlay(e,t),m(),b(),o&&a.drawEdgeOverlay(e,t),a.drawElementText(e,t,null,n),r&&e.translate(l.x1,l.y1)}}},drawEdgeOverlayUnderlay=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r){if(r.visible()){var n=r.pstyle("".concat(e,"-opacity")).value;if(0!==n){var o=this,i=o.usePaths(),a=r._private.rscratch,s=2*r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-color")).value;t.lineWidth=s,"self"!==a.edgeType||i?t.lineCap="round":t.lineCap="butt",o.colorStrokeStyle(t,l[0],l[1],l[2],n),o.drawEdgePath(r,t,a.allpts,"solid")}}}};CRp$8.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay"),CRp$8.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay"),CRp$8.drawEdgePath=function(e,t,r,n){var o,i=e._private.rscratch,a=t,s=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var g=r.join("$");i.pathCacheKey&&i.pathCacheKey===g?(o=t=i.pathCache,s=!0):(o=t=new Path2D,i.pathCacheKey=g,i.pathCache=o)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)t.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<r.length;p+=2)t.lineTo(r[p],r[p+1])}t=a,l?t.stroke(o):t.stroke(),t.setLineDash&&t.setLineDash([])},CRp$8.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var n=e.pstyle("width").pfValue,o=0;o+1<r.length;o+=2){var i=[r[o+2]-r[o],r[o+3]-r[o+1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/a,-i[0]/a],l=[s[0]*n/2,s[1]*n/2];t.beginPath(),t.moveTo(r[o]-l[0],r[o+1]-l[1]),t.lineTo(r[o]+l[0],r[o+1]+l[1]),t.lineTo(r[o+2],r[o+3]),t.closePath(),t.fill()}},CRp$8.drawArrowheads=function(e,t,r){var n=t._private.rscratch,o="haystack"===n.edgeType;o||this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),o||this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},CRp$8.drawArrowhead=function(e,t,r,n,o,i,a){if(!(isNaN(n)||null==n||isNaN(o)||null==o||isNaN(i)||null==i)){var s=this,l=t.pstyle(r+"-arrow-shape").value;if("none"!==l){var u="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",c=t.pstyle(r+"-arrow-fill").value,g=t.pstyle("width").pfValue,d=t.pstyle("opacity").value;void 0===a&&(a=d);var p=e.globalCompositeOperation;1===a&&"hollow"!==c||(e.globalCompositeOperation="destination-out",s.colorFillStyle(e,255,255,255,1),s.colorStrokeStyle(e,255,255,255,1),s.drawArrowShape(t,e,u,g,l,n,o,i),e.globalCompositeOperation=p);var h=t.pstyle(r+"-arrow-color").value;s.colorFillStyle(e,h[0],h[1],h[2],a),s.colorStrokeStyle(e,h[0],h[1],h[2],a),s.drawArrowShape(t,e,c,g,l,n,o,i)}}},CRp$8.drawArrowShape=function(e,t,r,n,o,i,a,s){var l,u=this,c=this.usePaths()&&"triangle-cross"!==o,g=!1,d=t,p={x:i,y:a},h=e.pstyle("arrow-scale").value,f=this.getArrowWidth(n,h),y=u.arrowShapes[o];if(c){var m=u.arrowPathCache=u.arrowPathCache||[],b=hashString(o),_=m[b];null!=_?(l=t=_,g=!0):(l=t=new Path2D,m[b]=l)}g||(t.beginPath&&t.beginPath(),c?y.draw(t,1,0,{x:0,y:0},1):y.draw(t,f,s,p,n),t.closePath&&t.closePath()),t=d,c&&(t.translate(i,a),t.rotate(s),t.scale(f,f)),"filled"!==r&&"both"!==r||(c?t.fill(l):t.fill()),"hollow"!==r&&"both"!==r||(t.lineWidth=(y.matchEdgeWidth?n:1)/(c?f:1),t.lineJoin="miter",c?t.stroke(l):t.stroke()),c&&(t.scale(1/f,1/f),t.rotate(-s),t.translate(-i,-a))};var CRp$7={safeDrawImage:function(e,t,r,n,o,i,a,s,l,u){if(!(o<=0||i<=0||l<=0||u<=0))try{e.drawImage(t,r,n,o,i,a,s,l,u)}catch(e){warn(e)}},drawInscribedImage:function(e,t,r,n,o){var i=this,a=r.position(),s=a.x,l=a.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),g=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),p=r.width(),h=r.height(),f=2*r.padding(),y=p+("inner"===c(r,"background-width-relative-to","value",n)?0:f),m=h+("inner"===c(r,"background-height-relative-to","value",n)?0:f),b=r._private.rscratch,_="node"===c(r,"background-clip","value",n),v=c(r,"background-image-opacity","value",n)*o,S=c(r,"background-image-smoothing","value",n),E=t.width||t.cachedW,w=t.height||t.cachedH;null!=E&&null!=w||(document.body.appendChild(t),E=t.cachedW=t.width||t.offsetWidth,w=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var x=E,T=w;if("auto"!==c(r,"background-width","value",n)&&(x="%"===c(r,"background-width","units",n)?c(r,"background-width","pfValue",n)*y:c(r,"background-width","pfValue",n)),"auto"!==c(r,"background-height","value",n)&&(T="%"===c(r,"background-height","units",n)?c(r,"background-height","pfValue",n)*m:c(r,"background-height","pfValue",n)),0!==x&&0!==T){if("contain"===g)x*=R=Math.min(y/x,m/T),T*=R;else if("cover"===g){var R;x*=R=Math.max(y/x,m/T),T*=R}var A=s-y/2,j=c(r,"background-position-x","units",n),C=c(r,"background-position-x","pfValue",n);A+="%"===j?(y-x)*C:C;var P=c(r,"background-offset-x","units",n),I=c(r,"background-offset-x","pfValue",n);A+="%"===P?(y-x)*I:I;var M=l-m/2,O=c(r,"background-position-y","units",n),B=c(r,"background-position-y","pfValue",n);M+="%"===O?(m-T)*B:B;var N=c(r,"background-offset-y","units",n),k=c(r,"background-offset-y","pfValue",n);M+="%"===N?(m-T)*k:k,b.pathCache&&(A-=s,M-=l,s=0,l=0);var D=e.globalAlpha;e.globalAlpha=v;var q=i.getImgSmoothing(e),$=!1;if("no"===S&&q?(i.setImgSmoothing(e,!1),$=!0):"yes"!==S||q||(i.setImgSmoothing(e,!0),$=!0),"no-repeat"===d)_&&(e.save(),b.pathCache?e.clip(b.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(e,s,l,y,m),e.clip())),i.safeDrawImage(e,t,0,0,E,w,A,M,x,T),_&&e.restore();else{var F=e.createPattern(t,d);e.fillStyle=F,i.nodeShapes[i.getNodeShape(r)].draw(e,s,l,y,m),e.translate(A,M),e.fill(),e.translate(-A,-M)}e.globalAlpha=D,$&&i.setImgSmoothing(e,q)}}},CRp$6={};function roundRect(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+n-i,r),e.quadraticCurveTo(t+n,r,t+n,r+i),e.lineTo(t+n,r+o-i),e.quadraticCurveTo(t+n,r+o,t+n-i,r+o),e.lineTo(t+i,r+o),e.quadraticCurveTo(t,r+o,t,r+o-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath(),e.fill()}CRp$6.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),n=this.getPixelRatio(),o=Math.ceil(log2(r*n));t=Math.pow(2,o)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},CRp$6.drawElementText=function(e,t,r,n,o){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==n){if(i&&!a.eleTextBiggerThanMin(t))return}else if(!1===n)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var l=a.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,c=t.pstyle("label"),g=t.pstyle("source-label"),d=t.pstyle("target-label");if(u||(!c||!c.value)&&(!g||!g.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var p,h=!r;r&&(p=r,e.translate(-p.x1,-p.y1)),null==o?(a.drawText(e,t,null,h,i),t.isEdge()&&(a.drawText(e,t,"source",h,i),a.drawText(e,t,"target",h,i))):a.drawText(e,t,o,h,i),r&&e.translate(p.x1,p.y1)},CRp$6.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},CRp$6.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue+"px",i=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,s=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=n+" "+a+" "+o+" "+i,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},CRp$6.getTextAngle=function(e,t){var r=e._private.rscratch,n=t?t+"-":"",o=e.pstyle(n+"text-rotation"),i=getPrefixedProperty(r,"labelAngle",t);return"autorotate"===o.strValue?e.isEdge()?i:0:"none"===o.strValue?0:o.pfValue},CRp$6.drawText=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=t._private.rscratch,a=o?t.effectiveOpacity():1;if(!o||0!==a&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var s,l,u=getPrefixedProperty(i,"labelX",r),c=getPrefixedProperty(i,"labelY",r),g=this.getLabelText(t,r);if(null!=g&&""!==g&&!isNaN(u)&&!isNaN(c)){this.setupTextStyle(e,t,o);var d,p=r?r+"-":"",h=getPrefixedProperty(i,"labelWidth",r),f=getPrefixedProperty(i,"labelHeight",r),y=t.pstyle(p+"text-margin-x").pfValue,m=t.pstyle(p+"text-margin-y").pfValue,b=t.isEdge(),_=t.pstyle("text-halign").value,v=t.pstyle("text-valign").value;switch(b&&(_="center",v="center"),u+=y,c+=m,0!==(d=n?this.getTextAngle(t,r):0)&&(s=u,l=c,e.translate(s,l),e.rotate(d),u=0,c=0),v){case"top":break;case"center":c+=f/2;break;case"bottom":c+=f}var S=t.pstyle("text-background-opacity").value,E=t.pstyle("text-border-opacity").value,w=t.pstyle("text-border-width").pfValue,x=t.pstyle("text-background-padding").pfValue;if(S>0||w>0&&E>0){var T=u-x;switch(_){case"left":T-=h;break;case"center":T-=h/2}var R=c-f-x,A=h+2*x,j=f+2*x;if(S>0){var C=e.fillStyle,P=t.pstyle("text-background-color").value;e.fillStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+S*a+")",0===t.pstyle("text-background-shape").strValue.indexOf("round")?roundRect(e,T,R,A,j,2):e.fillRect(T,R,A,j),e.fillStyle=C}if(w>0&&E>0){var I=e.strokeStyle,M=e.lineWidth,O=t.pstyle("text-border-color").value,B=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+E*a+")",e.lineWidth=w,e.setLineDash)switch(B){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=w/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(T,R,A,j),"double"===B){var N=w/2;e.strokeRect(T+N,R+N,A-2*N,j-2*N)}e.setLineDash&&e.setLineDash([]),e.lineWidth=M,e.strokeStyle=I}}var k=2*t.pstyle("text-outline-width").pfValue;if(k>0&&(e.lineWidth=k),"wrap"===t.pstyle("text-wrap").value){var D=getPrefixedProperty(i,"labelWrapCachedLines",r),q=getPrefixedProperty(i,"labelLineHeight",r),$=h/2,F=this.getLabelJustification(t);switch("auto"===F||("left"===_?"left"===F?u+=-h:"center"===F&&(u+=-$):"center"===_?"left"===F?u+=-$:"right"===F&&(u+=$):"right"===_&&("center"===F?u+=$:"right"===F&&(u+=h))),v){case"top":case"center":case"bottom":c-=(D.length-1)*q}for(var L=0;L<D.length;L++)k>0&&e.strokeText(D[L],u,c),e.fillText(D[L],u,c),c+=q}else k>0&&e.strokeText(g,u,c),e.fillText(g,u,c);0!==d&&(e.rotate(-d),e.translate(-s,-l))}}};var CRp$5={drawNode:function(e,t,r){var n,o,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=t._private,c=u.rscratch,g=t.position();if(number$1(g.x)&&number$1(g.y)&&(!s||t.visible())){var d,p,h=s?t.effectiveOpacity():1,f=l.usePaths(),y=!1,m=t.padding();n=t.width()+2*m,o=t.height()+2*m,r&&(p=r,e.translate(-p.x1,-p.y1));for(var b=t.pstyle("background-image").value,_=new Array(b.length),v=new Array(b.length),S=0,E=0;E<b.length;E++){var w=b[E];if(_[E]=null!=w&&"none"!==w){var x=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",E);S++,v[E]=l.getCachedImage(w,x,(function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")}))}}var T=t.pstyle("background-blacken").value,R=t.pstyle("border-width").pfValue,A=t.pstyle("background-opacity").value*h,j=t.pstyle("border-color").value,C=t.pstyle("border-style").value,P=t.pstyle("border-opacity").value*h;e.lineJoin="miter";var I=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;l.eleFillStyle(e,t,r)},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;l.colorStrokeStyle(e,j[0],j[1],j[2],t)},O=t.pstyle("shape").strValue,B=t.pstyle("shape-polygon-points").pfValue;if(f){e.translate(g.x,g.y);var N=l.nodePathCache=l.nodePathCache||[],k=hashStrings("polygon"===O?O+","+B.join(","):O,""+o,""+n),D=N[k];null!=D?(d=D,y=!0,c.pathCache=d):(d=new Path2D,N[k]=c.pathCache=d)}var q=function(){if(!y){var r=g;f&&(r={x:0,y:0}),l.nodeShapes[l.getNodeShape(t)].draw(d||e,r.x,r.y,n,o)}f?e.fill(d):e.fill()},$=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=u.backgrounding,i=0,a=0;a<v.length;a++){var s=t.cy().style().getIndexedStyle(t,"background-image-containment","value",a);n&&"over"===s||!n&&"inside"===s?i++:_[a]&&v[a].complete&&!v[a].error&&(i++,l.drawInscribedImage(e,v[a],t,a,r))}u.backgrounding=!(i===S),o!==u.backgrounding&&t.updateStyle(!1)},F=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;l.hasPie(t)&&(l.drawPie(e,t,i),r&&(f||l.nodeShapes[l.getNodeShape(t)].draw(e,g.x,g.y,n,o)))},L=function(){var t=(T>0?T:-T)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:h),r=T>0?0:255;0!==T&&(l.colorFillStyle(e,r,r,r,t),f?e.fill(d):e.fill())},U=function(){if(R>0){if(e.lineWidth=R,e.lineCap="butt",e.setLineDash)switch(C){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(f?e.stroke(d):e.stroke(),"double"===C){e.lineWidth=R/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",f?e.stroke(d):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var W=t.pstyle("ghost-offset-x").pfValue,z=t.pstyle("ghost-offset-y").pfValue,V=t.pstyle("ghost-opacity").value,H=V*h;e.translate(W,z),I(V*A),q(),$(H,!0),M(V*P),U(),F(0!==T||0!==R),$(H,!1),L(H),e.translate(-W,-z)}f&&e.translate(-g.x,-g.y),a&&l.drawNodeUnderlay(e,t,g,n,o),f&&e.translate(g.x,g.y),I(),q(),$(h,!0),M(),U(),F(0!==T||0!==R),$(h,!1),L(),f&&e.translate(-g.x,-g.y),l.drawElementText(e,t,null,i),a&&l.drawNodeOverlay(e,t,g,n,o),r&&e.translate(p.x1,p.y1)}}},drawNodeOverlayUnderlay=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r,n,o,i){if(r.visible()){var a=r.pstyle("".concat(e,"-padding")).pfValue,s=r.pstyle("".concat(e,"-opacity")).value,l=r.pstyle("".concat(e,"-color")).value,u=r.pstyle("".concat(e,"-shape")).value;if(s>0){if(n=n||r.position(),null==o||null==i){var c=r.padding();o=r.width()+2*c,i=r.height()+2*c}this.colorFillStyle(t,l[0],l[1],l[2],s),this.nodeShapes[u].draw(t,n.x,n.y,o+2*a,i+2*a),t.fill()}}}};CRp$5.drawNodeOverlay=drawNodeOverlayUnderlay("overlay"),CRp$5.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay"),CRp$5.hasPie=function(e){return(e=e[0])._private.hasPie},CRp$5.drawPie=function(e,t,r,n){t=t[0],n=n||t.position();var o=t.cy().style(),i=t.pstyle("pie-size"),a=n.x,s=n.y,l=t.width(),u=t.height(),c=Math.min(l,u)/2,g=0;this.usePaths()&&(a=0,s=0),"%"===i.units?c*=i.pfValue:void 0!==i.pfValue&&(c=i.pfValue/2);for(var d=1;d<=o.pieBackgroundN;d++){var p=t.pstyle("pie-"+d+"-background-size").value,h=t.pstyle("pie-"+d+"-background-color").value,f=t.pstyle("pie-"+d+"-background-opacity").value*r,y=p/100;y+g>1&&(y=1-g);var m=1.5*Math.PI+2*Math.PI*g,b=m+2*Math.PI*y;0===p||g>=1||g+y>1||(e.beginPath(),e.moveTo(a,s),e.arc(a,s,c,m,b),e.closePath(),this.colorFillStyle(e,h[0],h[1],h[2],f),e.fill(),g+=y)}};var CRp$4={},motionBlurDelay=100;CRp$4.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},CRp$4.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,o=0;o<r.length;o++)if((t=r[o]).context===e){n=!1;break}return n&&(t={context:e},r.push(t)),t},CRp$4.createGradientStyleFor=function(e,t,r,n,o){var i,a=this.usePaths(),s=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),g=r.midpoint(),d=dist(u,g),p=dist(c,g);i=e.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(d,p))}else{var h=a?{x:0,y:0}:r.position(),f=r.paddedWidth(),y=r.paddedHeight();i=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(f,y))}else if(r.isEdge()){var m=r.sourceEndpoint(),b=r.targetEndpoint();i=e.createLinearGradient(m.x,m.y,b.x,b.y)}else{var _=a?{x:0,y:0}:r.position(),v=r.paddedWidth()/2,S=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":i=e.createLinearGradient(_.x,_.y-S,_.x,_.y+S);break;case"to-top":i=e.createLinearGradient(_.x,_.y+S,_.x,_.y-S);break;case"to-left":i=e.createLinearGradient(_.x+v,_.y,_.x-v,_.y);break;case"to-right":i=e.createLinearGradient(_.x-v,_.y,_.x+v,_.y);break;case"to-bottom-right":case"to-right-bottom":i=e.createLinearGradient(_.x-v,_.y-S,_.x+v,_.y+S);break;case"to-top-right":case"to-right-top":i=e.createLinearGradient(_.x-v,_.y+S,_.x+v,_.y-S);break;case"to-bottom-left":case"to-left-bottom":i=e.createLinearGradient(_.x+v,_.y-S,_.x-v,_.y+S);break;case"to-top-left":case"to-left-top":i=e.createLinearGradient(_.x+v,_.y+S,_.x-v,_.y-S)}}if(!i)return null;for(var E=l.length===s.length,w=s.length,x=0;x<w;x++)i.addColorStop(E?l[x]:x/(w-1),"rgba("+s[x][0]+","+s[x][1]+","+s[x][2]+","+o+")");return i},CRp$4.gradientFillStyle=function(e,t,r,n){var o=this.createGradientStyleFor(e,"background",t,r,n);if(!o)return null;e.fillStyle=o},CRp$4.colorFillStyle=function(e,t,r,n,o){e.fillStyle="rgba("+t+","+r+","+n+","+o+")"},CRp$4.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(e,t,n,r);else{var o=t.pstyle("background-color").value;this.colorFillStyle(e,o[0],o[1],o[2],r)}},CRp$4.gradientStrokeStyle=function(e,t,r,n){var o=this.createGradientStyleFor(e,"line",t,r,n);if(!o)return null;e.strokeStyle=o},CRp$4.colorStrokeStyle=function(e,t,r,n,o){e.strokeStyle="rgba("+t+","+r+","+n+","+o+")"},CRp$4.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(e,t,n,r);else{var o=t.pstyle("line-color").value;this.colorStrokeStyle(e,o[0],o[1],o[2],r)}},CRp$4.matchCanvasSize=function(e){var t=this,r=t.data,n=t.findContainerClientCoords(),o=n[2],i=n[3],a=t.getPixelRatio(),s=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(a=s);var l,u=o*a,c=i*a;if(u!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var g=r.canvasContainer;g.style.width=o+"px",g.style.height=i+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)(l=r.canvases[d]).width=u,l.height=c,l.style.width=o+"px",l.style.height=i+"px";for(d=0;d<t.BUFFER_COUNT;d++)(l=r.bufferCanvases[d]).width=u,l.height=c,l.style.width=o+"px",l.style.height=i+"px";t.textureMult=1,a<=1&&(l=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=u*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=u,t.canvasHeight=c}},CRp$4.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},CRp$4.render=function(e){var t=(e=e||staticEmptyObject()).forcedContext,r=e.drawAllLayers,n=e.drawOnlyNodeLayer,o=e.forcedZoom,i=e.forcedPan,a=this,s=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,l=a.cy,u=a.data,c=u.canvasNeedsRedraw,g=a.textureOnViewport&&!t&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),d=void 0!==e.motionBlur?e.motionBlur:a.motionBlur,p=a.motionBlurPxRatio,h=l.hasCompoundNodes(),f=a.hoverData.draggingEles,y=!(!a.hoverData.selecting&&!a.touchData.selecting),m=d=d&&!t&&a.motionBlurEnabled&&!y;t||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!t&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),d&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(m=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!g&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var b=l.style(),_=l.zoom(),v=void 0!==o?o:_,S=l.pan(),E={x:S.x,y:S.y},w={zoom:_,pan:{x:S.x,y:S.y}},x=a.prevViewport;void 0===x||w.zoom!==x.zoom||w.pan.x!==x.pan.x||w.pan.y!==x.pan.y||f&&!h||(a.motionBlurPxRatio=1),i&&(E=i),v*=s,E.x*=s,E.y*=s;var T=a.getCachedZSortedEles();function R(e,t,r,n,o){var i=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",a.colorFillStyle(e,255,255,255,a.motionBlurTransparency),e.fillRect(t,r,n,o),e.globalCompositeOperation=i}function A(e,n){var s,l,c,g;a.clearingMotionBlur||e!==u.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&e!==u.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=E,l=v,c=a.canvasWidth,g=a.canvasHeight):(s={x:S.x*p,y:S.y*p},l=_*p,c=a.canvasWidth*p,g=a.canvasHeight*p),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?R(e,0,0,c,g):t||void 0!==n&&!n||e.clearRect(0,0,c,g),r||(e.translate(s.x,s.y),e.scale(l,l)),i&&e.translate(i.x,i.y),o&&e.scale(o,o)}if(g||(a.textureDrawLastFrame=!1),g){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=l.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var j=a.data.bufferContexts[a.TEXTURE_BUFFER];j.setTransform(1,0,0,1,0,0),j.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:j,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(w=a.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var C=u.contexts[a.NODE],P=a.textureCache.texture;w=a.textureCache.viewport;C.setTransform(1,0,0,1,0,0),d?R(C,0,0,w.width,w.height):C.clearRect(0,0,w.width,w.height);var I=b.core("outside-texture-bg-color").value,M=b.core("outside-texture-bg-opacity").value;a.colorFillStyle(C,I[0],I[1],I[2],M),C.fillRect(0,0,w.width,w.height);_=l.zoom();A(C,!1),C.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s),C.drawImage(P,w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s)}else a.textureOnViewport&&!t&&(a.textureCache=null);var O=l.extent(),B=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),N=a.hideEdgesOnViewport&&B,k=[];if(k[a.NODE]=!c[a.NODE]&&d&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,k[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),k[a.DRAG]=!c[a.DRAG]&&d&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,k[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||r||n||k[a.NODE]){var D=d&&!k[a.NODE]&&1!==p;A(C=t||(D?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:u.contexts[a.NODE]),d&&!D?"motionBlur":void 0),N?a.drawCachedNodes(C,T.nondrag,s,O):a.drawLayeredElements(C,T.nondrag,s,O),a.debug&&a.drawDebugPoints(C,T.nondrag),r||d||(c[a.NODE]=!1)}if(!n&&(c[a.DRAG]||r||k[a.DRAG])){D=d&&!k[a.DRAG]&&1!==p;A(C=t||(D?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:u.contexts[a.DRAG]),d&&!D?"motionBlur":void 0),N?a.drawCachedNodes(C,T.drag,s,O):a.drawCachedElements(C,T.drag,s,O),a.debug&&a.drawDebugPoints(C,T.drag),r||d||(c[a.DRAG]=!1)}if(a.showFps||!n&&c[a.SELECT_BOX]&&!r){if(A(C=t||u.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){_=a.cy.zoom();var q=b.core("selection-box-border-width").value/_;C.lineWidth=q,C.fillStyle="rgba("+b.core("selection-box-color").value[0]+","+b.core("selection-box-color").value[1]+","+b.core("selection-box-color").value[2]+","+b.core("selection-box-opacity").value+")",C.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),q>0&&(C.strokeStyle="rgba("+b.core("selection-box-border-color").value[0]+","+b.core("selection-box-border-color").value[1]+","+b.core("selection-box-border-color").value[2]+","+b.core("selection-box-opacity").value+")",C.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(u.bgActivePosistion&&!a.hoverData.selecting){_=a.cy.zoom();var $=u.bgActivePosistion;C.fillStyle="rgba("+b.core("active-bg-color").value[0]+","+b.core("active-bg-color").value[1]+","+b.core("active-bg-color").value[2]+","+b.core("active-bg-opacity").value+")",C.beginPath(),C.arc($.x,$.y,b.core("active-bg-size").pfValue/_,0,2*Math.PI),C.fill()}var F=a.lastRedrawTime;if(a.showFps&&F){F=Math.round(F);var L=Math.round(1e3/F);C.setTransform(1,0,0,1,0,0),C.fillStyle="rgba(255, 0, 0, 0.75)",C.strokeStyle="rgba(255, 0, 0, 0.75)",C.lineWidth=1,C.fillText("1 frame = "+F+" ms = "+L+" fps",0,20);C.strokeRect(0,30,250,20),C.fillRect(0,30,250*Math.min(L/60,1),20)}r||(c[a.SELECT_BOX]=!1)}if(d&&1!==p){var U=u.contexts[a.NODE],W=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],z=u.contexts[a.DRAG],V=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],H=function(e,t,r){e.setTransform(1,0,0,1,0,0),r||!m?e.clearRect(0,0,a.canvasWidth,a.canvasHeight):R(e,0,0,a.canvasWidth,a.canvasHeight);var n=p;e.drawImage(t,0,0,a.canvasWidth*n,a.canvasHeight*n,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||k[a.NODE])&&(H(U,W,k[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||k[a.DRAG])&&(H(z,V,k[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=w,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),d&&(a.motionBlurTimeout=setTimeout((function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!g,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()}),motionBlurDelay)),t||l.emit("render")};for(var CRp$3={drawPolygonPath:function(e,t,r,n,o,i){var a=n/2,s=o/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*i[0],r+s*i[1]);for(var l=1;l<i.length/2;l++)e.lineTo(t+a*i[2*l],r+s*i[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,n,o,i){var a=n/2,s=o/2,l=getRoundPolygonRadius(n,o);e.beginPath&&e.beginPath();for(var u=0;u<i.length/4;u++){var c,g=void 0;g=0===u?i.length-2:4*u-2,c=4*u+2;var d=t+a*i[4*u],p=r+s*i[4*u+1],h=-i[g]*i[c]-i[g+1]*i[c+1],f=l/Math.tan(Math.acos(h)/2),y=d-f*i[g],m=p-f*i[g+1],b=d+f*i[c],_=p+f*i[c+1];0===u?e.moveTo(y,m):e.lineTo(y,m),e.arcTo(d,p,b,_,l)}e.closePath()},drawRoundRectanglePath:function(e,t,r,n,o){var i=n/2,a=o/2,s=getRoundRectangleRadius(n,o);e.beginPath&&e.beginPath(),e.moveTo(t,r-a),e.arcTo(t+i,r-a,t+i,r,s),e.arcTo(t+i,r+a,t,r+a,s),e.arcTo(t-i,r+a,t-i,r,s),e.arcTo(t-i,r-a,t,r-a,s),e.lineTo(t,r-a),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,n,o){var i=n/2,a=o/2,s=getRoundRectangleRadius(n,o);e.beginPath&&e.beginPath(),e.moveTo(t,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r),e.arcTo(t+i,r+a,t,r+a,s),e.arcTo(t-i,r+a,t-i,r,s),e.lineTo(t-i,r-a),e.lineTo(t,r-a),e.closePath()},drawCutRectanglePath:function(e,t,r,n,o){var i=n/2,a=o/2,s=getCutRectangleCornerLength();e.beginPath&&e.beginPath(),e.moveTo(t-i+s,r-a),e.lineTo(t+i-s,r-a),e.lineTo(t+i,r-a+s),e.lineTo(t+i,r+a-s),e.lineTo(t+i-s,r+a),e.lineTo(t-i+s,r+a),e.lineTo(t-i,r+a-s),e.lineTo(t-i,r-a+s),e.closePath()},drawBarrelPath:function(e,t,r,n,o){var i=n/2,a=o/2,s=t-i,l=t+i,u=r-a,c=r+a,g=getBarrelCurveConstants(n,o),d=g.widthOffset,p=g.heightOffset,h=g.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(s,u+p),e.lineTo(s,c-p),e.quadraticCurveTo(s+h,c,s+d,c),e.lineTo(l-d,c),e.quadraticCurveTo(l-h,c,l,c-p),e.lineTo(l,u+p),e.quadraticCurveTo(l-h,u,l-d,u),e.lineTo(s+d,u),e.quadraticCurveTo(s+h,u,s,u+p),e.closePath()}},sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40,i=0*Math.PI;i<2*Math.PI;i+=ellipseStepSize)sin[i]=Math.sin(i),cos[i]=Math.cos(i);CRp$3.drawEllipsePath=function(e,t,r,n,o){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,n/2,o/2,0,0,2*Math.PI);else for(var i,a,s=n/2,l=o/2,u=0*Math.PI;u<2*Math.PI;u+=ellipseStepSize)i=t-s*sin[u]*sin0+s*cos[u]*cos0,a=r+l*cos[u]*sin0+l*sin[u]*cos0,0===u?e.moveTo(i,a):e.lineTo(i,a);e.closePath()};var CRp$2={};function b64ToBlob(e,t){for(var r=atob(e),n=new ArrayBuffer(r.length),o=new Uint8Array(n),i=0;i<r.length;i++)o[i]=r.charCodeAt(i);return new Blob([n],{type:t})}function b64UriToB64(e){var t=e.indexOf(",");return e.substr(t+1)}function output(e,t,r){var n=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new Promise$1((function(n,o){try{t.toBlob((function(e){null!=e?n(e):o(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,e.quality)}catch(e){o(e)}}));case"blob":return b64ToBlob(b64UriToB64(n()),r);case"base64":return b64UriToB64(n());default:return n()}}CRp$2.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},CRp$2.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements().boundingBox(),n=this.findContainerClientCoords(),o=e.full?Math.ceil(r.w):n[2],i=e.full?Math.ceil(r.h):n[3],a=number$1(e.maxWidth)||number$1(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)o*=e.scale,i*=e.scale,l=e.scale;else if(a){var u=1/0,c=1/0;number$1(e.maxWidth)&&(u=l*e.maxWidth/o),number$1(e.maxHeight)&&(c=l*e.maxHeight/i),o*=l=Math.min(u,c),i*=l}a||(o*=s,i*=s,l*=s);var g=document.createElement("canvas");g.width=o,g.height=i,g.style.width=o+"px",g.style.height=i+"px";var d=g.getContext("2d");if(o>0&&i>0){d.clearRect(0,0,o,i),d.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(e.full)d.translate(-r.x1*l,-r.y1*l),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(r.x1*l,r.y1*l);else{var h=t.pan(),f={x:h.x*l,y:h.y*l};l*=t.zoom(),d.translate(f.x,f.y),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(-f.x,-f.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,o,i),d.fill())}return g},CRp$2.png=function(e){return output(e,this.bufferCanvasImage(e),"image/png")},CRp$2.jpg=function(e){return output(e,this.bufferCanvasImage(e),"image/jpeg")};var CRp$1={nodeShapeImpl:function(e,t,r,n,o,i,a){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,o,i);case"polygon":return this.drawPolygonPath(t,r,n,o,i,a);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,o,i,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,o,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,o,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,o,i);case"barrel":return this.drawBarrelPath(t,r,n,o,i)}}},CR=CanvasRenderer,CRp=CanvasRenderer.prototype;function CanvasRenderer(e){var t=this;t.data={canvases:new Array(CRp.CANVAS_LAYERS),contexts:new Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp.CANVAS_LAYERS),bufferCanvases:new Array(CRp.BUFFER_COUNT),bufferContexts:new Array(CRp.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";t.data.canvasContainer=document.createElement("div");var o=t.data.canvasContainer.style;t.data.canvasContainer.style[r]=n,o.position="relative",o.zIndex="0",o.overflow="hidden";var i=e.cy.container();i.appendChild(t.data.canvasContainer),i.style[r]=n;var a={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(a["-ms-touch-action"]="none",a["touch-action"]="none");for(var s=0;s<CRp.CANVAS_LAYERS;s++){var l=t.data.canvases[s]=document.createElement("canvas");t.data.contexts[s]=l.getContext("2d"),Object.keys(a).forEach((function(e){l.style[e]=a[e]})),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(CRp.CANVAS_LAYERS-s),t.data.canvasContainer.appendChild(l),t.data.canvasNeedsRedraw[s]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node"),t.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox"),t.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag");for(s=0;s<CRp.BUFFER_COUNT;s++)t.data.bufferCanvases[s]=document.createElement("canvas"),t.data.bufferContexts[s]=t.data.bufferCanvases[s].getContext("2d"),t.data.bufferCanvases[s].style.position="absolute",t.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),t.data.bufferCanvases[s].style.zIndex=String(-s-1),t.data.bufferCanvases[s].style.visibility="hidden";t.pathsEnabled=!0;var u=makeBoundingBox(),c=function(e){return{x:-e.w/2,y:-e.h/2}},g=function(e){return e.boundingBox(),e[0]._private.bodyBounds},d=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||u},p=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||u},h=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||u},f=function(e,t){return t},y=function(e,t,r){var n=e?e+"-":"";return{x:t.x+r.pstyle(n+"text-margin-x").pfValue,y:t.y+r.pstyle(n+"text-margin-y").pfValue}},m=function(e,t,r){var n=e[0]._private.rscratch;return{x:n[t],y:n[r]}},b=t.data.eleTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.nodeKey},doesEleInvalidateKey:function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:function(e,r,n,o,i){return t.drawElement(e,r,n,!1,!1,i)},getBoundingBox:g,getRotationPoint:function(e){return{x:((t=g(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2};var t},getRotationOffset:function(e){return c(g(e))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),_=t.data.lblTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.labelStyleKey},drawElement:function(e,r,n,o,i){return t.drawElementText(e,r,n,o,"main",i)},getBoundingBox:d,getRotationPoint:function(e){return y("",m(e,"labelX","labelY"),e)},getRotationOffset:function(e){var t=d(e),r=c(d(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":r.x=-t.w;break;case"right":r.x=0}switch(e.pstyle("text-valign").value){case"top":r.y=-t.h;break;case"bottom":r.y=0}}return r},isVisible:f}),v=t.data.slbTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.sourceLabelStyleKey},drawElement:function(e,r,n,o,i){return t.drawElementText(e,r,n,o,"source",i)},getBoundingBox:p,getRotationPoint:function(e){return y("source",m(e,"sourceLabelX","sourceLabelY"),e)},getRotationOffset:function(e){return c(p(e))},isVisible:f}),S=t.data.tlbTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.targetLabelStyleKey},drawElement:function(e,r,n,o,i){return t.drawElementText(e,r,n,o,"target",i)},getBoundingBox:h,getRotationPoint:function(e){return y("target",m(e,"targetLabelX","targetLabelY"),e)},getRotationOffset:function(e){return c(h(e))},isVisible:f}),E=t.data.lyrTxrCache=new LayeredTextureCache(t);t.onUpdateEleCalcs((function(e,t){b.invalidateElements(t),_.invalidateElements(t),v.invalidateElements(t),S.invalidateElements(t),E.invalidateElements(t);for(var r=0;r<t.length;r++){var n=t[r]._private;n.oldBackgroundTimestamp=n.backgroundTimestamp}}));var w=function(e){for(var t=0;t<e.length;t++)E.enqueueElementRefinement(e[t].ele)};b.onDequeue(w),_.onDequeue(w),v.onDequeue(w),S.onDequeue(w)}CRp.CANVAS_LAYERS=3,CRp.SELECT_BOX=0,CRp.DRAG=1,CRp.NODE=2,CRp.BUFFER_COUNT=3,CRp.TEXTURE_BUFFER=0,CRp.MOTIONBLUR_BUFFER_NODE=1,CRp.MOTIONBLUR_BUFFER_DRAG=2,CRp.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[CRp.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[CRp.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[CRp.SELECT_BOX]=t}};var pathsImpld="undefined"!=typeof Path2D;CRp.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled},CRp.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},CRp.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},CRp.makeOffscreenCanvas=function(e,t){var r;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":_typeof(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=document.createElement("canvas")).width=e,r.height=t),r},[CRp$a,CRp$9,CRp$8,CRp$7,CRp$6,CRp$5,CRp$4,CRp$3,CRp$2,CRp$1].forEach((function(e){extend(CRp,e)}));var renderer=[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}],incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:renderer}],extensions={},modules={};function setExtension(e,t,r){var n=r,o=function(r){warn("Can not register `"+t+"` for `"+e+"` since `"+r+"` already exists in the prototype and can not be overridden")};if("core"===e){if(Core.prototype[t])return o(t);Core.prototype[t]=r}else if("collection"===e){if(Collection.prototype[t])return o(t);Collection.prototype[t]=r}else if("layout"===e){for(var i=function(e){this.options=e,r.call(this,e),plainObject(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},a=i.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=r.prototype.stop;a.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var g=function(e){return e._private.cy},d={addEventFields:function(e,t){t.layout=e,t.cy=g(e),t.target=e},bubble:function(){return!0},parent:function(e){return g(e)}};extend(a,{createEmitter:function(){return this._private.emitter=new Emitter(d,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),define.eventAliasesOn(a),n=i}else if("renderer"===e&&"null"!==t&&"base"!==t){var p=getExtension("renderer","base"),h=p.prototype,f=r,y=r.prototype,m=function(){p.apply(this,arguments),f.apply(this,arguments)},b=m.prototype;for(var _ in h){var v=h[_];if(null!=y[_])return o(_);b[_]=v}for(var S in y)b[S]=y[S];h.clientFunctions.forEach((function(e){b[e]=b[e]||function(){error("Renderer does not implement `renderer."+e+"()` on its prototype")}})),n=m}else if("__proto__"===e||"constructor"===e||"prototype"===e)return error(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[e,t],value:n})}function getExtension(e,t){return getMap({map:extensions,keys:[e,t]})}function setModule(e,t,r,n,o){return setMap({map:modules,keys:[e,t,r,n],value:o})}function getModule(e,t,r,n){return getMap({map:modules,keys:[e,t,r,n]})}var extension=function(){return 2===arguments.length?getExtension.apply(null,arguments):3===arguments.length?setExtension.apply(null,arguments):4===arguments.length?getModule.apply(null,arguments):5===arguments.length?setModule.apply(null,arguments):void error("Invalid extension access syntax")};Core.prototype.extension=extension,incExts.forEach((function(e){e.extensions.forEach((function(t){setExtension(e.type,t.name,t.impl)}))}));var Stylesheet=function e(){if(!(this instanceof e))return new e;this.length=0},sheetfn=Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"},sheetfn.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},sheetfn.css=function(e,t){var r=this.length-1;if(string(e))this[r].properties.push({name:e,value:t});else if(plainObject(e))for(var n=e,o=Object.keys(n),i=0;i<o.length;i++){var a=o[i],s=n[a];if(null!=s){var l=Style.properties[a]||Style.properties[dash2camel(a)];if(null!=l){var u=l.name,c=s;this[r].properties.push({name:u,value:c})}}}return this},sheetfn.style=sheetfn.css,sheetfn.generateStyle=function(e){var t=new Style(e);return this.appendToStyle(t)},sheetfn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],n=r.selector,o=r.properties;e.selector(n);for(var i=0;i<o.length;i++){var a=o[i];e.css(a.name,a.value)}}return e};var version$2="3.25.0",cytoscape$1=function(e){return void 0===e&&(e={}),plainObject(e)?new Core(e):string(e)?extension.apply(extension,arguments):void 0};cytoscape$1.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(cytoscape$1),e.apply(null,t),this},cytoscape$1.warnings=function(e){return warnings(e)},cytoscape$1.version=version$2,cytoscape$1.stylesheet=cytoscape$1.Stylesheet=Stylesheet;var cytoscape_cjs=cytoscape$1,cytoscape$2=getDefaultExportFromCjs(cytoscape_cjs),_stackClear,hasRequired_stackClear,_stackDelete,hasRequired_stackDelete,_stackGet,hasRequired_stackGet,_stackHas,hasRequired_stackHas,_stackSet,hasRequired_stackSet,_Stack,hasRequired_Stack,_arrayEach,hasRequired_arrayEach,_copyObject,hasRequired_copyObject,_baseTimes,hasRequired_baseTimes,_baseIsArguments,hasRequired_baseIsArguments,isArguments_1,hasRequiredIsArguments;function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var e=require_ListCache();return _stackClear=function(){this.__data__=new e,this.size=0}}function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;return hasRequired_stackDelete=1,_stackDelete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},_stackDelete}function require_stackGet(){if(hasRequired_stackGet)return _stackGet;return hasRequired_stackGet=1,_stackGet=function(e){return this.__data__.get(e)}}function require_stackHas(){if(hasRequired_stackHas)return _stackHas;return hasRequired_stackHas=1,_stackHas=function(e){return this.__data__.has(e)}}function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var e=require_ListCache(),t=require_Map(),r=_MapCache;return _stackSet=function(n,o){var i=this.__data__;if(i instanceof e){var a=i.__data__;if(!t||a.length<199)return a.push([n,o]),this.size=++i.size,this;i=this.__data__=new r(a)}return i.set(n,o),this.size=i.size,this},_stackSet}function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var e=require_ListCache(),t=require_stackClear(),r=require_stackDelete(),n=require_stackGet(),o=require_stackHas(),i=require_stackSet();function a(t){var r=this.__data__=new e(t);this.size=r.size}return a.prototype.clear=t,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=o,a.prototype.set=i,_Stack=a}function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;return hasRequired_arrayEach=1,_arrayEach=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},_arrayEach}function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var e=_assignValue,t=_baseAssignValue;return _copyObject=function(r,n,o,i){var a=!o;o||(o={});for(var s=-1,l=n.length;++s<l;){var u=n[s],c=i?i(o[u],r[u],u,o,r):void 0;void 0===c&&(c=r[u]),a?t(o,u,c):e(o,u,c)}return o},_copyObject}function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;return hasRequired_baseTimes=1,_baseTimes=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}}function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var e=_baseGetTag,t=isObjectLike_1;return _baseIsArguments=function(r){return t(r)&&"[object Arguments]"==e(r)}}function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var e=require_baseIsArguments(),t=isObjectLike_1,r=Object.prototype,n=r.hasOwnProperty,o=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(e){return t(e)&&n.call(e,"callee")&&!o.call(e,"callee")};return isArguments_1=i}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse,hasRequiredIsBuffer,isLength_1,hasRequiredIsLength,_baseIsTypedArray,hasRequired_baseIsTypedArray,_baseUnary,hasRequired_baseUnary;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;return hasRequiredStubFalse=1,stubFalse_1=function(){return!1}}function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,function(e,t){var r=_root,n=requireStubFalse(),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,s=(a?a.isBuffer:void 0)||n;e.exports=s}(isBuffer,isBuffer.exports)),isBuffer.exports}function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;return isLength_1=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}}function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var e=_baseGetTag,t=requireIsLength(),r=isObjectLike_1,n={};return n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object DataView]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1,_baseIsTypedArray=function(o){return r(o)&&t(o.length)&&!!n[e(o)]}}function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;return hasRequired_baseUnary=1,_baseUnary=function(e){return function(t){return e(t)}}}isBuffer.exports;var _nodeUtil={exports:{}},hasRequired_nodeUtil,isTypedArray_1,hasRequiredIsTypedArray,_arrayLikeKeys,hasRequired_arrayLikeKeys,_isPrototype,hasRequired_isPrototype,_overArg,hasRequired_overArg,_nativeKeys,hasRequired_nativeKeys,_baseKeys,hasRequired_baseKeys,isArrayLike_1,hasRequiredIsArrayLike,keys_1,hasRequiredKeys,_baseAssign,hasRequired_baseAssign,_nativeKeysIn,hasRequired_nativeKeysIn,_baseKeysIn,hasRequired_baseKeysIn,keysIn_1,hasRequiredKeysIn,_baseAssignIn,hasRequired_baseAssignIn;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,function(e,t){var r=_freeGlobal,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,i=o&&o.exports===n&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var e=require_baseIsTypedArray(),t=require_baseUnary(),r=require_nodeUtil(),n=r&&r.isTypedArray,o=n?t(n):e;return isTypedArray_1=o}function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var e=require_baseTimes(),t=requireIsArguments(),r=isArray_1,n=requireIsBuffer(),o=_isIndex,i=requireIsTypedArray(),a=Object.prototype.hasOwnProperty;return _arrayLikeKeys=function(s,l){var u=r(s),c=!u&&t(s),g=!u&&!c&&n(s),d=!u&&!c&&!g&&i(s),p=u||c||g||d,h=p?e(s.length,String):[],f=h.length;for(var y in s)!l&&!a.call(s,y)||p&&("length"==y||g&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||o(y,f))||h.push(y);return h}}function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var e=Object.prototype;return _isPrototype=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}}function require_overArg(){if(hasRequired_overArg)return _overArg;return hasRequired_overArg=1,_overArg=function(e,t){return function(r){return e(t(r))}}}function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var e=require_overArg()(Object.keys,Object);return _nativeKeys=e}function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var e=require_isPrototype(),t=require_nativeKeys(),r=Object.prototype.hasOwnProperty;return _baseKeys=function(n){if(!e(n))return t(n);var o=[];for(var i in Object(n))r.call(n,i)&&"constructor"!=i&&o.push(i);return o},_baseKeys}function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var e=requireIsFunction(),t=requireIsLength();return isArrayLike_1=function(r){return null!=r&&t(r.length)&&!e(r)}}function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var e=require_arrayLikeKeys(),t=require_baseKeys(),r=requireIsArrayLike();return keys_1=function(n){return r(n)?e(n):t(n)},keys_1}function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var e=require_copyObject(),t=requireKeys();return _baseAssign=function(r,n){return r&&e(n,t(n),r)},_baseAssign}function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;return hasRequired_nativeKeysIn=1,_nativeKeysIn=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},_nativeKeysIn}function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var e=isObject_1,t=require_isPrototype(),r=require_nativeKeysIn(),n=Object.prototype.hasOwnProperty;return _baseKeysIn=function(o){if(!e(o))return r(o);var i=t(o),a=[];for(var s in o)("constructor"!=s||!i&&n.call(o,s))&&a.push(s);return a},_baseKeysIn}function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var e=require_arrayLikeKeys(),t=require_baseKeysIn(),r=requireIsArrayLike();return keysIn_1=function(n){return r(n)?e(n,!0):t(n)},keysIn_1}function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var e=require_copyObject(),t=requireKeysIn();return _baseAssignIn=function(r,n){return r&&e(n,t(n),r)},_baseAssignIn}_nodeUtil.exports;var _cloneBuffer={exports:{}},hasRequired_cloneBuffer,_arrayFilter,hasRequired_arrayFilter,stubArray_1,hasRequiredStubArray,_getSymbols,hasRequired_getSymbols,_copySymbols,hasRequired_copySymbols,_arrayPush,hasRequired_arrayPush,_getPrototype,hasRequired_getPrototype,_getSymbolsIn,hasRequired_getSymbolsIn,_copySymbolsIn,hasRequired_copySymbolsIn,_baseGetAllKeys,hasRequired_baseGetAllKeys,_getAllKeys,hasRequired_getAllKeys,_getAllKeysIn,hasRequired_getAllKeysIn,_DataView,hasRequired_DataView,_Promise,hasRequired_Promise,_Set,hasRequired_Set,_WeakMap,hasRequired_WeakMap,_getTag,hasRequired_getTag,_initCloneArray,hasRequired_initCloneArray,_Uint8Array,hasRequired_Uint8Array,_cloneArrayBuffer,hasRequired_cloneArrayBuffer,_cloneDataView,hasRequired_cloneDataView,_cloneRegExp,hasRequired_cloneRegExp,_cloneSymbol,hasRequired_cloneSymbol,_cloneTypedArray,hasRequired_cloneTypedArray,_initCloneByTag,hasRequired_initCloneByTag,_baseCreate,hasRequired_baseCreate,_initCloneObject,hasRequired_initCloneObject,_baseIsMap,hasRequired_baseIsMap,isMap_1,hasRequiredIsMap,_baseIsSet,hasRequired_baseIsSet,isSet_1,hasRequiredIsSet,_baseClone,hasRequired_baseClone,clone_1,hasRequiredClone,constant_1,hasRequiredConstant,_createBaseFor,hasRequired_createBaseFor,_baseFor,hasRequired_baseFor,_baseForOwn,hasRequired_baseForOwn,_createBaseEach,hasRequired_createBaseEach,_baseEach,hasRequired_baseEach,identity_1,hasRequiredIdentity,_castFunction,hasRequired_castFunction,forEach_1,hasRequiredForEach,each,hasRequiredEach,_baseFilter,hasRequired_baseFilter,_setCacheAdd,hasRequired_setCacheAdd,_setCacheHas,hasRequired_setCacheHas,_SetCache,hasRequired_SetCache,_arraySome,hasRequired_arraySome,_cacheHas,hasRequired_cacheHas,_equalArrays,hasRequired_equalArrays,_mapToArray,hasRequired_mapToArray,_setToArray,hasRequired_setToArray,_equalByTag,hasRequired_equalByTag,_equalObjects,hasRequired_equalObjects,_baseIsEqualDeep,hasRequired_baseIsEqualDeep,_baseIsEqual,hasRequired_baseIsEqual,_baseIsMatch,hasRequired_baseIsMatch,_isStrictComparable,hasRequired_isStrictComparable,_getMatchData,hasRequired_getMatchData,_matchesStrictComparable,hasRequired_matchesStrictComparable,_baseMatches,hasRequired_baseMatches,_baseHasIn,hasRequired_baseHasIn,_hasPath,hasRequired_hasPath,hasIn_1,hasRequiredHasIn,_baseMatchesProperty,hasRequired_baseMatchesProperty,_baseProperty,hasRequired_baseProperty,_basePropertyDeep,hasRequired_basePropertyDeep,property_1,hasRequiredProperty,_baseIteratee,hasRequired_baseIteratee,filter_1,hasRequiredFilter,_baseHas,hasRequired_baseHas,has_1,hasRequiredHas,isEmpty_1,hasRequiredIsEmpty,isUndefined_1,hasRequiredIsUndefined,_baseMap,hasRequired_baseMap,map_1,hasRequiredMap,_arrayReduce,hasRequired_arrayReduce,_baseReduce,hasRequired_baseReduce,reduce_1,hasRequiredReduce,isString_1,hasRequiredIsString,_asciiSize,hasRequired_asciiSize,_hasUnicode,hasRequired_hasUnicode,_unicodeSize,hasRequired_unicodeSize,_stringSize,hasRequired_stringSize,size_1,hasRequiredSize,transform_1,hasRequiredTransform,_isFlattenable,hasRequired_isFlattenable,_baseFlatten,hasRequired_baseFlatten,_apply,hasRequired_apply,_overRest,hasRequired_overRest,_baseSetToString,hasRequired_baseSetToString,_shortOut,hasRequired_shortOut,_setToString,hasRequired_setToString,_baseRest,hasRequired_baseRest,_baseFindIndex,hasRequired_baseFindIndex,_baseIsNaN,hasRequired_baseIsNaN,_strictIndexOf,hasRequired_strictIndexOf,_baseIndexOf,hasRequired_baseIndexOf,_arrayIncludes,hasRequired_arrayIncludes,_arrayIncludesWith,hasRequired_arrayIncludesWith,noop_1,hasRequiredNoop,_createSet,hasRequired_createSet,_baseUniq,hasRequired_baseUniq,isArrayLikeObject_1,hasRequiredIsArrayLikeObject,union_1,hasRequiredUnion,_baseValues,hasRequired_baseValues,values_1,hasRequiredValues,lodash;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,function(e,t){var r=_root,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,i=o&&o.exports===n?r.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;return hasRequired_arrayFilter=1,_arrayFilter=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i},_arrayFilter}function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;return hasRequiredStubArray=1,stubArray_1=function(){return[]}}function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var e=require_arrayFilter(),t=requireStubArray(),r=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols,o=n?function(t){return null==t?[]:(t=Object(t),e(n(t),(function(e){return r.call(t,e)})))}:t;return _getSymbols=o}function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var e=require_copyObject(),t=require_getSymbols();return _copySymbols=function(r,n){return e(r,t(r),n)},_copySymbols}function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;return hasRequired_arrayPush=1,_arrayPush=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},_arrayPush}function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var e=require_overArg()(Object.getPrototypeOf,Object);return _getPrototype=e}function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var e=require_arrayPush(),t=require_getPrototype(),r=require_getSymbols(),n=requireStubArray(),o=Object.getOwnPropertySymbols?function(n){for(var o=[];n;)e(o,r(n)),n=t(n);return o}:n;return _getSymbolsIn=o}function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var e=require_copyObject(),t=require_getSymbolsIn();return _copySymbolsIn=function(r,n){return e(r,t(r),n)},_copySymbolsIn}function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var e=require_arrayPush(),t=isArray_1;return _baseGetAllKeys=function(r,n,o){var i=n(r);return t(r)?i:e(i,o(r))},_baseGetAllKeys}function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var e=require_baseGetAllKeys(),t=require_getSymbols(),r=requireKeys();return _getAllKeys=function(n){return e(n,r,t)},_getAllKeys}function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var e=require_baseGetAllKeys(),t=require_getSymbolsIn(),r=requireKeysIn();return _getAllKeysIn=function(n){return e(n,r,t)},_getAllKeysIn}function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var e=_getNative(_root,"DataView");return _DataView=e}function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var e=_getNative(_root,"Promise");return _Promise=e}function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var e=_getNative(_root,"Set");return _Set=e}function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var e=_getNative(_root,"WeakMap");return _WeakMap=e}function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var e=require_DataView(),t=require_Map(),r=require_Promise(),n=require_Set(),o=require_WeakMap(),i=_baseGetTag,a=require_toSource(),s="[object Map]",l="[object Promise]",u="[object Set]",c="[object WeakMap]",g="[object DataView]",d=a(e),p=a(t),h=a(r),f=a(n),y=a(o),m=i;return(e&&m(new e(new ArrayBuffer(1)))!=g||t&&m(new t)!=s||r&&m(r.resolve())!=l||n&&m(new n)!=u||o&&m(new o)!=c)&&(m=function(e){var t=i(e),r="[object Object]"==t?e.constructor:void 0,n=r?a(r):"";if(n)switch(n){case d:return g;case p:return s;case h:return l;case f:return u;case y:return c}return t}),_getTag=m}function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var e=Object.prototype.hasOwnProperty;return _initCloneArray=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n},_initCloneArray}function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var e=_root.Uint8Array;return _Uint8Array=e}function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var e=require_Uint8Array();return _cloneArrayBuffer=function(t){var r=new t.constructor(t.byteLength);return new e(r).set(new e(t)),r}}function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var e=require_cloneArrayBuffer();return _cloneDataView=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}}function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var e=/\w*$/;return _cloneRegExp=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}}function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var e=_Symbol?_Symbol.prototype:void 0,t=e?e.valueOf:void 0;return _cloneSymbol=function(e){return t?Object(t.call(e)):{}}}function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var e=require_cloneArrayBuffer();return _cloneTypedArray=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}}function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var e=require_cloneArrayBuffer(),t=require_cloneDataView(),r=require_cloneRegExp(),n=require_cloneSymbol(),o=require_cloneTypedArray();return _initCloneByTag=function(i,a,s){var l=i.constructor;switch(a){case"[object ArrayBuffer]":return e(i);case"[object Boolean]":case"[object Date]":return new l(+i);case"[object DataView]":return t(i,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o(i,s);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(i);case"[object RegExp]":return r(i);case"[object Symbol]":return n(i)}},_initCloneByTag}function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var e=isObject_1,t=Object.create,r=function(){function r(){}return function(n){if(!e(n))return{};if(t)return t(n);r.prototype=n;var o=new r;return r.prototype=void 0,o}}();return _baseCreate=r}function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var e=require_baseCreate(),t=require_getPrototype(),r=require_isPrototype();return _initCloneObject=function(n){return"function"!=typeof n.constructor||r(n)?{}:e(t(n))},_initCloneObject}function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var e=require_getTag(),t=isObjectLike_1;return _baseIsMap=function(r){return t(r)&&"[object Map]"==e(r)}}function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var e=require_baseIsMap(),t=require_baseUnary(),r=require_nodeUtil(),n=r&&r.isMap,o=n?t(n):e;return isMap_1=o}function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var e=require_getTag(),t=isObjectLike_1;return _baseIsSet=function(r){return t(r)&&"[object Set]"==e(r)}}function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var e=require_baseIsSet(),t=require_baseUnary(),r=require_nodeUtil(),n=r&&r.isSet,o=n?t(n):e;return isSet_1=o}function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var e=require_Stack(),t=require_arrayEach(),r=_assignValue,n=require_baseAssign(),o=require_baseAssignIn(),i=require_cloneBuffer(),a=_copyArray,s=require_copySymbols(),l=require_copySymbolsIn(),u=require_getAllKeys(),c=require_getAllKeysIn(),g=require_getTag(),d=require_initCloneArray(),p=require_initCloneByTag(),h=require_initCloneObject(),f=isArray_1,y=requireIsBuffer(),m=requireIsMap(),b=isObject_1,_=requireIsSet(),v=requireKeys(),S=requireKeysIn(),E="[object Arguments]",w="[object Function]",x="[object Object]",T={};return T[E]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[x]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[w]=T["[object WeakMap]"]=!1,_baseClone=function R(A,j,C,P,I,M){var O,B=1&j,N=2&j,k=4&j;if(C&&(O=I?C(A,P,I,M):C(A)),void 0!==O)return O;if(!b(A))return A;var D=f(A);if(D){if(O=d(A),!B)return a(A,O)}else{var q=g(A),$=q==w||"[object GeneratorFunction]"==q;if(y(A))return i(A,B);if(q==x||q==E||$&&!I){if(O=N||$?{}:h(A),!B)return N?l(A,o(O,A)):s(A,n(O,A))}else{if(!T[q])return I?A:{};O=p(A,q,B)}}M||(M=new e);var F=M.get(A);if(F)return F;M.set(A,O),_(A)?A.forEach((function(e){O.add(R(e,j,C,e,A,M))})):m(A)&&A.forEach((function(e,t){O.set(t,R(e,j,C,t,A,M))}));var L=D?void 0:(k?N?c:u:N?S:v)(A);return t(L||A,(function(e,t){L&&(e=A[t=e]),r(O,t,R(e,j,C,t,A,M))})),O},_baseClone}function requireClone(){if(hasRequiredClone)return clone_1;hasRequiredClone=1;var e=require_baseClone();return clone_1=function(t){return e(t,4)}}function requireConstant(){if(hasRequiredConstant)return constant_1;return hasRequiredConstant=1,constant_1=function(e){return function(){return e}}}function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;return hasRequired_createBaseFor=1,_createBaseFor=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===r(i[l],l,i))break}return t}},_createBaseFor}function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var e=require_createBaseFor()();return _baseFor=e}function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var e=require_baseFor(),t=requireKeys();return _baseForOwn=function(r,n){return r&&e(r,n,t)},_baseForOwn}function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var e=requireIsArrayLike();return _createBaseEach=function(t,r){return function(n,o){if(null==n)return n;if(!e(n))return t(n,o);for(var i=n.length,a=r?i:-1,s=Object(n);(r?a--:++a<i)&&!1!==o(s[a],a,s););return n}},_createBaseEach}function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var e=require_baseForOwn(),t=require_createBaseEach()(e);return _baseEach=t}function requireIdentity(){if(hasRequiredIdentity)return identity_1;return hasRequiredIdentity=1,identity_1=function(e){return e}}function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var e=requireIdentity();return _castFunction=function(t){return"function"==typeof t?t:e}}function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var e=require_arrayEach(),t=require_baseEach(),r=require_castFunction(),n=isArray_1;return forEach_1=function(o,i){return(n(o)?e:t)(o,r(i))},forEach_1}function requireEach(){return hasRequiredEach?each:(hasRequiredEach=1,each=requireForEach())}function require_baseFilter(){if(hasRequired_baseFilter)return _baseFilter;hasRequired_baseFilter=1;var e=require_baseEach();return _baseFilter=function(t,r){var n=[];return e(t,(function(e,t,o){r(e,t,o)&&n.push(e)})),n},_baseFilter}function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;return _setCacheAdd=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}}function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;return hasRequired_setCacheHas=1,_setCacheHas=function(e){return this.__data__.has(e)}}function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var e=_MapCache,t=require_setCacheAdd(),r=require_setCacheHas();function n(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new e;++r<n;)this.add(t[r])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,_SetCache=n}function require_arraySome(){if(hasRequired_arraySome)return _arraySome;return hasRequired_arraySome=1,_arraySome=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},_arraySome}function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;return hasRequired_cacheHas=1,_cacheHas=function(e,t){return e.has(t)},_cacheHas}function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var e=require_SetCache(),t=require_arraySome(),r=require_cacheHas();return _equalArrays=function(n,o,i,a,s,l){var u=1&i,c=n.length,g=o.length;if(c!=g&&!(u&&g>c))return!1;var d=l.get(n),p=l.get(o);if(d&&p)return d==o&&p==n;var h=-1,f=!0,y=2&i?new e:void 0;for(l.set(n,o),l.set(o,n);++h<c;){var m=n[h],b=o[h];if(a)var _=u?a(b,m,h,o,n,l):a(m,b,h,n,o,l);if(void 0!==_){if(_)continue;f=!1;break}if(y){if(!t(o,(function(e,t){if(!r(y,t)&&(m===e||s(m,e,i,a,l)))return y.push(t)}))){f=!1;break}}else if(m!==b&&!s(m,b,i,a,l)){f=!1;break}}return l.delete(n),l.delete(o),f},_equalArrays}function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;return hasRequired_mapToArray=1,_mapToArray=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}}function require_setToArray(){if(hasRequired_setToArray)return _setToArray;return hasRequired_setToArray=1,_setToArray=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},_setToArray}function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var e=_Symbol,t=require_Uint8Array(),r=eq_1,n=require_equalArrays(),o=require_mapToArray(),i=require_setToArray(),a=e?e.prototype:void 0,s=a?a.valueOf:void 0;return _equalByTag=function(e,a,l,u,c,g,d){switch(l){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=a.byteLength||!g(new t(e),new t(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var p=o;case"[object Set]":var h=1&u;if(p||(p=i),e.size!=a.size&&!h)return!1;var f=d.get(e);if(f)return f==a;u|=2,d.set(e,a);var y=n(p(e),p(a),u,c,g,d);return d.delete(e),y;case"[object Symbol]":if(s)return s.call(e)==s.call(a)}return!1},_equalByTag}function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var e=require_getAllKeys(),t=Object.prototype.hasOwnProperty;return _equalObjects=function(r,n,o,i,a,s){var l=1&o,u=e(r),c=u.length;if(c!=e(n).length&&!l)return!1;for(var g=c;g--;){var d=u[g];if(!(l?d in n:t.call(n,d)))return!1}var p=s.get(r),h=s.get(n);if(p&&h)return p==n&&h==r;var f=!0;s.set(r,n),s.set(n,r);for(var y=l;++g<c;){var m=r[d=u[g]],b=n[d];if(i)var _=l?i(b,m,d,n,r,s):i(m,b,d,r,n,s);if(!(void 0===_?m===b||a(m,b,o,i,s):_)){f=!1;break}y||(y="constructor"==d)}if(f&&!y){var v=r.constructor,S=n.constructor;v==S||!("constructor"in r)||!("constructor"in n)||"function"==typeof v&&v instanceof v&&"function"==typeof S&&S instanceof S||(f=!1)}return s.delete(r),s.delete(n),f},_equalObjects}function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var e=require_Stack(),t=require_equalArrays(),r=require_equalByTag(),n=require_equalObjects(),o=require_getTag(),i=isArray_1,a=requireIsBuffer(),s=requireIsTypedArray(),l="[object Arguments]",u="[object Array]",c="[object Object]",g=Object.prototype.hasOwnProperty;return _baseIsEqualDeep=function(d,p,h,f,y,m){var b=i(d),_=i(p),v=b?u:o(d),S=_?u:o(p),E=(v=v==l?c:v)==c,w=(S=S==l?c:S)==c,x=v==S;if(x&&a(d)){if(!a(p))return!1;b=!0,E=!1}if(x&&!E)return m||(m=new e),b||s(d)?t(d,p,h,f,y,m):r(d,p,v,h,f,y,m);if(!(1&h)){var T=E&&g.call(d,"__wrapped__"),R=w&&g.call(p,"__wrapped__");if(T||R){var A=T?d.value():d,j=R?p.value():p;return m||(m=new e),y(A,j,h,f,m)}}return!!x&&(m||(m=new e),n(d,p,h,f,y,m))},_baseIsEqualDeep}function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var e=require_baseIsEqualDeep(),t=isObjectLike_1;return _baseIsEqual=function r(n,o,i,a,s){return n===o||(null==n||null==o||!t(n)&&!t(o)?n!=n&&o!=o:e(n,o,i,a,r,s))},_baseIsEqual}function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var e=require_Stack(),t=require_baseIsEqual();return _baseIsMatch=function(r,n,o,i){var a=o.length,s=a,l=!i;if(null==r)return!s;for(r=Object(r);a--;){var u=o[a];if(l&&u[2]?u[1]!==r[u[0]]:!(u[0]in r))return!1}for(;++a<s;){var c=(u=o[a])[0],g=r[c],d=u[1];if(l&&u[2]){if(void 0===g&&!(c in r))return!1}else{var p=new e;if(i)var h=i(g,d,c,r,n,p);if(!(void 0===h?t(d,g,3,i,p):h))return!1}}return!0},_baseIsMatch}function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var e=isObject_1;return _isStrictComparable=function(t){return t==t&&!e(t)}}function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var e=require_isStrictComparable(),t=requireKeys();return _getMatchData=function(r){for(var n=t(r),o=n.length;o--;){var i=n[o],a=r[i];n[o]=[i,a,e(a)]}return n},_getMatchData}function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;return hasRequired_matchesStrictComparable=1,_matchesStrictComparable=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},_matchesStrictComparable}function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var e=require_baseIsMatch(),t=require_getMatchData(),r=require_matchesStrictComparable();return _baseMatches=function(n){var o=t(n);return 1==o.length&&o[0][2]?r(o[0][0],o[0][1]):function(t){return t===n||e(t,n,o)}},_baseMatches}function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;return hasRequired_baseHasIn=1,_baseHasIn=function(e,t){return null!=e&&t in Object(e)},_baseHasIn}function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var e=_castPath,t=requireIsArguments(),r=isArray_1,n=_isIndex,o=requireIsLength(),i=_toKey;return _hasPath=function(a,s,l){for(var u=-1,c=(s=e(s,a)).length,g=!1;++u<c;){var d=i(s[u]);if(!(g=null!=a&&l(a,d)))break;a=a[d]}return g||++u!=c?g:!!(c=null==a?0:a.length)&&o(c)&&n(d,c)&&(r(a)||t(a))},_hasPath}function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var e=require_baseHasIn(),t=require_hasPath();return hasIn_1=function(r,n){return null!=r&&t(r,n,e)},hasIn_1}function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var e=require_baseIsEqual(),t=get_1,r=requireHasIn(),n=_isKey,o=require_isStrictComparable(),i=require_matchesStrictComparable(),a=_toKey;return _baseMatchesProperty=function(s,l){return n(s)&&o(l)?i(a(s),l):function(n){var o=t(n,s);return void 0===o&&o===l?r(n,s):e(l,o,3)}},_baseMatchesProperty}function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;return hasRequired_baseProperty=1,_baseProperty=function(e){return function(t){return null==t?void 0:t[e]}},_baseProperty}function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var e=_baseGet;return _basePropertyDeep=function(t){return function(r){return e(r,t)}},_basePropertyDeep}function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var e=require_baseProperty(),t=require_basePropertyDeep(),r=_isKey,n=_toKey;return property_1=function(o){return r(o)?e(n(o)):t(o)}}function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var e=require_baseMatches(),t=require_baseMatchesProperty(),r=requireIdentity(),n=isArray_1,o=requireProperty();return _baseIteratee=function(i){return"function"==typeof i?i:null==i?r:"object"==typeof i?n(i)?t(i[0],i[1]):e(i):o(i)}}function requireFilter(){if(hasRequiredFilter)return filter_1;hasRequiredFilter=1;var e=require_arrayFilter(),t=require_baseFilter(),r=require_baseIteratee(),n=isArray_1;return filter_1=function(o,i){return(n(o)?e:t)(o,r(i,3))},filter_1}function require_baseHas(){if(hasRequired_baseHas)return _baseHas;hasRequired_baseHas=1;var e=Object.prototype.hasOwnProperty;return _baseHas=function(t,r){return null!=t&&e.call(t,r)},_baseHas}function requireHas(){if(hasRequiredHas)return has_1;hasRequiredHas=1;var e=require_baseHas(),t=require_hasPath();return has_1=function(r,n){return null!=r&&t(r,n,e)},has_1}function requireIsEmpty(){if(hasRequiredIsEmpty)return isEmpty_1;hasRequiredIsEmpty=1;var e=require_baseKeys(),t=require_getTag(),r=requireIsArguments(),n=isArray_1,o=requireIsArrayLike(),i=requireIsBuffer(),a=require_isPrototype(),s=requireIsTypedArray(),l=Object.prototype.hasOwnProperty;return isEmpty_1=function(u){if(null==u)return!0;if(o(u)&&(n(u)||"string"==typeof u||"function"==typeof u.splice||i(u)||s(u)||r(u)))return!u.length;var c=t(u);if("[object Map]"==c||"[object Set]"==c)return!u.size;if(a(u))return!e(u).length;for(var g in u)if(l.call(u,g))return!1;return!0}}function requireIsUndefined(){if(hasRequiredIsUndefined)return isUndefined_1;return hasRequiredIsUndefined=1,isUndefined_1=function(e){return void 0===e}}function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var e=require_baseEach(),t=requireIsArrayLike();return _baseMap=function(r,n){var o=-1,i=t(r)?Array(r.length):[];return e(r,(function(e,t,r){i[++o]=n(e,t,r)})),i},_baseMap}function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var e=_arrayMap,t=require_baseIteratee(),r=require_baseMap(),n=isArray_1;return map_1=function(o,i){return(n(o)?e:r)(o,t(i,3))},map_1}function require_arrayReduce(){if(hasRequired_arrayReduce)return _arrayReduce;return hasRequired_arrayReduce=1,_arrayReduce=function(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r},_arrayReduce}function require_baseReduce(){if(hasRequired_baseReduce)return _baseReduce;return hasRequired_baseReduce=1,_baseReduce=function(e,t,r,n,o){return o(e,(function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)})),r},_baseReduce}function requireReduce(){if(hasRequiredReduce)return reduce_1;hasRequiredReduce=1;var e=require_arrayReduce(),t=require_baseEach(),r=require_baseIteratee(),n=require_baseReduce(),o=isArray_1;return reduce_1=function(i,a,s){var l=o(i)?e:n,u=arguments.length<3;return l(i,r(a,4),s,u,t)},reduce_1}function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var e=_baseGetTag,t=isArray_1,r=isObjectLike_1;return isString_1=function(n){return"string"==typeof n||!t(n)&&r(n)&&"[object String]"==e(n)}}function require_asciiSize(){if(hasRequired_asciiSize)return _asciiSize;hasRequired_asciiSize=1;var e=require_baseProperty()("length");return _asciiSize=e}function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");return _hasUnicode=function(t){return e.test(t)},_hasUnicode}function require_unicodeSize(){if(hasRequired_unicodeSize)return _unicodeSize;hasRequired_unicodeSize=1;var e="\\ud800-\\udfff",t="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+n+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+s+("(?:\\u200d(?:"+[o,i,a].join("|")+")"+l+s+")*"),c="(?:"+[o+r+"?",r,i,a,t].join("|")+")",g=RegExp(n+"(?="+n+")|"+c+u,"g");return _unicodeSize=function(e){for(var t=g.lastIndex=0;g.test(e);)++t;return t},_unicodeSize}function require_stringSize(){if(hasRequired_stringSize)return _stringSize;hasRequired_stringSize=1;var e=require_asciiSize(),t=require_hasUnicode(),r=require_unicodeSize();return _stringSize=function(n){return t(n)?r(n):e(n)},_stringSize}function requireSize(){if(hasRequiredSize)return size_1;hasRequiredSize=1;var e=require_baseKeys(),t=require_getTag(),r=requireIsArrayLike(),n=requireIsString(),o=require_stringSize();return size_1=function(i){if(null==i)return 0;if(r(i))return n(i)?o(i):i.length;var a=t(i);return"[object Map]"==a||"[object Set]"==a?i.size:e(i).length},size_1}function requireTransform(){if(hasRequiredTransform)return transform_1;hasRequiredTransform=1;var e=require_arrayEach(),t=require_baseCreate(),r=require_baseForOwn(),n=require_baseIteratee(),o=require_getPrototype(),i=isArray_1,a=requireIsBuffer(),s=requireIsFunction(),l=isObject_1,u=requireIsTypedArray();return transform_1=function(c,g,d){var p=i(c),h=p||a(c)||u(c);if(g=n(g,4),null==d){var f=c&&c.constructor;d=h?p?new f:[]:l(c)&&s(f)?t(o(c)):{}}return(h?e:r)(c,(function(e,t,r){return g(d,e,t,r)})),d},transform_1}function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var e=_Symbol,t=requireIsArguments(),r=isArray_1,n=e?e.isConcatSpreadable:void 0;return _isFlattenable=function(e){return r(e)||t(e)||!!(n&&e&&e[n])}}function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var e=require_arrayPush(),t=require_isFlattenable();return _baseFlatten=function r(n,o,i,a,s){var l=-1,u=n.length;for(i||(i=t),s||(s=[]);++l<u;){var c=n[l];o>0&&i(c)?o>1?r(c,o-1,i,a,s):e(s,c):a||(s[s.length]=c)}return s},_baseFlatten}function require_apply(){if(hasRequired_apply)return _apply;return hasRequired_apply=1,_apply=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}}function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var e=require_apply(),t=Math.max;return _overRest=function(r,n,o){return n=t(void 0===n?r.length-1:n,0),function(){for(var i=arguments,a=-1,s=t(i.length-n,0),l=Array(s);++a<s;)l[a]=i[n+a];a=-1;for(var u=Array(n+1);++a<n;)u[a]=i[a];return u[n]=o(l),e(r,this,u)}},_overRest}function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var e=requireConstant(),t=_defineProperty$1,r=requireIdentity(),n=t?function(r,n){return t(r,"toString",{configurable:!0,enumerable:!1,value:e(n),writable:!0})}:r;return _baseSetToString=n}function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var e=Date.now;return _shortOut=function(t){var r=0,n=0;return function(){var o=e(),i=16-(o-n);if(n=o,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},_shortOut}function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var e=require_baseSetToString(),t=require_shortOut()(e);return _setToString=t}function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var e=requireIdentity(),t=require_overRest(),r=require_setToString();return _baseRest=function(n,o){return r(t(n,o,e),n+"")}}function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;return hasRequired_baseFindIndex=1,_baseFindIndex=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1},_baseFindIndex}function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;return hasRequired_baseIsNaN=1,_baseIsNaN=function(e){return e!=e}}function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;return hasRequired_strictIndexOf=1,_strictIndexOf=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1},_strictIndexOf}function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var e=require_baseFindIndex(),t=require_baseIsNaN(),r=require_strictIndexOf();return _baseIndexOf=function(n,o,i){return o==o?r(n,o,i):e(n,t,i)},_baseIndexOf}function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var e=require_baseIndexOf();return _arrayIncludes=function(t,r){return!!(null==t?0:t.length)&&e(t,r,0)>-1},_arrayIncludes}function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;return hasRequired_arrayIncludesWith=1,_arrayIncludesWith=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1},_arrayIncludesWith}function requireNoop(){if(hasRequiredNoop)return noop_1;return hasRequiredNoop=1,noop_1=function(){}}function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var e=require_Set(),t=requireNoop(),r=require_setToArray(),n=e&&1/r(new e([,-0]))[1]==1/0?function(t){return new e(t)}:t;return _createSet=n}function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var e=require_SetCache(),t=require_arrayIncludes(),r=require_arrayIncludesWith(),n=require_cacheHas(),o=require_createSet(),i=require_setToArray();return _baseUniq=function(a,s,l){var u=-1,c=t,g=a.length,d=!0,p=[],h=p;if(l)d=!1,c=r;else if(g>=200){var f=s?null:o(a);if(f)return i(f);d=!1,c=n,h=new e}else h=s?[]:p;e:for(;++u<g;){var y=a[u],m=s?s(y):y;if(y=l||0!==y?y:0,d&&m==m){for(var b=h.length;b--;)if(h[b]===m)continue e;s&&h.push(m),p.push(y)}else c(h,m,l)||(h!==p&&h.push(m),p.push(y))}return p},_baseUniq}function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var e=requireIsArrayLike(),t=isObjectLike_1;return isArrayLikeObject_1=function(r){return t(r)&&e(r)}}function requireUnion(){if(hasRequiredUnion)return union_1;hasRequiredUnion=1;var e=require_baseFlatten(),t=require_baseRest(),r=require_baseUniq(),n=requireIsArrayLikeObject(),o=t((function(t){return r(e(t,1,n,!0))}));return union_1=o}function require_baseValues(){if(hasRequired_baseValues)return _baseValues;hasRequired_baseValues=1;var e=_arrayMap;return _baseValues=function(t,r){return e(r,(function(e){return t[e]}))},_baseValues}function requireValues(){if(hasRequiredValues)return values_1;hasRequiredValues=1;var e=require_baseValues(),t=requireKeys();return values_1=function(r){return null==r?[]:e(r,t(r))},values_1}if(_cloneBuffer.exports,"function"==typeof commonjsRequire)try{lodash={clone:requireClone(),constant:requireConstant(),each:requireEach(),filter:requireFilter(),has:requireHas(),isArray:isArray_1,isEmpty:requireIsEmpty(),isFunction:requireIsFunction(),isUndefined:requireIsUndefined(),keys:requireKeys(),map:requireMap(),reduce:requireReduce(),size:requireSize(),transform:requireTransform(),union:requireUnion(),values:requireValues()}}catch(e){}lodash||(lodash=window._);var lodash_1$1=lodash,_$b=lodash_1$1,graph=Graph$2,DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";function Graph$2(e){this._isDirected=!_$b.has(e,"directed")||e.directed,this._isMultigraph=!!_$b.has(e,"multigraph")&&e.multigraph,this._isCompound=!!_$b.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=_$b.constant(void 0),this._defaultEdgeLabelFn=_$b.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function incrementOrInitEntry(e,t){e[t]?e[t]++:e[t]=1}function decrementOrRemoveEntry(e,t){--e[t]||delete e[t]}function edgeArgsToId(e,t,r,n){var o=""+t,i=""+r;if(!e&&o>i){var a=o;o=i,i=a}return o+EDGE_KEY_DELIM+i+EDGE_KEY_DELIM+(_$b.isUndefined(n)?DEFAULT_EDGE_NAME:n)}function edgeArgsToObj(e,t,r,n){var o=""+t,i=""+r;if(!e&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return n&&(s.name=n),s}function edgeObjToId(e,t){return edgeArgsToId(e,t.v,t.w,t.name)}Graph$2.prototype._nodeCount=0,Graph$2.prototype._edgeCount=0,Graph$2.prototype.isDirected=function(){return this._isDirected},Graph$2.prototype.isMultigraph=function(){return this._isMultigraph},Graph$2.prototype.isCompound=function(){return this._isCompound},Graph$2.prototype.setGraph=function(e){return this._label=e,this},Graph$2.prototype.graph=function(){return this._label},Graph$2.prototype.setDefaultNodeLabel=function(e){return _$b.isFunction(e)||(e=_$b.constant(e)),this._defaultNodeLabelFn=e,this},Graph$2.prototype.nodeCount=function(){return this._nodeCount},Graph$2.prototype.nodes=function(){return _$b.keys(this._nodes)},Graph$2.prototype.sources=function(){var e=this;return _$b.filter(this.nodes(),(function(t){return _$b.isEmpty(e._in[t])}))},Graph$2.prototype.sinks=function(){var e=this;return _$b.filter(this.nodes(),(function(t){return _$b.isEmpty(e._out[t])}))},Graph$2.prototype.setNodes=function(e,t){var r=arguments,n=this;return _$b.each(e,(function(e){r.length>1?n.setNode(e,t):n.setNode(e)})),this},Graph$2.prototype.setNode=function(e,t){return _$b.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=GRAPH_NODE,this._children[e]={},this._children[GRAPH_NODE][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Graph$2.prototype.node=function(e){return this._nodes[e]},Graph$2.prototype.hasNode=function(e){return _$b.has(this._nodes,e)},Graph$2.prototype.removeNode=function(e){var t=this;if(_$b.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],_$b.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),_$b.each(_$b.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],_$b.each(_$b.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Graph$2.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_$b.isUndefined(t))t=GRAPH_NODE;else{for(var r=t+="";!_$b.isUndefined(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Graph$2.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Graph$2.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==GRAPH_NODE)return t}},Graph$2.prototype.children=function(e){if(_$b.isUndefined(e)&&(e=GRAPH_NODE),this._isCompound){var t=this._children[e];if(t)return _$b.keys(t)}else{if(e===GRAPH_NODE)return this.nodes();if(this.hasNode(e))return[]}},Graph$2.prototype.predecessors=function(e){var t=this._preds[e];if(t)return _$b.keys(t)},Graph$2.prototype.successors=function(e){var t=this._sucs[e];if(t)return _$b.keys(t)},Graph$2.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return _$b.union(t,this.successors(e))},Graph$2.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},Graph$2.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;_$b.each(this._nodes,(function(r,n){e(n)&&t.setNode(n,r)})),_$b.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))}));var n={};function o(e){var i=r.parent(e);return void 0===i||t.hasNode(i)?(n[e]=i,i):i in n?n[i]:o(i)}return this._isCompound&&_$b.each(t.nodes(),(function(e){t.setParent(e,o(e))})),t},Graph$2.prototype.setDefaultEdgeLabel=function(e){return _$b.isFunction(e)||(e=_$b.constant(e)),this._defaultEdgeLabelFn=e,this},Graph$2.prototype.edgeCount=function(){return this._edgeCount},Graph$2.prototype.edges=function(){return _$b.values(this._edgeObjs)},Graph$2.prototype.setPath=function(e,t){var r=this,n=arguments;return _$b.reduce(e,(function(e,o){return n.length>1?r.setEdge(e,o,t):r.setEdge(e,o),o})),this},Graph$2.prototype.setEdge=function(){var e,t,r,n,o=!1,i=arguments[0];"object"==typeof i&&null!==i&&"v"in i?(e=i.v,t=i.w,r=i.name,2===arguments.length&&(n=arguments[1],o=!0)):(e=i,t=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],o=!0)),e=""+e,t=""+t,_$b.isUndefined(r)||(r=""+r);var a=edgeArgsToId(this._isDirected,e,t,r);if(_$b.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=n),this;if(!_$b.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=o?n:this._defaultEdgeLabelFn(e,t,r);var s=edgeArgsToObj(this._isDirected,e,t,r);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,incrementOrInitEntry(this._preds[t],e),incrementOrInitEntry(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this},Graph$2.prototype.edge=function(e,t,r){var n=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,e,t,r);return this._edgeLabels[n]},Graph$2.prototype.hasEdge=function(e,t,r){var n=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,e,t,r);return _$b.has(this._edgeLabels,n)},Graph$2.prototype.removeEdge=function(e,t,r){var n=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,e,t,r),o=this._edgeObjs[n];return o&&(e=o.v,t=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],decrementOrRemoveEntry(this._preds[t],e),decrementOrRemoveEntry(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},Graph$2.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var n=_$b.values(r);return t?_$b.filter(n,(function(e){return e.v===t})):n}},Graph$2.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var n=_$b.values(r);return t?_$b.filter(n,(function(e){return e.w===t})):n}},Graph$2.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))};var version$1="2.1.8",lib$1={Graph:graph,version:version$1},_$a=lodash_1$1,Graph$1=graph,json={write:write,read:read};function write(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:writeNodes(e),edges:writeEdges(e)};return _$a.isUndefined(e.graph())||(t.value=_$a.clone(e.graph())),t}function writeNodes(e){return _$a.map(e.nodes(),(function(t){var r=e.node(t),n=e.parent(t),o={v:t};return _$a.isUndefined(r)||(o.value=r),_$a.isUndefined(n)||(o.parent=n),o}))}function writeEdges(e){return _$a.map(e.edges(),(function(t){var r=e.edge(t),n={v:t.v,w:t.w};return _$a.isUndefined(t.name)||(n.name=t.name),_$a.isUndefined(r)||(n.value=r),n}))}function read(e){var t=new Graph$1(e.options).setGraph(e.value);return _$a.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),_$a.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}var _$9=lodash_1$1,components_1=components;function components(e){var t,r={},n=[];function o(n){_$9.has(r,n)||(r[n]=!0,t.push(n),_$9.each(e.successors(n),o),_$9.each(e.predecessors(n),o))}return _$9.each(e.nodes(),(function(e){t=[],o(e),t.length&&n.push(t)})),n}var _$8=lodash_1$1,priorityQueue=PriorityQueue$2;function PriorityQueue$2(){this._arr=[],this._keyIndices={}}PriorityQueue$2.prototype.size=function(){return this._arr.length},PriorityQueue$2.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},PriorityQueue$2.prototype.has=function(e){return _$8.has(this._keyIndices,e)},PriorityQueue$2.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},PriorityQueue$2.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},PriorityQueue$2.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!_$8.has(r,e)){var n=this._arr,o=n.length;return r[e]=o,n.push({key:e,priority:t}),this._decrease(o),!0}return!1},PriorityQueue$2.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},PriorityQueue$2.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)},PriorityQueue$2.prototype._heapify=function(e){var t=this._arr,r=2*e,n=r+1,o=e;r<t.length&&(o=t[r].priority<t[o].priority?r:o,n<t.length&&(o=t[n].priority<t[o].priority?n:o),o!==e&&(this._swap(e,o),this._heapify(o)))},PriorityQueue$2.prototype._decrease=function(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t},PriorityQueue$2.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,o=r[e],i=r[t];r[e]=i,r[t]=o,n[i.key]=e,n[o.key]=t};var _$7=lodash_1$1,PriorityQueue$1=priorityQueue,dijkstra_1=dijkstra$1,DEFAULT_WEIGHT_FUNC$1=_$7.constant(1);function dijkstra$1(e,t,r,n){return runDijkstra(e,String(t),r||DEFAULT_WEIGHT_FUNC$1,n||function(t){return e.outEdges(t)})}function runDijkstra(e,t,r,n){var o,i,a={},s=new PriorityQueue$1,l=function(e){var t=e.v!==o?e.v:e.w,n=a[t],l=r(e),u=i.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+l);u<n.distance&&(n.distance=u,n.predecessor=o,s.decrease(t,u))};for(e.nodes().forEach((function(e){var r=e===t?0:Number.POSITIVE_INFINITY;a[e]={distance:r},s.add(e,r)}));s.size()>0&&(o=s.removeMin(),(i=a[o]).distance!==Number.POSITIVE_INFINITY);)n(o).forEach(l);return a}var dijkstra=dijkstra_1,_$6=lodash_1$1,dijkstraAll_1=dijkstraAll;function dijkstraAll(e,t,r){return _$6.transform(e.nodes(),(function(n,o){n[o]=dijkstra(e,o,t,r)}),{})}var _$5=lodash_1$1,tarjan_1=tarjan$1;function tarjan$1(e){var t=0,r=[],n={},o=[];function i(a){var s=n[a]={onStack:!0,lowlink:t,index:t++};if(r.push(a),e.successors(a).forEach((function(e){_$5.has(n,e)?n[e].onStack&&(s.lowlink=Math.min(s.lowlink,n[e].index)):(i(e),s.lowlink=Math.min(s.lowlink,n[e].lowlink))})),s.lowlink===s.index){var l,u=[];do{l=r.pop(),n[l].onStack=!1,u.push(l)}while(a!==l);o.push(u)}}return e.nodes().forEach((function(e){_$5.has(n,e)||i(e)})),o}var _$4=lodash_1$1,tarjan=tarjan_1,findCycles_1=findCycles;function findCycles(e){return _$4.filter(tarjan(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}var _$3=lodash_1$1,floydWarshall_1=floydWarshall,DEFAULT_WEIGHT_FUNC=_$3.constant(1);function floydWarshall(e,t,r){return runFloydWarshall(e,t||DEFAULT_WEIGHT_FUNC,r||function(t){return e.outEdges(t)})}function runFloydWarshall(e,t,r){var n={},o=e.nodes();return o.forEach((function(e){n[e]={},n[e][e]={distance:0},o.forEach((function(t){e!==t&&(n[e][t]={distance:Number.POSITIVE_INFINITY})})),r(e).forEach((function(r){var o=r.v===e?r.w:r.v,i=t(r);n[e][o]={distance:i,predecessor:e}}))})),o.forEach((function(e){var t=n[e];o.forEach((function(r){var i=n[r];o.forEach((function(r){var n=i[e],o=t[r],a=i[r],s=n.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)}))}))})),n}var _$2=lodash_1$1,topsort_1=topsort$1;function topsort$1(e){var t={},r={},n=[];if(_$2.each(e.sinks(),(function o(i){if(_$2.has(r,i))throw new CycleException;_$2.has(t,i)||(r[i]=!0,t[i]=!0,_$2.each(e.predecessors(i),o),delete r[i],n.push(i))})),_$2.size(t)!==e.nodeCount())throw new CycleException;return n}function CycleException(){}topsort$1.CycleException=CycleException,CycleException.prototype=new Error;var topsort=topsort_1,isAcyclic_1=isAcyclic;function isAcyclic(e){try{topsort(e)}catch(e){if(e instanceof topsort.CycleException)return!1;throw e}return!0}var _$1=lodash_1$1,dfs_1=dfs$2;function dfs$2(e,t,r){_$1.isArray(t)||(t=[t]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return _$1.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);doDfs(e,t,"post"===r,i,n,o)})),o}function doDfs(e,t,r,n,o,i){_$1.has(n,t)||(n[t]=!0,r||i.push(t),_$1.each(o(t),(function(t){doDfs(e,t,r,n,o,i)})),r&&i.push(t))}var dfs$1=dfs_1,postorder_1=postorder;function postorder(e,t){return dfs$1(e,t,"post")}var dfs=dfs_1,preorder_1=preorder;function preorder(e,t){return dfs(e,t,"pre")}var _=lodash_1$1,Graph=graph,PriorityQueue=priorityQueue,prim_1=prim;function prim(e,t){var r,n=new Graph,o={},i=new PriorityQueue;function a(e){var n=e.v===r?e.w:e.v,a=i.priority(n);if(void 0!==a){var s=t(e);s<a&&(o[n]=r,i.decrease(n,s))}}if(0===e.nodeCount())return n;_.each(e.nodes(),(function(e){i.add(e,Number.POSITIVE_INFINITY),n.setNode(e)})),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(r=i.removeMin(),_.has(o,r))n.setEdge(r,o[r]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(r).forEach(a)}return n}var alg={components:components_1,dijkstra:dijkstra_1,dijkstraAll:dijkstraAll_1,findCycles:findCycles_1,floydWarshall:floydWarshall_1,isAcyclic:isAcyclic_1,postorder:postorder_1,preorder:preorder_1,prim:prim_1,tarjan:tarjan_1,topsort:topsort_1},lib=lib$1,graphlib={Graph:lib.Graph,json:json,alg:alg,version:lib.version};function selectEdge(e,t){const r=t.graph,n=null==r?void 0:r.edges;console.log("Current Edges List:",n);const o=n.find((t=>(console.log("Checking edge:",t),e.source.id==t.source.id&&e.target.id==t.target.id)));if(o){t.selected_edges.push(o),t.selected_edges=[o]}return t}var cytoscapeDagre={exports:{}},graphlib_1,hasRequiredGraphlib,cloneDeep_1,hasRequiredCloneDeep,_isIterateeCall,hasRequired_isIterateeCall,defaults_1,hasRequiredDefaults,_createFind,hasRequired_createFind,toFinite_1,hasRequiredToFinite,toInteger_1,hasRequiredToInteger,findIndex_1,hasRequiredFindIndex,find_1,hasRequiredFind,flatten_1,hasRequiredFlatten,forIn_1,hasRequiredForIn,last_1,hasRequiredLast,mapValues_1,hasRequiredMapValues,_baseExtremum,hasRequired_baseExtremum,_baseGt,hasRequired_baseGt,max_1,hasRequiredMax,_assignMergeValue,hasRequired_assignMergeValue,isPlainObject_1,hasRequiredIsPlainObject,_safeGet,hasRequired_safeGet,toPlainObject_1,hasRequiredToPlainObject,_baseMergeDeep,hasRequired_baseMergeDeep,_baseMerge,hasRequired_baseMerge,_createAssigner,hasRequired_createAssigner,merge_1,hasRequiredMerge,_baseLt,hasRequired_baseLt,min_1,hasRequiredMin,minBy_1,hasRequiredMinBy,_basePickBy,hasRequired_basePickBy,_basePick,hasRequired_basePick,_flatRest,hasRequired_flatRest,pick_1,hasRequiredPick,_baseRange,hasRequired_baseRange,_createRange,hasRequired_createRange,range_1,hasRequiredRange,_baseSortBy,hasRequired_baseSortBy,_compareAscending,hasRequired_compareAscending,_compareMultiple,hasRequired_compareMultiple,_baseOrderBy,hasRequired_baseOrderBy,sortBy_1,hasRequiredSortBy,uniqueId_1,hasRequiredUniqueId,_baseZipObject,hasRequired_baseZipObject,zipObject_1,hasRequiredZipObject,lodash_1,hasRequiredLodash,list,hasRequiredList,greedyFas,hasRequiredGreedyFas,acyclic,hasRequiredAcyclic,util$1,hasRequiredUtil$1,normalize,hasRequiredNormalize,util,hasRequiredUtil,feasibleTree_1,hasRequiredFeasibleTree,networkSimplex_1,hasRequiredNetworkSimplex,rank_1,hasRequiredRank,parentDummyChains_1,hasRequiredParentDummyChains,nestingGraph,hasRequiredNestingGraph,addBorderSegments_1,hasRequiredAddBorderSegments,coordinateSystem,hasRequiredCoordinateSystem,initOrder_1,hasRequiredInitOrder,crossCount_1,hasRequiredCrossCount,barycenter_1,hasRequiredBarycenter,resolveConflicts_1,hasRequiredResolveConflicts,sort_1,hasRequiredSort,sortSubgraph_1,hasRequiredSortSubgraph,buildLayerGraph_1,hasRequiredBuildLayerGraph,addSubgraphConstraints_1,hasRequiredAddSubgraphConstraints,order_1,hasRequiredOrder,bk,hasRequiredBk,position_1,hasRequiredPosition,layout_1,hasRequiredLayout,debug,hasRequiredDebug,version,hasRequiredVersion,dagre$1,hasRequiredDagre;function requireGraphlib(){if(hasRequiredGraphlib)return graphlib_1;var e;if(hasRequiredGraphlib=1,"function"==typeof commonjsRequire)try{e=graphlib}catch(e){}return e||(e=window.graphlib),graphlib_1=e}function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var e=require_baseClone();return cloneDeep_1=function(t){return e(t,5)}}function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var e=eq_1,t=requireIsArrayLike(),r=_isIndex,n=isObject_1;return _isIterateeCall=function(o,i,a){if(!n(a))return!1;var s=typeof i;return!!("number"==s?t(a)&&r(i,a.length):"string"==s&&i in a)&&e(a[i],o)},_isIterateeCall}function requireDefaults(){if(hasRequiredDefaults)return defaults_1;hasRequiredDefaults=1;var e=require_baseRest(),t=eq_1,r=require_isIterateeCall(),n=requireKeysIn(),o=Object.prototype,i=o.hasOwnProperty,a=e((function(e,a){e=Object(e);var s=-1,l=a.length,u=l>2?a[2]:void 0;for(u&&r(a[0],a[1],u)&&(l=1);++s<l;)for(var c=a[s],g=n(c),d=-1,p=g.length;++d<p;){var h=g[d],f=e[h];(void 0===f||t(f,o[h])&&!i.call(e,h))&&(e[h]=c[h])}return e}));return defaults_1=a}function require_createFind(){if(hasRequired_createFind)return _createFind;hasRequired_createFind=1;var e=require_baseIteratee(),t=requireIsArrayLike(),r=requireKeys();return _createFind=function(n){return function(o,i,a){var s=Object(o);if(!t(o)){var l=e(i,3);o=r(o),i=function(e){return l(s[e],e,s)}}var u=n(o,i,a);return u>-1?s[l?o[u]:u]:void 0}},_createFind}function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var e=toNumber_1,t=1/0;return toFinite_1=function(r){return r?(r=e(r))===t||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0}}function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var e=requireToFinite();return toInteger_1=function(t){var r=e(t),n=r%1;return r==r?n?r-n:r:0}}function requireFindIndex(){if(hasRequiredFindIndex)return findIndex_1;hasRequiredFindIndex=1;var e=require_baseFindIndex(),t=require_baseIteratee(),r=requireToInteger(),n=Math.max;return findIndex_1=function(o,i,a){var s=null==o?0:o.length;if(!s)return-1;var l=null==a?0:r(a);return l<0&&(l=n(s+l,0)),e(o,t(i,3),l)},findIndex_1}function requireFind(){if(hasRequiredFind)return find_1;hasRequiredFind=1;var e=require_createFind()(requireFindIndex());return find_1=e}function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;var e=require_baseFlatten();return flatten_1=function(t){return(null==t?0:t.length)?e(t,1):[]},flatten_1}function requireForIn(){if(hasRequiredForIn)return forIn_1;hasRequiredForIn=1;var e=require_baseFor(),t=require_castFunction(),r=requireKeysIn();return forIn_1=function(n,o){return null==n?n:e(n,t(o),r)},forIn_1}function requireLast(){if(hasRequiredLast)return last_1;return hasRequiredLast=1,last_1=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},last_1}function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var e=_baseAssignValue,t=require_baseForOwn(),r=require_baseIteratee();return mapValues_1=function(n,o){var i={};return o=r(o,3),t(n,(function(t,r,n){e(i,r,o(t,r,n))})),i},mapValues_1}function require_baseExtremum(){if(hasRequired_baseExtremum)return _baseExtremum;hasRequired_baseExtremum=1;var e=isSymbol_1;return _baseExtremum=function(t,r,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r(a);if(null!=s&&(void 0===l?s==s&&!e(s):n(s,l)))var l=s,u=a}return u},_baseExtremum}function require_baseGt(){if(hasRequired_baseGt)return _baseGt;return hasRequired_baseGt=1,_baseGt=function(e,t){return e>t}}function requireMax(){if(hasRequiredMax)return max_1;hasRequiredMax=1;var e=require_baseExtremum(),t=require_baseGt(),r=requireIdentity();return max_1=function(n){return n&&n.length?e(n,r,t):void 0},max_1}function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var e=_baseAssignValue,t=eq_1;return _assignMergeValue=function(r,n,o){(void 0!==o&&!t(r[n],o)||void 0===o&&!(n in r))&&e(r,n,o)},_assignMergeValue}function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var e=_baseGetTag,t=require_getPrototype(),r=isObjectLike_1,n=Function.prototype,o=Object.prototype,i=n.toString,a=o.hasOwnProperty,s=i.call(Object);return isPlainObject_1=function(n){if(!r(n)||"[object Object]"!=e(n))return!1;var o=t(n);if(null===o)return!0;var l=a.call(o,"constructor")&&o.constructor;return"function"==typeof l&&l instanceof l&&i.call(l)==s}}function require_safeGet(){if(hasRequired_safeGet)return _safeGet;return hasRequired_safeGet=1,_safeGet=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},_safeGet}function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var e=require_copyObject(),t=requireKeysIn();return toPlainObject_1=function(r){return e(r,t(r))}}function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var e=require_assignMergeValue(),t=require_cloneBuffer(),r=require_cloneTypedArray(),n=_copyArray,o=require_initCloneObject(),i=requireIsArguments(),a=isArray_1,s=requireIsArrayLikeObject(),l=requireIsBuffer(),u=requireIsFunction(),c=isObject_1,g=requireIsPlainObject(),d=requireIsTypedArray(),p=require_safeGet(),h=requireToPlainObject();return _baseMergeDeep=function(f,y,m,b,_,v,S){var E=p(f,m),w=p(y,m),x=S.get(w);if(x)e(f,m,x);else{var T=v?v(E,w,m+"",f,y,S):void 0,R=void 0===T;if(R){var A=a(w),j=!A&&l(w),C=!A&&!j&&d(w);T=w,A||j||C?a(E)?T=E:s(E)?T=n(E):j?(R=!1,T=t(w,!0)):C?(R=!1,T=r(w,!0)):T=[]:g(w)||i(w)?(T=E,i(E)?T=h(E):c(E)&&!u(E)||(T=o(w))):R=!1}R&&(S.set(w,T),_(T,w,b,v,S),S.delete(w)),e(f,m,T)}},_baseMergeDeep}function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var e=require_Stack(),t=require_assignMergeValue(),r=require_baseFor(),n=require_baseMergeDeep(),o=isObject_1,i=requireKeysIn(),a=require_safeGet();return _baseMerge=function s(l,u,c,g,d){l!==u&&r(u,(function(r,i){if(d||(d=new e),o(r))n(l,u,i,c,s,g,d);else{var p=g?g(a(l,i),r,i+"",l,u,d):void 0;void 0===p&&(p=r),t(l,i,p)}}),i)},_baseMerge}function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var e=require_baseRest(),t=require_isIterateeCall();return _createAssigner=function(r){return e((function(e,n){var o=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=r.length>3&&"function"==typeof a?(i--,a):void 0,s&&t(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++o<i;){var l=n[o];l&&r(e,l,o,a)}return e}))},_createAssigner}function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var e=require_baseMerge(),t=require_createAssigner()((function(t,r,n){e(t,r,n)}));return merge_1=t}function require_baseLt(){if(hasRequired_baseLt)return _baseLt;return hasRequired_baseLt=1,_baseLt=function(e,t){return e<t}}function requireMin(){if(hasRequiredMin)return min_1;hasRequiredMin=1;var e=require_baseExtremum(),t=require_baseLt(),r=requireIdentity();return min_1=function(n){return n&&n.length?e(n,r,t):void 0},min_1}function requireMinBy(){if(hasRequiredMinBy)return minBy_1;hasRequiredMinBy=1;var e=require_baseExtremum(),t=require_baseIteratee(),r=require_baseLt();return minBy_1=function(n,o){return n&&n.length?e(n,t(o,2),r):void 0},minBy_1}function require_basePickBy(){if(hasRequired_basePickBy)return _basePickBy;hasRequired_basePickBy=1;var e=_baseGet,t=_baseSet,r=_castPath;return _basePickBy=function(n,o,i){for(var a=-1,s=o.length,l={};++a<s;){var u=o[a],c=e(n,u);i(c,u)&&t(l,r(u,n),c)}return l},_basePickBy}function require_basePick(){if(hasRequired_basePick)return _basePick;hasRequired_basePick=1;var e=require_basePickBy(),t=requireHasIn();return _basePick=function(r,n){return e(r,n,(function(e,n){return t(r,n)}))},_basePick}function require_flatRest(){if(hasRequired_flatRest)return _flatRest;hasRequired_flatRest=1;var e=requireFlatten(),t=require_overRest(),r=require_setToString();return _flatRest=function(n){return r(t(n,void 0,e),n+"")}}function requirePick(){if(hasRequiredPick)return pick_1;hasRequiredPick=1;var e=require_basePick(),t=require_flatRest()((function(t,r){return null==t?{}:e(t,r)}));return pick_1=t}function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var e=Math.ceil,t=Math.max;return _baseRange=function(r,n,o,i){for(var a=-1,s=t(e((n-r)/(o||1)),0),l=Array(s);s--;)l[i?s:++a]=r,r+=o;return l},_baseRange}function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var e=require_baseRange(),t=require_isIterateeCall(),r=requireToFinite();return _createRange=function(n){return function(o,i,a){return a&&"number"!=typeof a&&t(o,i,a)&&(i=a=void 0),o=r(o),void 0===i?(i=o,o=0):i=r(i),a=void 0===a?o<i?1:-1:r(a),e(o,i,a,n)}},_createRange}function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var e=require_createRange()();return range_1=e}function require_baseSortBy(){if(hasRequired_baseSortBy)return _baseSortBy;return hasRequired_baseSortBy=1,_baseSortBy=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},_baseSortBy}function require_compareAscending(){if(hasRequired_compareAscending)return _compareAscending;hasRequired_compareAscending=1;var e=isSymbol_1;return _compareAscending=function(t,r){if(t!==r){var n=void 0!==t,o=null===t,i=t==t,a=e(t),s=void 0!==r,l=null===r,u=r==r,c=e(r);if(!l&&!c&&!a&&t>r||a&&s&&u&&!l&&!c||o&&s&&u||!n&&u||!i)return 1;if(!o&&!a&&!c&&t<r||c&&n&&i&&!o&&!a||l&&n&&i||!s&&i||!u)return-1}return 0}}function require_compareMultiple(){if(hasRequired_compareMultiple)return _compareMultiple;hasRequired_compareMultiple=1;var e=require_compareAscending();return _compareMultiple=function(t,r,n){for(var o=-1,i=t.criteria,a=r.criteria,s=i.length,l=n.length;++o<s;){var u=e(i[o],a[o]);if(u)return o>=l?u:u*("desc"==n[o]?-1:1)}return t.index-r.index},_compareMultiple}function require_baseOrderBy(){if(hasRequired_baseOrderBy)return _baseOrderBy;hasRequired_baseOrderBy=1;var e=_arrayMap,t=_baseGet,r=require_baseIteratee(),n=require_baseMap(),o=require_baseSortBy(),i=require_baseUnary(),a=require_compareMultiple(),s=requireIdentity(),l=isArray_1;return _baseOrderBy=function(u,c,g){c=c.length?e(c,(function(e){return l(e)?function(r){return t(r,1===e.length?e[0]:e)}:e})):[s];var d=-1;c=e(c,i(r));var p=n(u,(function(t,r,n){return{criteria:e(c,(function(e){return e(t)})),index:++d,value:t}}));return o(p,(function(e,t){return a(e,t,g)}))},_baseOrderBy}function requireSortBy(){if(hasRequiredSortBy)return sortBy_1;hasRequiredSortBy=1;var e=require_baseFlatten(),t=require_baseOrderBy(),r=require_baseRest(),n=require_isIterateeCall(),o=r((function(r,o){if(null==r)return[];var i=o.length;return i>1&&n(r,o[0],o[1])?o=[]:i>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(r,e(o,1),[])}));return sortBy_1=o}function requireUniqueId(){if(hasRequiredUniqueId)return uniqueId_1;hasRequiredUniqueId=1;var e=toString_1,t=0;return uniqueId_1=function(r){var n=++t;return e(r)+n}}function require_baseZipObject(){if(hasRequired_baseZipObject)return _baseZipObject;return hasRequired_baseZipObject=1,_baseZipObject=function(e,t,r){for(var n=-1,o=e.length,i=t.length,a={};++n<o;){var s=n<i?t[n]:void 0;r(a,e[n],s)}return a}}function requireZipObject(){if(hasRequiredZipObject)return zipObject_1;hasRequiredZipObject=1;var e=_assignValue,t=require_baseZipObject();return zipObject_1=function(r,n){return t(r||[],n||[],e)}}function requireLodash(){if(hasRequiredLodash)return lodash_1;var e;if(hasRequiredLodash=1,"function"==typeof commonjsRequire)try{e={cloneDeep:requireCloneDeep(),constant:requireConstant(),defaults:requireDefaults(),each:requireEach(),filter:requireFilter(),find:requireFind(),flatten:requireFlatten(),forEach:requireForEach(),forIn:requireForIn(),has:requireHas(),isUndefined:requireIsUndefined(),last:requireLast(),map:requireMap(),mapValues:requireMapValues(),max:requireMax(),merge:requireMerge(),min:requireMin(),minBy:requireMinBy(),now:now_1,pick:requirePick(),range:requireRange(),reduce:requireReduce(),sortBy:requireSortBy(),uniqueId:requireUniqueId(),values:requireValues(),zipObject:requireZipObject()}}catch(e){}return e||(e=window._),lodash_1=e}function requireList(){if(hasRequiredList)return list;function e(){var e={};e._next=e._prev=e,this._sentinel=e}function t(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function r(e,t){if("_next"!==e&&"_prev"!==e)return t}return hasRequiredList=1,list=e,e.prototype.dequeue=function(){var e=this._sentinel,r=e._prev;if(r!==e)return t(r),r},e.prototype.enqueue=function(e){var r=this._sentinel;e._prev&&e._next&&t(e),e._next=r._next,r._next._prev=e,r._next=e,e._prev=r},e.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,r)),n=n._prev;return"["+e.join(", ")+"]"},list}function requireGreedyFas(){if(hasRequiredGreedyFas)return greedyFas;hasRequiredGreedyFas=1;var e=requireLodash(),t=requireGraphlib().Graph,r=requireList();greedyFas=function(a,s){if(a.nodeCount()<=1)return[];var l=function(n,o){var a=new t,s=0,l=0;e.forEach(n.nodes(),(function(e){a.setNode(e,{v:e,in:0,out:0})})),e.forEach(n.edges(),(function(e){var t=a.edge(e.v,e.w)||0,r=o(e),n=t+r;a.setEdge(e.v,e.w,n),l=Math.max(l,a.node(e.v).out+=r),s=Math.max(s,a.node(e.w).in+=r)}));var u=e.range(l+s+3).map((function(){return new r})),c=s+1;return e.forEach(a.nodes(),(function(e){i(u,c,a.node(e))})),{graph:a,buckets:u,zeroIdx:c}}(a,s||n),u=function(e,t,r){var n,i=[],a=t[t.length-1],s=t[0];for(;e.nodeCount();){for(;n=s.dequeue();)o(e,t,r,n);for(;n=a.dequeue();)o(e,t,r,n);if(e.nodeCount())for(var l=t.length-2;l>0;--l)if(n=t[l].dequeue()){i=i.concat(o(e,t,r,n,!0));break}}return i}(l.graph,l.buckets,l.zeroIdx);return e.flatten(e.map(u,(function(e){return a.outEdges(e.v,e.w)})),!0)};var n=e.constant(1);function o(t,r,n,o,a){var s=a?[]:void 0;return e.forEach(t.inEdges(o.v),(function(e){var o=t.edge(e),l=t.node(e.v);a&&s.push({v:e.v,w:e.w}),l.out-=o,i(r,n,l)})),e.forEach(t.outEdges(o.v),(function(e){var o=t.edge(e),a=e.w,s=t.node(a);s.in-=o,i(r,n,s)})),t.removeNode(o.v),s}function i(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}return greedyFas}function requireAcyclic(){if(hasRequiredAcyclic)return acyclic;hasRequiredAcyclic=1;var e=requireLodash(),t=requireGreedyFas();return acyclic={run:function(r){var n="greedy"===r.graph().acyclicer?t(r,function(e){return function(t){return e.edge(t).weight}}(r)):function(t){var r=[],n={},o={};function i(a){e.has(o,a)||(o[a]=!0,n[a]=!0,e.forEach(t.outEdges(a),(function(t){e.has(n,t.w)?r.push(t):i(t.w)})),delete n[a])}return e.forEach(t.nodes(),i),r}(r);e.forEach(n,(function(t){var n=r.edge(t);r.removeEdge(t),n.forwardName=t.name,n.reversed=!0,r.setEdge(t.w,t.v,n,e.uniqueId("rev"))}))},undo:function(t){e.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}}))}},acyclic}function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1;var e=requireLodash(),t=requireGraphlib().Graph;function r(t,r,n,o){var i;do{i=e.uniqueId(o)}while(t.hasNode(i));return n.dummy=r,t.setNode(i,n),i}function n(t){return e.max(e.map(t.nodes(),(function(r){var n=t.node(r).rank;if(!e.isUndefined(n))return n})))}return util$1={addDummyNode:r,simplify:function(r){var n=(new t).setGraph(r.graph());return e.forEach(r.nodes(),(function(e){n.setNode(e,r.node(e))})),e.forEach(r.edges(),(function(e){var t=n.edge(e.v,e.w)||{weight:0,minlen:1},o=r.edge(e);n.setEdge(e.v,e.w,{weight:t.weight+o.weight,minlen:Math.max(t.minlen,o.minlen)})})),n},asNonCompoundGraph:function(r){var n=new t({multigraph:r.isMultigraph()}).setGraph(r.graph());return e.forEach(r.nodes(),(function(e){r.children(e).length||n.setNode(e,r.node(e))})),e.forEach(r.edges(),(function(e){n.setEdge(e,r.edge(e))})),n},successorWeights:function(t){var r=e.map(t.nodes(),(function(r){var n={};return e.forEach(t.outEdges(r),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return e.zipObject(t.nodes(),r)},predecessorWeights:function(t){var r=e.map(t.nodes(),(function(r){var n={};return e.forEach(t.inEdges(r),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return e.zipObject(t.nodes(),r)},intersectRect:function(e,t){var r,n,o=e.x,i=e.y,a=t.x-o,s=t.y-i,l=e.width/2,u=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),r=u*a/s,n=u):(a<0&&(l=-l),r=l,n=l*s/a);return{x:o+r,y:i+n}},buildLayerMatrix:function(t){var r=e.map(e.range(n(t)+1),(function(){return[]}));return e.forEach(t.nodes(),(function(n){var o=t.node(n),i=o.rank;e.isUndefined(i)||(r[i][o.order]=n)})),r},normalizeRanks:function(t){var r=e.min(e.map(t.nodes(),(function(e){return t.node(e).rank})));e.forEach(t.nodes(),(function(n){var o=t.node(n);e.has(o,"rank")&&(o.rank-=r)}))},removeEmptyRanks:function(t){var r=e.min(e.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];e.forEach(t.nodes(),(function(e){var o=t.node(e).rank-r;n[o]||(n[o]=[]),n[o].push(e)}));var o=0,i=t.graph().nodeRankFactor;e.forEach(n,(function(r,n){e.isUndefined(r)&&n%i!=0?--o:o&&e.forEach(r,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(e,t,n,o){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=o);return r(e,"border",i,t)},maxRank:n,partition:function(t,r){var n={lhs:[],rhs:[]};return e.forEach(t,(function(e){r(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(t,r){var n=e.now();try{return r()}finally{console.log(t+" time: "+(e.now()-n)+"ms")}},notime:function(e,t){return t()}},util$1}function requireNormalize(){if(hasRequiredNormalize)return normalize;hasRequiredNormalize=1;var e=requireLodash(),t=requireUtil$1();return normalize={run:function(r){r.graph().dummyChains=[],e.forEach(r.edges(),(function(e){!function(e,r){var n,o,i,a=r.v,s=e.node(a).rank,l=r.w,u=e.node(l).rank,c=r.name,g=e.edge(r),d=g.labelRank;if(u===s+1)return;for(e.removeEdge(r),i=0,++s;s<u;++i,++s)g.points=[],o={width:0,height:0,edgeLabel:g,edgeObj:r,rank:s},n=t.addDummyNode(e,"edge",o,"_d"),s===d&&(o.width=g.width,o.height=g.height,o.dummy="edge-label",o.labelpos=g.labelpos),e.setEdge(a,n,{weight:g.weight},c),0===i&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,l,{weight:g.weight},c)}(r,e)}))},undo:function(t){e.forEach(t.graph().dummyChains,(function(e){var r,n=t.node(e),o=n.edgeLabel;for(t.setEdge(n.edgeObj,o);n.dummy;)r=t.successors(e)[0],t.removeNode(e),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),e=r,n=t.node(e)}))}},normalize}function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var e=requireLodash();return util={longestPath:function(t){var r={};e.forEach(t.sources(),(function n(o){var i=t.node(o);if(e.has(r,o))return i.rank;r[o]=!0;var a=e.min(e.map(t.outEdges(o),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),i.rank=a}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}},util}function requireFeasibleTree(){if(hasRequiredFeasibleTree)return feasibleTree_1;hasRequiredFeasibleTree=1;var e=requireLodash(),t=requireGraphlib().Graph,r=requireUtil().slack;function n(t,n){return e.forEach(t.nodes(),(function o(i){e.forEach(n.nodeEdges(i),(function(e){var a=e.v,s=i===a?e.w:a;t.hasNode(s)||r(n,e)||(t.setNode(s,{}),t.setEdge(i,s,{}),o(s))}))})),t.nodeCount()}function o(t,n){return e.minBy(n.edges(),(function(e){if(t.hasNode(e.v)!==t.hasNode(e.w))return r(n,e)}))}function i(t,r,n){e.forEach(t.nodes(),(function(e){r.node(e).rank+=n}))}return feasibleTree_1=function(e){var a,s,l=new t({directed:!1}),u=e.nodes()[0],c=e.nodeCount();l.setNode(u,{});for(;n(l,e)<c;)a=o(l,e),s=l.hasNode(a.v)?r(e,a):-r(e,a),i(l,e,s);return l}}function requireNetworkSimplex(){if(hasRequiredNetworkSimplex)return networkSimplex_1;hasRequiredNetworkSimplex=1;var e=requireLodash(),t=requireFeasibleTree(),r=requireUtil().slack,n=requireUtil().longestPath,o=requireGraphlib().alg.preorder,i=requireGraphlib().alg.postorder,a=requireUtil$1().simplify;function s(e){e=a(e),n(e);var r,o=t(e);for(c(o),l(o,e);r=d(o);)h(o,e,r,p(o,e,r))}function l(t,r){var n=i(t,t.nodes());n=n.slice(0,n.length-1),e.forEach(n,(function(e){!function(e,t,r){var n=e.node(r),o=n.parent;e.edge(r,o).cutvalue=u(e,t,r)}(t,r,e)}))}function u(t,r,n){var o=t.node(n).parent,i=!0,a=r.edge(n,o),s=0;return a||(i=!1,a=r.edge(o,n)),s=a.weight,e.forEach(r.nodeEdges(n),(function(e){var a,l,u=e.v===n,c=u?e.w:e.v;if(c!==o){var g=u===i,d=r.edge(e).weight;if(s+=g?d:-d,a=n,l=c,t.hasEdge(a,l)){var p=t.edge(n,c).cutvalue;s+=g?-p:p}}})),s}function c(e,t){arguments.length<2&&(t=e.nodes()[0]),g(e,{},1,t)}function g(t,r,n,o,i){var a=n,s=t.node(o);return r[o]=!0,e.forEach(t.neighbors(o),(function(i){e.has(r,i)||(n=g(t,r,n,i,o))})),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function d(t){return e.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function p(t,n,o){var i=o.v,a=o.w;n.hasEdge(i,a)||(i=o.w,a=o.v);var s=t.node(i),l=t.node(a),u=s,c=!1;s.lim>l.lim&&(u=l,c=!0);var g=e.filter(n.edges(),(function(e){return c===f(t,t.node(e.v),u)&&c!==f(t,t.node(e.w),u)}));return e.minBy(g,(function(e){return r(n,e)}))}function h(t,r,n,i){var a=n.v,s=n.w;t.removeEdge(a,s),t.setEdge(i.v,i.w,{}),c(t),l(t,r),function(t,r){var n=e.find(t.nodes(),(function(e){return!r.node(e).parent})),i=o(t,n);i=i.slice(1),e.forEach(i,(function(e){var n=t.node(e).parent,o=r.edge(e,n),i=!1;o||(o=r.edge(n,e),i=!0),r.node(e).rank=r.node(n).rank+(i?o.minlen:-o.minlen)}))}(t,r)}function f(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}return networkSimplex_1=s,s.initLowLimValues=c,s.initCutValues=l,s.calcCutValue=u,s.leaveEdge=d,s.enterEdge=p,s.exchangeEdges=h,networkSimplex_1}function requireRank(){if(hasRequiredRank)return rank_1;hasRequiredRank=1;var e=requireUtil().longestPath,t=requireFeasibleTree(),r=requireNetworkSimplex();rank_1=function(r){switch(r.graph().ranker){case"network-simplex":default:o(r);break;case"tight-tree":!function(r){e(r),t(r)}(r);break;case"longest-path":n(r)}};var n=e;function o(e){r(e)}return rank_1}function requireParentDummyChains(){if(hasRequiredParentDummyChains)return parentDummyChains_1;hasRequiredParentDummyChains=1;var e=requireLodash();return parentDummyChains_1=function(t){var r=function(t){var r={},n=0;function o(i){var a=n;e.forEach(t.children(i),o),r[i]={low:a,lim:n++}}return e.forEach(t.children(),o),r}(t);e.forEach(t.graph().dummyChains,(function(e){for(var n=t.node(e),o=n.edgeObj,i=function(e,t,r,n){var o,i,a=[],s=[],l=Math.min(t[r].low,t[n].low),u=Math.max(t[r].lim,t[n].lim);o=r;do{o=e.parent(o),a.push(o)}while(o&&(t[o].low>l||u>t[o].lim));i=o,o=n;for(;(o=e.parent(o))!==i;)s.push(o);return{path:a.concat(s.reverse()),lca:i}}(t,r,o.v,o.w),a=i.path,s=i.lca,l=0,u=a[l],c=!0;e!==o.w;){if(n=t.node(e),c){for(;(u=a[l])!==s&&t.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&t.node(u=a[l+1]).minRank<=n.rank;)l++;u=a[l]}t.setParent(e,u),e=t.successors(e)[0]}}))},parentDummyChains_1}function requireNestingGraph(){if(hasRequiredNestingGraph)return nestingGraph;hasRequiredNestingGraph=1;var e=requireLodash(),t=requireUtil$1();function r(n,o,i,a,s,l,u){var c=n.children(u);if(c.length){var g=t.addBorderNode(n,"_bt"),d=t.addBorderNode(n,"_bb"),p=n.node(u);n.setParent(g,u),p.borderTop=g,n.setParent(d,u),p.borderBottom=d,e.forEach(c,(function(e){r(n,o,i,a,s,l,e);var t=n.node(e),c=t.borderTop?t.borderTop:e,p=t.borderBottom?t.borderBottom:e,h=t.borderTop?a:2*a,f=c!==p?1:s-l[u]+1;n.setEdge(g,c,{weight:h,minlen:f,nestingEdge:!0}),n.setEdge(p,d,{weight:h,minlen:f,nestingEdge:!0})})),n.parent(u)||n.setEdge(o,g,{weight:0,minlen:s+l[u]})}else u!==o&&n.setEdge(o,u,{weight:0,minlen:i})}return nestingGraph={run:function(n){var o=t.addDummyNode(n,"root",{},"_root"),i=function(t){var r={};function n(o,i){var a=t.children(o);a&&a.length&&e.forEach(a,(function(e){n(e,i+1)})),r[o]=i}return e.forEach(t.children(),(function(e){n(e,1)})),r}(n),a=e.max(e.values(i))-1,s=2*a+1;n.graph().nestingRoot=o,e.forEach(n.edges(),(function(e){n.edge(e).minlen*=s}));var l=function(t){return e.reduce(t.edges(),(function(e,r){return e+t.edge(r).weight}),0)}(n)+1;e.forEach(n.children(),(function(e){r(n,o,s,l,a,i,e)})),n.graph().nodeRankFactor=s},cleanup:function(t){var r=t.graph();t.removeNode(r.nestingRoot),delete r.nestingRoot,e.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}},nestingGraph}function requireAddBorderSegments(){if(hasRequiredAddBorderSegments)return addBorderSegments_1;hasRequiredAddBorderSegments=1;var e=requireLodash(),t=requireUtil$1();function r(e,r,n,o,i,a){var s={width:0,height:0,rank:a,borderType:r},l=i[r][a-1],u=t.addDummyNode(e,"border",s,n);i[r][a]=u,e.setParent(u,o),l&&e.setEdge(l,u,{weight:1})}return addBorderSegments_1=function(t){e.forEach(t.children(),(function n(o){var i=t.children(o),a=t.node(o);if(i.length&&e.forEach(i,n),e.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,l=a.maxRank+1;s<l;++s)r(t,"borderLeft","_bl",o,a,s),r(t,"borderRight","_br",o,a,s)}}))},addBorderSegments_1}function requireCoordinateSystem(){if(hasRequiredCoordinateSystem)return coordinateSystem;hasRequiredCoordinateSystem=1;var e=requireLodash();function t(t){e.forEach(t.nodes(),(function(e){r(t.node(e))})),e.forEach(t.edges(),(function(e){r(t.edge(e))}))}function r(e){var t=e.width;e.width=e.height,e.height=t}function n(e){e.y=-e.y}function o(e){var t=e.x;e.x=e.y,e.y=t}return coordinateSystem={adjust:function(e){var r=e.graph().rankdir.toLowerCase();"lr"!==r&&"rl"!==r||t(e)},undo:function(r){var i=r.graph().rankdir.toLowerCase();"bt"!==i&&"rl"!==i||function(t){e.forEach(t.nodes(),(function(e){n(t.node(e))})),e.forEach(t.edges(),(function(r){var o=t.edge(r);e.forEach(o.points,n),e.has(o,"y")&&n(o)}))}(r);"lr"!==i&&"rl"!==i||(!function(t){e.forEach(t.nodes(),(function(e){o(t.node(e))})),e.forEach(t.edges(),(function(r){var n=t.edge(r);e.forEach(n.points,o),e.has(n,"x")&&o(n)}))}(r),t(r))}}}function requireInitOrder(){if(hasRequiredInitOrder)return initOrder_1;hasRequiredInitOrder=1;var e=requireLodash();return initOrder_1=function(t){var r={},n=e.filter(t.nodes(),(function(e){return!t.children(e).length})),o=e.max(e.map(n,(function(e){return t.node(e).rank}))),i=e.map(e.range(o+1),(function(){return[]}));function a(n){if(!e.has(r,n)){r[n]=!0;var o=t.node(n);i[o.rank].push(n),e.forEach(t.successors(n),a)}}var s=e.sortBy(n,(function(e){return t.node(e).rank}));return e.forEach(s,a),i},initOrder_1}function requireCrossCount(){if(hasRequiredCrossCount)return crossCount_1;hasRequiredCrossCount=1;var e=requireLodash();function t(t,r,n){for(var o=e.zipObject(n,e.map(n,(function(e,t){return t}))),i=e.flatten(e.map(r,(function(r){return e.sortBy(e.map(t.outEdges(r),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var l=e.map(new Array(s),(function(){return 0})),u=0;return e.forEach(i.forEach((function(e){var t=e.pos+a;l[t]+=e.weight;for(var r=0;t>0;)t%2&&(r+=l[t+1]),l[t=t-1>>1]+=e.weight;u+=e.weight*r}))),u}return crossCount_1=function(e,r){for(var n=0,o=1;o<r.length;++o)n+=t(e,r[o-1],r[o]);return n},crossCount_1}function requireBarycenter(){if(hasRequiredBarycenter)return barycenter_1;hasRequiredBarycenter=1;var e=requireLodash();return barycenter_1=function(t,r){return e.map(r,(function(r){var n=t.inEdges(r);if(n.length){var o=e.reduce(n,(function(e,r){var n=t.edge(r),o=t.node(r.v);return{sum:e.sum+n.weight*o.order,weight:e.weight+n.weight}}),{sum:0,weight:0});return{v:r,barycenter:o.sum/o.weight,weight:o.weight}}return{v:r}}))}}function requireResolveConflicts(){if(hasRequiredResolveConflicts)return resolveConflicts_1;hasRequiredResolveConflicts=1;var e=requireLodash();return resolveConflicts_1=function(t,r){var n={};return e.forEach(t,(function(t,r){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:r};e.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),e.forEach(r.edges(),(function(t){var r=n[t.v],o=n[t.w];e.isUndefined(r)||e.isUndefined(o)||(o.indegree++,r.out.push(n[t.w]))})),function(t){var r=[];function n(t){return function(r){r.merged||(e.isUndefined(r.barycenter)||e.isUndefined(t.barycenter)||r.barycenter>=t.barycenter)&&function(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight);t.weight&&(r+=t.barycenter*t.weight,n+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(t,r)}}function o(e){return function(r){r.in.push(e),0==--r.indegree&&t.push(r)}}for(;t.length;){var i=t.pop();r.push(i),e.forEach(i.in.reverse(),n(i)),e.forEach(i.out,o(i))}return e.map(e.filter(r,(function(e){return!e.merged})),(function(t){return e.pick(t,["vs","i","barycenter","weight"])}))}(e.filter(n,(function(e){return!e.indegree})))},resolveConflicts_1}function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;var e=requireLodash(),t=requireUtil$1();function r(t,r,n){for(var o;r.length&&(o=e.last(r)).i<=n;)r.pop(),t.push(o.vs),n++;return n}return sort_1=function(n,o){var i=t.partition(n,(function(t){return e.has(t,"barycenter")})),a=i.lhs,s=e.sortBy(i.rhs,(function(e){return-e.i})),l=[],u=0,c=0,g=0;a.sort((d=!!o,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:d?t.i-e.i:e.i-t.i})),g=r(l,s,g),e.forEach(a,(function(e){g+=e.vs.length,l.push(e.vs),u+=e.barycenter*e.weight,c+=e.weight,g=r(l,s,g)}));var d;var p={vs:e.flatten(l,!0)};c&&(p.barycenter=u/c,p.weight=c);return p}}function requireSortSubgraph(){if(hasRequiredSortSubgraph)return sortSubgraph_1;hasRequiredSortSubgraph=1;var e=requireLodash(),t=requireBarycenter(),r=requireResolveConflicts(),n=requireSort();return sortSubgraph_1=function o(i,a,s,l){var u=i.children(a),c=i.node(a),g=c?c.borderLeft:void 0,d=c?c.borderRight:void 0,p={};g&&(u=e.filter(u,(function(e){return e!==g&&e!==d})));var h=t(i,u);e.forEach(h,(function(t){if(i.children(t.v).length){var r=o(i,t.v,s,l);p[t.v]=r,e.has(r,"barycenter")&&(n=t,a=r,e.isUndefined(n.barycenter)?(n.barycenter=a.barycenter,n.weight=a.weight):(n.barycenter=(n.barycenter*n.weight+a.barycenter*a.weight)/(n.weight+a.weight),n.weight+=a.weight))}var n,a}));var f=r(h,s);!function(t,r){e.forEach(t,(function(t){t.vs=e.flatten(t.vs.map((function(e){return r[e]?r[e].vs:e})),!0)}))}(f,p);var y=n(f,l);if(g&&(y.vs=e.flatten([g,y.vs,d],!0),i.predecessors(g).length)){var m=i.node(i.predecessors(g)[0]),b=i.node(i.predecessors(d)[0]);e.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+m.order+b.order)/(y.weight+2),y.weight+=2}return y},sortSubgraph_1}function requireBuildLayerGraph(){if(hasRequiredBuildLayerGraph)return buildLayerGraph_1;hasRequiredBuildLayerGraph=1;var e=requireLodash(),t=requireGraphlib().Graph;return buildLayerGraph_1=function(r,n,o){var i=function(t){var r;for(;t.hasNode(r=e.uniqueId("_root")););return r}(r),a=new t({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return r.node(e)}));return e.forEach(r.nodes(),(function(t){var s=r.node(t),l=r.parent(t);(s.rank===n||s.minRank<=n&&n<=s.maxRank)&&(a.setNode(t),a.setParent(t,l||i),e.forEach(r[o](t),(function(n){var o=n.v===t?n.w:n.v,i=a.edge(o,t),s=e.isUndefined(i)?0:i.weight;a.setEdge(o,t,{weight:r.edge(n).weight+s})})),e.has(s,"minRank")&&a.setNode(t,{borderLeft:s.borderLeft[n],borderRight:s.borderRight[n]}))})),a},buildLayerGraph_1}function requireAddSubgraphConstraints(){if(hasRequiredAddSubgraphConstraints)return addSubgraphConstraints_1;hasRequiredAddSubgraphConstraints=1;var e=requireLodash();return addSubgraphConstraints_1=function(t,r,n){var o,i={};e.forEach(n,(function(e){for(var n,a,s=t.parent(e);s;){if((n=t.parent(s))?(a=i[n],i[n]=s):(a=o,o=s),a&&a!==s)return void r.setEdge(a,s);s=n}}))}}function requireOrder(){if(hasRequiredOrder)return order_1;hasRequiredOrder=1;var e=requireLodash(),t=requireInitOrder(),r=requireCrossCount(),n=requireSortSubgraph(),o=requireBuildLayerGraph(),i=requireAddSubgraphConstraints(),a=requireGraphlib().Graph,s=requireUtil$1();function l(t,r,n){return e.map(r,(function(e){return o(t,e,n)}))}function u(t,r){var o=new a;e.forEach(t,(function(t){var a=t.graph().root,s=n(t,a,o,r);e.forEach(s.vs,(function(e,r){t.node(e).order=r})),i(t,o,s.vs)}))}function c(t,r){e.forEach(r,(function(r){e.forEach(r,(function(e,r){t.node(e).order=r}))}))}return order_1=function(n){var o=s.maxRank(n),i=l(n,e.range(1,o+1),"inEdges"),a=l(n,e.range(o-1,-1,-1),"outEdges"),g=t(n);c(n,g);for(var d,p=Number.POSITIVE_INFINITY,h=0,f=0;f<4;++h,++f){u(h%2?i:a,h%4>=2),g=s.buildLayerMatrix(n);var y=r(n,g);y<p&&(f=0,d=e.cloneDeep(g),p=y)}c(n,d)},order_1}function requireBk(){if(hasRequiredBk)return bk;hasRequiredBk=1;var e=requireLodash(),t=requireGraphlib().Graph,r=requireUtil$1();function n(t,r){var n={};return e.reduce(r,(function(r,o){var a=0,s=0,l=r.length,u=e.last(o);return e.forEach(o,(function(r,c){var g=function(t,r){if(t.node(r).dummy)return e.find(t.predecessors(r),(function(e){return t.node(e).dummy}))}(t,r),d=g?t.node(g).order:l;(g||r===u)&&(e.forEach(o.slice(s,c+1),(function(r){e.forEach(t.predecessors(r),(function(e){var o=t.node(e),s=o.order;!(s<a||d<s)||o.dummy&&t.node(r).dummy||i(n,e,r)}))})),s=c+1,a=d)})),o})),n}function o(t,r){var n={};function o(r,o,a,s,l){var u;e.forEach(e.range(o,a),(function(o){u=r[o],t.node(u).dummy&&e.forEach(t.predecessors(u),(function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>l)&&i(n,e,u)}))}))}return e.reduce(r,(function(r,n){var i,a=-1,s=0;return e.forEach(n,(function(e,l){if("border"===t.node(e).dummy){var u=t.predecessors(e);u.length&&(i=t.node(u[0]).order,o(n,s,l,a,i),s=l,a=i)}o(n,s,n.length,i,r.length)})),n})),n}function i(e,t,r){if(t>r){var n=t;t=r,r=n}var o=e[t];o||(e[t]=o={}),o[r]=!0}function a(t,r,n){if(r>n){var o=r;r=n,n=o}return e.has(t[r],n)}function s(t,r,n,o){var i={},s={},l={};return e.forEach(r,(function(t){e.forEach(t,(function(e,t){i[e]=e,s[e]=e,l[e]=t}))})),e.forEach(r,(function(t){var r=-1;e.forEach(t,(function(t){var u=o(t);if(u.length){u=e.sortBy(u,(function(e){return l[e]}));for(var c=(u.length-1)/2,g=Math.floor(c),d=Math.ceil(c);g<=d;++g){var p=u[g];s[t]===t&&r<l[p]&&!a(n,t,p)&&(s[p]=t,s[t]=i[t]=i[p],r=l[p])}}}))})),{root:i,align:s}}function l(r,n,o,i,a){var s={},l=function(r,n,o,i){var a=new t,s=r.graph(),l=function(t,r,n){return function(o,i,a){var s,l=o.node(i),u=o.node(a),c=0;if(c+=l.width/2,e.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=-l.width/2;break;case"r":s=l.width/2}if(s&&(c+=n?s:-s),s=0,c+=(l.dummy?r:t)/2,c+=(u.dummy?r:t)/2,c+=u.width/2,e.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=u.width/2;break;case"r":s=-u.width/2}return s&&(c+=n?s:-s),s=0,c}}(s.nodesep,s.edgesep,i);return e.forEach(n,(function(t){var n;e.forEach(t,(function(e){var t=o[e];if(a.setNode(t),n){var i=o[n],s=a.edge(i,t);a.setEdge(i,t,Math.max(l(r,e,n),s||0))}n=e}))})),a}(r,n,o,a),u=a?"borderLeft":"borderRight";function c(e,t){for(var r=l.nodes(),n=r.pop(),o={};n;)o[n]?e(n):(o[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return c((function(e){s[e]=l.inEdges(e).reduce((function(e,t){return Math.max(e,s[t.v]+l.edge(t))}),0)}),l.predecessors.bind(l)),c((function(e){var t=l.outEdges(e).reduce((function(e,t){return Math.min(e,s[t.w]-l.edge(t))}),Number.POSITIVE_INFINITY),n=r.node(e);t!==Number.POSITIVE_INFINITY&&n.borderType!==u&&(s[e]=Math.max(s[e],t))}),l.successors.bind(l)),e.forEach(i,(function(e){s[e]=s[o[e]]})),s}function u(t,r){return e.minBy(e.values(r),(function(r){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return e.forIn(r,(function(e,r){var i=function(e,t){return e.node(t).width}(t,r)/2;n=Math.max(e+i,n),o=Math.min(e-i,o)})),n-o}))}function c(t,r){var n=e.values(r),o=e.min(n),i=e.max(n);e.forEach(["u","d"],(function(n){e.forEach(["l","r"],(function(a){var s,l=n+a,u=t[l];if(u!==r){var c=e.values(u);(s="l"===a?o-e.min(c):i-e.max(c))&&(t[l]=e.mapValues(u,(function(e){return e+s})))}}))}))}function g(t,r){return e.mapValues(t.ul,(function(n,o){if(r)return t[r.toLowerCase()][o];var i=e.sortBy(e.map(t,o));return(i[1]+i[2])/2}))}return bk={positionX:function(t){var i,a=r.buildLayerMatrix(t),d=e.merge(n(t,a),o(t,a)),p={};e.forEach(["u","d"],(function(r){i="u"===r?a:e.values(a).reverse(),e.forEach(["l","r"],(function(n){"r"===n&&(i=e.map(i,(function(t){return e.values(t).reverse()})));var o=("u"===r?t.predecessors:t.successors).bind(t),a=s(t,i,d,o),u=l(t,i,a.root,a.align,"r"===n);"r"===n&&(u=e.mapValues(u,(function(e){return-e}))),p[r+n]=u}))}));var h=u(t,p);return c(p,h),g(p,t.graph().align)},findType1Conflicts:n,findType2Conflicts:o,addConflict:i,hasConflict:a,verticalAlignment:s,horizontalCompaction:l,alignCoordinates:c,findSmallestWidthAlignment:u,balance:g}}function requirePosition(){if(hasRequiredPosition)return position_1;hasRequiredPosition=1;var e=requireLodash(),t=requireUtil$1(),r=requireBk().positionX;return position_1=function(n){(function(r){var n=t.buildLayerMatrix(r),o=r.graph().ranksep,i=0;e.forEach(n,(function(t){var n=e.max(e.map(t,(function(e){return r.node(e).height})));e.forEach(t,(function(e){r.node(e).y=i+n/2})),i+=n+o}))})(n=t.asNonCompoundGraph(n)),e.forEach(r(n),(function(e,t){n.node(t).x=e}))}}function requireLayout(){if(hasRequiredLayout)return layout_1;hasRequiredLayout=1;var e=requireLodash(),t=requireAcyclic(),r=requireNormalize(),n=requireRank(),o=requireUtil$1().normalizeRanks,i=requireParentDummyChains(),a=requireUtil$1().removeEmptyRanks,s=requireNestingGraph(),l=requireAddBorderSegments(),u=requireCoordinateSystem(),c=requireOrder(),g=requirePosition(),d=requireUtil$1(),p=requireGraphlib().Graph;layout_1=function(x,T){var R=T&&T.debugTiming?d.time:d.notime;R("layout",(function(){var T=R("  buildLayoutGraph",(function(){return function(t){var r=new p({multigraph:!0,compound:!0}),n=w(t.graph());return r.setGraph(e.merge({},f,E(n,h),e.pick(n,y))),e.forEach(t.nodes(),(function(n){var o=w(t.node(n));r.setNode(n,e.defaults(E(o,m),b)),r.setParent(n,t.parent(n))})),e.forEach(t.edges(),(function(n){var o=w(t.edge(n));r.setEdge(n,e.merge({},v,E(o,_),e.pick(o,S)))})),r}(x)}));R("  runLayout",(function(){!function(p,h){h("    makeSpaceForEdgeLabels",(function(){!function(t){var r=t.graph();r.ranksep/=2,e.forEach(t.edges(),(function(e){var n=t.edge(e);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===r.rankdir||"BT"===r.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(p)})),h("    removeSelfEdges",(function(){!function(t){e.forEach(t.edges(),(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(p)})),h("    acyclic",(function(){t.run(p)})),h("    nestingGraph.run",(function(){s.run(p)})),h("    rank",(function(){n(d.asNonCompoundGraph(p))})),h("    injectEdgeLabelProxies",(function(){!function(t){e.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),o={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};d.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(p)})),h("    removeEmptyRanks",(function(){a(p)})),h("    nestingGraph.cleanup",(function(){s.cleanup(p)})),h("    normalizeRanks",(function(){o(p)})),h("    assignRankMinMax",(function(){!function(t){var r=0;e.forEach(t.nodes(),(function(n){var o=t.node(n);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,r=e.max(r,o.maxRank))})),t.graph().maxRank=r}(p)})),h("    removeEdgeLabelProxies",(function(){!function(t){e.forEach(t.nodes(),(function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))}))}(p)})),h("    normalize.run",(function(){r.run(p)})),h("    parentDummyChains",(function(){i(p)})),h("    addBorderSegments",(function(){l(p)})),h("    order",(function(){c(p)})),h("    insertSelfEdges",(function(){!function(t){var r=d.buildLayerMatrix(t);e.forEach(r,(function(r){var n=0;e.forEach(r,(function(r,o){var i=t.node(r);i.order=o+n,e.forEach(i.selfEdges,(function(e){d.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(p)})),h("    adjustCoordinateSystem",(function(){u.adjust(p)})),h("    position",(function(){g(p)})),h("    positionSelfEdges",(function(){!function(t){e.forEach(t.nodes(),(function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,s=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{x:o+a,y:i},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.label.x=r.x,r.label.y=r.y}}))}(p)})),h("    removeBorderNodes",(function(){!function(t){e.forEach(t.nodes(),(function(r){if(t.children(r).length){var n=t.node(r),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(e.last(n.borderLeft)),s=t.node(e.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),e.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(p)})),h("    normalize.undo",(function(){r.undo(p)})),h("    fixupEdgeLabelCoords",(function(){!function(t){e.forEach(t.edges(),(function(r){var n=t.edge(r);if(e.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(p)})),h("    undoCoordinateSystem",(function(){u.undo(p)})),h("    translateGraph",(function(){!function(t){var r=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),s=a.marginx||0,l=a.marginy||0;function u(e){var t=e.x,a=e.y,s=e.width,l=e.height;r=Math.min(r,t-s/2),n=Math.max(n,t+s/2),o=Math.min(o,a-l/2),i=Math.max(i,a+l/2)}e.forEach(t.nodes(),(function(e){u(t.node(e))})),e.forEach(t.edges(),(function(r){var n=t.edge(r);e.has(n,"x")&&u(n)})),r-=s,o-=l,e.forEach(t.nodes(),(function(e){var n=t.node(e);n.x-=r,n.y-=o})),e.forEach(t.edges(),(function(n){var i=t.edge(n);e.forEach(i.points,(function(e){e.x-=r,e.y-=o})),e.has(i,"x")&&(i.x-=r),e.has(i,"y")&&(i.y-=o)})),a.width=n-r+s,a.height=i-o+l}(p)})),h("    assignNodeIntersects",(function(){!function(t){e.forEach(t.edges(),(function(e){var r,n,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift(d.intersectRect(i,r)),o.points.push(d.intersectRect(a,n))}))}(p)})),h("    reversePoints",(function(){!function(t){e.forEach(t.edges(),(function(e){var r=t.edge(e);r.reversed&&r.points.reverse()}))}(p)})),h("    acyclic.undo",(function(){t.undo(p)}))}(T,R)})),R("  updateInputGraph",(function(){!function(t,r){e.forEach(t.nodes(),(function(e){var n=t.node(e),o=r.node(e);n&&(n.x=o.x,n.y=o.y,r.children(e).length&&(n.width=o.width,n.height=o.height))})),e.forEach(t.edges(),(function(n){var o=t.edge(n),i=r.edge(n);o.points=i.points,e.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=r.graph().width,t.graph().height=r.graph().height}(x,T)}))}))};var h=["nodesep","edgesep","ranksep","marginx","marginy"],f={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],m=["width","height"],b={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],v={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function E(t,r){return e.mapValues(e.pick(t,r),Number)}function w(t){var r={};return e.forEach(t,(function(e,t){r[t.toLowerCase()]=e})),r}return layout_1}function requireDebug(){if(hasRequiredDebug)return debug;hasRequiredDebug=1;var e=requireLodash(),t=requireUtil$1(),r=requireGraphlib().Graph;return debug={debugOrdering:function(n){var o=t.buildLayerMatrix(n),i=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(n.nodes(),(function(e){i.setNode(e,{label:e}),i.setParent(e,"layer"+n.node(e).rank)})),e.forEach(n.edges(),(function(e){i.setEdge(e.v,e.w,{},e.name)})),e.forEach(o,(function(t,r){var n="layer"+r;i.setNode(n,{rank:"same"}),e.reduce(t,(function(e,t){return i.setEdge(e,t,{style:"invis"}),t}))})),i}},debug}function requireVersion(){return hasRequiredVersion?version:(hasRequiredVersion=1,version="0.8.5")}function requireDagre(){return hasRequiredDagre?dagre$1:(hasRequiredDagre=1,dagre$1={graphlib:requireGraphlib(),layout:requireLayout(),debug:requireDebug(),util:{time:requireUtil$1().time,notime:requireUtil$1().notime},version:requireVersion()})}cytoscapeDagre.exports,function(e,t){var r;r=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var n=r(1),o=function(e){e&&e("layout","dagre",n)};"undefined"!=typeof cytoscape&&o(cytoscape),e.exports=o},function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=function(e){return"function"==typeof e},i=r(2),a=r(3),s=r(4);function l(e){this.options=a({},i,e)}l.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,i=function(e,t){return o(t)?t.apply(e,[e]):t},a=e.boundingBox||{x1:0,y1:0,w:t.width(),h:t.height()};void 0===a.x2&&(a.x2=a.x1+a.w),void 0===a.w&&(a.w=a.x2-a.x1),void 0===a.y2&&(a.y2=a.y1+a.h),void 0===a.h&&(a.h=a.y2-a.y1);var l=new s.graphlib.Graph({multigraph:!0,compound:!0}),u={},c=function(e,t){null!=t&&(u[e]=t)};c("nodesep",e.nodeSep),c("edgesep",e.edgeSep),c("ranksep",e.rankSep),c("rankdir",e.rankDir),c("align",e.align),c("ranker",e.ranker),c("acyclicer",e.acyclicer),l.setGraph(u),l.setDefaultEdgeLabel((function(){return{}})),l.setDefaultNodeLabel((function(){return{}}));var g=r.nodes();o(e.sort)&&(g=g.sort(e.sort));for(var d=0;d<g.length;d++){var p=g[d],h=p.layoutDimensions(e);l.setNode(p.id(),{width:h.w,height:h.h,name:p.id()})}for(var f=0;f<g.length;f++){var y=g[f];y.isChild()&&l.setParent(y.id(),y.parent().id())}var m=r.edges().stdFilter((function(e){return!e.source().isParent()&&!e.target().isParent()}));o(e.sort)&&(m=m.sort(e.sort));for(var b=0;b<m.length;b++){var _=m[b];l.setEdge(_.source().id(),_.target().id(),{minlen:i(_,e.minLen),weight:i(_,e.edgeWeight),name:_.id()},_.id())}s.layout(l);for(var v,S=l.nodes(),E=0;E<S.length;E++){var w=S[E],x=l.node(w);t.getElementById(w).scratch().dagre=x}return e.boundingBox?(v={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},g.forEach((function(e){var t=e.scratch().dagre;v.x1=Math.min(v.x1,t.x),v.x2=Math.max(v.x2,t.x),v.y1=Math.min(v.y1,t.y),v.y2=Math.max(v.y2,t.y)})),v.w=v.x2-v.x1,v.h=v.y2-v.y1):v=a,g.layoutPositions(this,e,(function(t){var r=(t="object"===n(t)?t:this).scratch().dagre;return function(t){if(e.boundingBox){var r=0===v.w?0:(t.x-v.x1)/v.w,n=0===v.h?0:(t.y-v.y1)/v.h;return{x:a.x1+r*a.w,y:a.y1+n*a.h}}return t}({x:r.x,y:r.y})})),this},e.exports=l},function(e,t){var r={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(e){return 1},edgeWeight:function(e){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(e,t){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(e,t){return t},ready:function(){},sort:void 0,stop:function(){}};e.exports=r},function(e,t){e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},function(t,r){t.exports=e}])},e.exports=r(requireDagre())}(cytoscapeDagre,cytoscapeDagre.exports);var cytoscapeDagreExports=cytoscapeDagre.exports,dagre=getDefaultExportFromCjs(cytoscapeDagreExports);function create_if_block$1(e){let t;const r=e[6].default,n=create_slot(r,e,e[5],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,o){n&&n.p&&(!t||32&o)&&update_slot_base(n,r,e,e[5],t?get_slot_changes(r,e[5],o,null):get_all_dirty_from_scope(e[5]),null)},i(e){t||(transition_in(n,e),t=!0)},o(e){transition_out(n,e),t=!1},d(e){n&&n.d(e)}}}function create_fragment$3(e){let t,r,n=e[0]&&create_if_block$1(e);return{c(){t=element$1("div"),n&&n.c(),attr(t,"class","graph svelte-1e7cfxb")},m(o,i){insert(o,t,i),n&&n.m(t,null),e[7](t),r=!0},p(e,[r]){e[0]?n?(n.p(e,r),1&r&&transition_in(n,1)):(n=create_if_block$1(e),n.c(),transition_in(n,1),n.m(t,null)):n&&(group_outros(),transition_out(n,1,1,(()=>{n=null})),check_outros())},i(e){r||(transition_in(n),r=!0)},o(e){transition_out(n),r=!1},d(r){r&&detach(t),n&&n.d(),e[7](null)}}}function draw_graph(e,t){null==e||e.elements().remove(),t.nodes_info.forEach((t=>{t&&(null==e||e.add({data:{id:t.id,label:t.name}}))})),t.edges.forEach((t=>{let r=t.source,n=t.target;r&&n&&(null==e||e.add({data:{source:r.id,target:n.id}}))})),null==e||e.layout({name:"dagre",fit:!0}).run()}function instance$2(e,t,r){let n;component_subscribe(e,systemStateStore,(e=>r(4,n=e)));let{$$slots:o={},$$scope:i}=t;var a;let s=new Graph$3;onMount((()=>{console.log("Graph Component Mounted"),cytoscape$2.use(dagre),r(0,u=cytoscape$2({container:l,style:[{selector:"node",style:{width:"label",height:"label","font-size":"14px","font-weight":"bold",content:"data(label)","text-valign":"center","text-wrap":"wrap","text-max-width":"100px","background-color":"#fff","border-color":"#000","border-width":"1px","border-style":"solid"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","line-color":"#000","target-arrow-color":"#000",width:"2px"}}]})),u.on("select","node",(e=>{console.log("event: ",e);const t=e.target.data();console.log("selectedNode: ",t),n.local_nodes.find((e=>{e.node_info.id==t.id&&n.selected_nodes.push(e.node_info)}))})),u.on("select","edge",(e=>{console.log("event: ",e);let t=new Edge,r=new GraphNodeInfo,o=new GraphNodeInfo;r.id=e.target.data().source,o.id=e.target.data().target,t.source=r,t.target=o,console.log("selectedEdge: ",e.target.data()),set_store_value(systemStateStore,n=selectEdge(t,n),n)})),u.on("unselect","node",(function(e){const t=e.target;console.log("deselected "+t.id());let r=n.selected_nodes;r=r.filter((e=>e.id==t.id())),set_store_value(systemStateStore,n.selected_nodes=r,n)})),u.on("unselect","edge",(function(e){const t=e.target;console.log("deselected "+t.data().source+" -> "+t.data().target)}))})),setContext("graphSharedState",{getCyInstance:()=>u});let l=null,u=null;return e.$$set=e=>{"$$scope"in e&&r(5,i=e.$$scope)},e.$$.update=()=>{if(29&e.$$.dirty){let e=null===r(2,a=n.selected_process)||void 0===a?void 0:a.node_content.process.graph;e!=s&&null!=e&&(r(3,s=e),draw_graph(u,s))}},[u,l,a,s,n,i,o,function(e){binding_callbacks[e?"unshift":"push"]((()=>{l=e,r(1,l)}))}]}class GraphComponent_graphlib extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$3,safe_not_equal,{})}}function authenticate(e,t,r){console.log("websocket is ready... sending auth");const n=new Letter,o=new AuthenticationMessage;n.verb=VerbTypes.Initiate,o.client_email=t,o.client_password=r;const i=new Body;i.authentication_message=o,n.body=i,console.log("Sending authentication letter:",n.toObject()),sendEnvelope(e,[n]),systemStateStore.update((e=>(console.log("setting authenticated to true"),e.authenticated=!0,e)))}function create_fragment$2(e){let t,r,n,o,i,a,s,l,u;return{c(){t=element$1("div"),r=element$1("div"),n=element$1("input"),o=space(),i=element$1("input"),a=space(),s=element$1("button"),s.textContent="Submit",attr(n,"type","text"),attr(n,"placeholder","Username"),attr(i,"type","password"),attr(i,"placeholder","Password"),attr(s,"class","submit-button svelte-t3p93c"),attr(r,"class","fields svelte-t3p93c"),attr(t,"class","container svelte-t3p93c")},m(c,g){insert(c,t,g),append(t,r),append(r,n),set_input_value(n,e[0]),append(r,o),append(r,i),set_input_value(i,e[1]),append(r,a),append(r,s),l||(u=[listen(n,"input",e[3]),listen(i,"input",e[4]),listen(s,"click",e[2])],l=!0)},p(e,[t]){1&t&&n.value!==e[0]&&set_input_value(n,e[0]),2&t&&i.value!==e[1]&&set_input_value(i,e[1])},i:noop$2,o:noop$2,d(e){e&&detach(t),l=!1,run_all(u)}}}function instance$1(e,t,r){let n;component_subscribe(e,websocketStore,(e=>r(5,n=e)));let o="",i="";return[o,i,function(){console.log("Username:",o),console.log("Password:",i),authenticate(n.websocket,"test_user","test_pass")},function(){o=this.value,r(0,o)},function(){i=this.value,r(1,i)}]}class AuthPage extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$2,safe_not_equal,{})}}function create_fragment$1(e){let t;return{c(){t=element$1("div"),t.innerHTML='<span class="loading-text svelte-17nhfwl">Loading...</span>',attr(t,"class","loading-container svelte-17nhfwl")},m(e,r){insert(e,t,r)},p:noop$2,i:noop$2,o:noop$2,d(e){e&&detach(t)}}}class Loading extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$1,safe_not_equal,{})}}function create_if_block_1(e){let t,r,n,o;const i=[create_if_block_2,create_else_block],a=[];function s(e,t){return e[0]?0:1}return t=s(e),r=a[t]=i[t](e),{c(){r.c(),n=empty()},m(e,r){a[t].m(e,r),insert(e,n,r),o=!0},p(e,o){let l=t;t=s(e),t!==l&&(group_outros(),transition_out(a[l],1,1,(()=>{a[l]=null})),check_outros(),r=a[t],r||(r=a[t]=i[t](e),r.c()),transition_in(r,1),r.m(n.parentNode,n))},i(e){o||(transition_in(r),o=!0)},o(e){transition_out(r),o=!1},d(e){a[t].d(e),e&&detach(n)}}}function create_else_block(e){let t,r;return t=new Loading({}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),r=!0},i(e){r||(transition_in(t.$$.fragment,e),r=!0)},o(e){transition_out(t.$$.fragment,e),r=!1},d(e){destroy_component(t,e)}}}function create_if_block_2(e){let t,r;return t=new AuthPage({}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),r=!0},i(e){r||(transition_in(t.$$.fragment,e),r=!0)},o(e){transition_out(t.$$.fragment,e),r=!1},d(e){destroy_component(t,e)}}}function create_if_block(e){let t,r,n,o,i;return r=new Sidebar({}),o=new GraphComponent_graphlib({}),{c(){t=element$1("div"),create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment),attr(t,"class","app-container svelte-utzf6m")},m(e,a){insert(e,t,a),mount_component(r,t,null),append(t,n),mount_component(o,t,null),i=!0},i(e){i||(transition_in(r.$$.fragment,e),transition_in(o.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),transition_out(o.$$.fragment,e),i=!1},d(e){e&&detach(t),destroy_component(r),destroy_component(o)}}}function create_fragment(e){let t,r,n,o=!e[1]&&create_if_block_1(e),i=e[1]&&create_if_block();return{c(){o&&o.c(),t=space(),i&&i.c(),r=empty()},m(e,a){o&&o.m(e,a),insert(e,t,a),i&&i.m(e,a),insert(e,r,a),n=!0},p(e,[n]){e[1]?o&&(group_outros(),transition_out(o,1,1,(()=>{o=null})),check_outros()):o?(o.p(e,n),2&n&&transition_in(o,1)):(o=create_if_block_1(e),o.c(),transition_in(o,1),o.m(t.parentNode,t)),e[1]?i?2&n&&transition_in(i,1):(i=create_if_block(),i.c(),transition_in(i,1),i.m(r.parentNode,r)):i&&(group_outros(),transition_out(i,1,1,(()=>{i=null})),check_outros())},i(e){n||(transition_in(o),transition_in(i),n=!0)},o(e){transition_out(o),transition_out(i),n=!1},d(e){o&&o.d(e),e&&detach(t),i&&i.d(e),e&&detach(r)}}}function instance(e,t,r){let n,o,i;component_subscribe(e,systemStateStore,(e=>r(2,n=e))),console.log("Script started");let a,s=!1;return onMount((()=>{console.log("onMount triggered"),set_store_value(systemStateStore,n=initializeSystemState(n),n),i=n,console.log("Initial system_state:",i),alert("onMount triggered... auth: "+i.authenticated),s||(console.log("Websocket not ready. Initializing..."),o=setupWebsocketConnection(),console.log("Websocket initialized:",o),websocketStore.set({websocket:o}),r(0,s=!0),set_store_value(systemStateStore,n=i,n))})),e.$$.update=()=>{4&e.$$.dirty&&(console.log("auth state",n.authenticated),r(1,a=n.authenticated))},[s,a,n]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}var app=new App({target:document.body});return app}();
//# sourceMappingURL=bundle.js.map
